<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 R Basics | R Handbook for Epidemiologists</title>
<meta name="author" content="the handbook team">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.15/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script><link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.9.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><link href="libs/vis-4.20.1/vis.css" rel="stylesheet">
<script src="libs/vis-4.20.1/vis.min.js"></script><script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-1.57.1/plotly-basic-1.57.1.min.js"></script><script src="libs/plotly-cartesian-1.57.1/plotly-cartesian-1.57.1.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Handbook for Epidemiologists</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome - THIS IS A DRAFT</a></li>
<li class="book-part">About this book</li>
<li><a class="" href="style-and-editorial-notes.html"><span class="header-section-number">1</span> Style and editorial notes</a></li>
<li><a class="" href="datasets-used.html"><span class="header-section-number">2</span> Datasets used</a></li>
<li class="book-part">Basics</li>
<li><a class="active" href="r-basics.html"><span class="header-section-number">3</span> R Basics</a></li>
<li><a class="" href="import-and-export.html"><span class="header-section-number">4</span> Import and export</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">5</span> R projects</a></li>
<li><a class="" href="suggested-packages.html"><span class="header-section-number">6</span> Suggested packages</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="cleaning-data.html"><span class="header-section-number">7</span> Cleaning data</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">8</span> Working with dates</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">9</span> Factors</a></li>
<li><a class="" href="pivoting-data.html"><span class="header-section-number">10</span> Pivoting data</a></li>
<li><a class="" href="grouping-data.html"><span class="header-section-number">11</span> Grouping data</a></li>
<li><a class="" href="joining-data.html"><span class="header-section-number">12</span> Joining data</a></li>
<li><a class="" href="characters-and-strings.html"><span class="header-section-number">13</span> Characters and strings</a></li>
<li><a class="" href="de-duplication.html"><span class="header-section-number">14</span> De-duplication</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">15</span> Missing data</a></li>
<li><a class="" href="iteration-and-loops.html"><span class="header-section-number">16</span> Iteration and loops</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="descriptive-analysis.html"><span class="header-section-number">17</span> Descriptive analysis</a></li>
<li><a class="" href="simple-statistical-tests.html"><span class="header-section-number">18</span> Simple statistical tests</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">19</span> Standardization</a></li>
<li><a class="" href="moving-averages.html"><span class="header-section-number">20</span> Moving averages</a></li>
<li><a class="" href="time-series-and-outbreak-detection.html"><span class="header-section-number">21</span> Time series and outbreak detection</a></li>
<li><a class="" href="epidemic-modeling.html"><span class="header-section-number">22</span> Epidemic modeling</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">23</span> Survey analysis</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">24</span> Survival analysis</a></li>
<li><a class="" href="gis-basics.html"><span class="header-section-number">25</span> GIS basics</a></li>
<li class="book-part">Data Vizualization</li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">26</span> ggplot tips</a></li>
<li><a class="" href="epidemic-curves.html"><span class="header-section-number">27</span> Epidemic curves</a></li>
<li><a class="" href="plot-continuous-data.html"><span class="header-section-number">28</span> Plot continuous data</a></li>
<li><a class="" href="plot-categorical-data.html"><span class="header-section-number">29</span> Plot categorical data</a></li>
<li><a class="" href="tables.html"><span class="header-section-number">30</span> Tables</a></li>
<li><a class="" href="age-pyramids.html"><span class="header-section-number">31</span> Age pyramids</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">32</span> Diagrams</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">33</span> Combination analysis</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Heatmaps</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">35</span> Transmission chains</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">36</span> Phylogenetic trees</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">37</span> Interactive plots</a></li>
<li class="book-part">Advanced</li>
<li><a class="" href="errors-warnings-1.html"><span class="header-section-number">38</span> Errors &amp; warnings</a></li>
<li><a class="" href="advanced-rstudio.html"><span class="header-section-number">39</span> Advanced RStudio</a></li>
<li><a class="" href="relational-databases.html"><span class="header-section-number">40</span> Relational databases</a></li>
<li><a class="" href="routine-reports.html"><span class="header-section-number">41</span> Routine reports</a></li>
<li><a class="" href="r-markdown-1.html"><span class="header-section-number">42</span> R Markdown</a></li>
<li><a class="" href="shiny-and-dashboards.html"><span class="header-section-number">43</span> Shiny and dashboards</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">44</span> Collaboration</a></li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">45</span> Writing functions</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">46</span> R on network drives</a></li>
<li><a class="" href="directory-interactions.html"><span class="header-section-number">47</span> Directory interactions</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-basics" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> R Basics<a class="anchor" aria-label="anchor" href="#r-basics"><i class="fas fa-link"></i></a>
</h1>
<!-- ======================================================= -->
<div id="overview" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview"><i class="fas fa-link"></i></a>
</h2>
<p><strong>This page is not intended to be a comprehensive “learn R” tutorial</strong>. However, it does cover some fundamentals that can be useful for reference or for refreshing your memory. See the section on recommended training for more comprehensive tutorials.</p>
<!-- ======================================================= -->
</div>
<div id="why-use-r" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Why use R?<a class="anchor" aria-label="anchor" href="#why-use-r"><i class="fas fa-link"></i></a>
</h2>
<p>As stated on the <a href="https://www.r-project.org/about.html">R project website</a>, R is a programming language and environment for statistical computing and graphics. It is highly versatile, extensible, and community-driven.</p>
<p><strong>Cost</strong></p>
<p>R is free to use! There is a strong ethic in the community of free and open-source material.</p>
<p><strong>Reproducibility</strong></p>
<p>Conducting your data management and analysis through a programming language (compared to Excel or another primarily point-click/manual tool) enhances <strong>reproducibility</strong>, makes <strong>error-detection</strong> easier, and eases your workload.</p>
<p><strong>Community</strong></p>
<p>The R community of users is enormous and collaborative. New packages and tools to address real-life problems are developed daily, and vetted by the community of users. As one example, <a href="https://rladies.org/">R-Ladies</a> is a worldwide organization whose mission is to promote gender diversity in the R community, and is one of the largest organizations of R users. It likely has a chapter near you!</p>
</div>
<div id="coming-to-r" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Coming to R<a class="anchor" aria-label="anchor" href="#coming-to-r"><i class="fas fa-link"></i></a>
</h2>
<p>This section is under construction - TBD</p>
<div id="from-stata" class="section level3 unnumbered">
<h3>From STATA<a class="anchor" aria-label="anchor" href="#from-stata"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://www.princeton.edu/~otorres/RStata.pdf" class="uri">https://www.princeton.edu/~otorres/RStata.pdf</a>
<a href="https://clanfear.github.io/Stata_R_Equivalency/docs/r_stata_commands.html" class="uri">https://clanfear.github.io/Stata_R_Equivalency/docs/r_stata_commands.html</a></p>
<p>gen to mutate
variable labels not commonly used in R</p>
</div>
<div id="from-sas" class="section level3 unnumbered">
<h3>From SAS<a class="anchor" aria-label="anchor" href="#from-sas"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="from-spss" class="section level3 unnumbered">
<h3>From SPSS<a class="anchor" aria-label="anchor" href="#from-spss"><i class="fas fa-link"></i></a>
</h3>
<!-- ======================================================= -->
</div>
</div>
<div id="install" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Installation<a class="anchor" aria-label="anchor" href="#install"><i class="fas fa-link"></i></a>
</h2>
<p><strong>How to install R</strong></p>
<p>Visit this website <a href="https://www.r-project.org/">https://www.r-project.org/</a> and download the latest version of R suitable for your computer.</p>
<p><strong>How to install R Studio</strong></p>
<p>Visit this website <a href="https://rstudio.com/products/rstudio/download/">https://rstudio.com/products/rstudio/download/</a> and download the latest free Desktop version of RStudio suitable for your computer.</p>
<p><strong>How to update R and RStudio</strong></p>
<p>Your version of R is printed to the R Console at start-up. You can also run <code><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo()</a></code>.</p>
<p>To update R, go to the website mentioned above and re-install R. Alternatively, you can use the <strong>installr</strong> package (on Windows) by running <code><a href="http://talgalili.github.io/installr/reference/updateR.html">installr::updateR()</a></code>. This will open dialog boxes to help you download the latest R version and update your packages to the new R version. More details can be found in the <strong>installr</strong> <a href="https://www.r-project.org/nosvn/pandoc/installr.html">documentation</a>.</p>
<p>Be aware that the old R version will still exist in your computer. You can temporarily run an older version (older “installation”) of R by clicking “Tools” -&gt; “Global Options” in RStudio and choosing an R version. This can be useful if you want to use a package that has not been updated to work on the newest version of R.</p>
<p>To update RStudio, you can go to the website above and re-download RStudio. Another option is to click “Help” -&gt; “Check for Updates” within RStudio, but this may not show the very latest updates.</p>
<div id="other-software-you-may-need-to-install" class="section level3 unnumbered">
<h3>Other software you <em>may</em> need to install<a class="anchor" aria-label="anchor" href="#other-software-you-may-need-to-install"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>TinyTeX (<em>for compiling an RMarkdown document to PDF</em>)<br>
</li>
<li>Pandoc (<em>for compiling RMarkdown documents</em>)<br>
</li>
<li>RTools (<em>for building packages for R</em>)<br>
</li>
<li>phantomjs (<em>for saving still images of animated networks, such as transmission chains</em>)</li>
</ul>
<div id="tinytex" class="section level4 unnumbered">
<h4>TinyTex<a class="anchor" aria-label="anchor" href="#tinytex"><i class="fas fa-link"></i></a>
</h4>
<p>TinyTex is a custom LaTeX distribution, useful when trying to produce PDFs from R.<br>
See <a href="https://yihui.org/tinytex/">https://yihui.org/tinytex/</a> for more informaton.</p>
<p>To install TinyTex from R:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'tinytex'</span><span class="op">)</span>
<span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html">install_tinytex</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># to uninstall TinyTeX, run tinytex::uninstall_tinytex()</span></code></pre></div>
</div>
<div id="pandoc" class="section level4 unnumbered">
<h4>Pandoc<a class="anchor" aria-label="anchor" href="#pandoc"><i class="fas fa-link"></i></a>
</h4>
<p>Pandoc is a document converter, a separate software from R. <strong>It comes bundled with RStudio and should not need to be downloaded.</strong> It helps the process of converting Rmarkdown documents to formats like .pdf and adding complex functionality.</p>
</div>
<div id="rtools" class="section level4 unnumbered">
<h4>RTools<a class="anchor" aria-label="anchor" href="#rtools"><i class="fas fa-link"></i></a>
</h4>
<p>RTools is a collection of software for building packages for R</p>
<p>Install from this website: <a href="https://cran.r-project.org/bin/windows/Rtools/">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</div>
<div id="phantomjs" class="section level4 unnumbered">
<h4>phantomjs<a class="anchor" aria-label="anchor" href="#phantomjs"><i class="fas fa-link"></i></a>
</h4>
<p>This is often used to take “screenshots” of webpages. For example when you make a transmission chain with <strong>epicontacts</strong> package, an HTML file is produced that is interactive and dynamic. If you want a static image, if can be useful to use the <a href="https://wch.github.io/webshot/articles/intro.html"><strong>webshot</strong></a> package to automate this process. This will require the external program “phantomjs”. You can install phantomjs via the <strong>webshot</strong> package with the command <code><a href="https://rdrr.io/pkg/webshot/man/install_phantomjs.html">webshot::install_phantomjs()</a></code>.</p>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="rstudio" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> RStudio<a class="anchor" aria-label="anchor" href="#rstudio"><i class="fas fa-link"></i></a>
</h2>
<div id="rstudio-orientation" class="section level3 unnumbered">
<h3>RStudio Orientation<a class="anchor" aria-label="anchor" href="#rstudio-orientation"><i class="fas fa-link"></i></a>
</h3>
<p><strong>First, open RStudio.</strong> As their icons can look very similar, be sure you are opening <em>RStudio</em> and not R.</p>
<p>For RStudio to function you must also have R installed on the computer (see <a href="r-basics.html#install">this section</a> for installation instructions).</p>
<p><strong>RStudio</strong> is an interface (GUI) for easier use of <strong>R</strong>. You can think of R as being the engine of a vehicle, doing the crucial work, and RStudio as the body of the vehicle (with seats, accessories, etc.) that helps you actually use the engine to move forward!</p>
<p>By default RStudio displays four rectangle panes.</p>
<div class="inline-figure"><img src="images/RStudio_overview.PNG" width="100%" style="display: block; margin: auto;"></div>
<p><span style="color: black;"><strong><em>TIP:</em></strong> If your RStudio displays only one left pane it is because you have no scripts open yet.</span></p>
<p><strong>The R Console Pane</strong></p>
<p>The R Console, by default the left or lower-left pane in R Studio, is the home of the R “engine”. This is where the commands are actually run and non-graphic outputs and error/warning messages appear. You can directly enter and run commands in the R Console, but realize that these commands are not saved as they are when running commands from a script.</p>
<p>If you are familiar with Stata, the R Console is like the Command Window and also the Results Window.</p>
<p><strong>The Source Pane</strong><br>
This pane, by default in the upper-left, is space to edit and run your scripts. This pane can also display datasets (data frames) for viewing.</p>
<p>For Stata users, this pane is similar to your Do-file and Data Editor windows.</p>
<p><strong>The Environment Pane</strong><br>
This pane, by default the upper-right, is most often used to see brief summaries of objects in the R Environment in the current session. These <a href="r-basics.html#objects">objects</a> could include imported, modified, or created datasets, parameters you have defined (e.g. a specific epi week for the analysis), or vectors or lists you have defined during analysis (e.g. names of regions). Click on the arrow next to a dataframe name to see its variables.</p>
<p>In Stata, this is most similar to Variables Manager window.</p>
<p>This pane also contains <em>History</em> where can see commands that you can previously. It also has a “Tutorial” tab where you can complete interactive R tutorials if you have the <strong>learnr</strong> package installed.</p>
<p><strong>Plots, Packages, and Help Pane</strong><br>
The lower-right pane includes several tabs including plots (display of graphics including maps), help, a file library, and available R packages (including installation/update options).</p>
<p>This pane contains the Stata equivalents of the Plots Manager and Project Manager windows.</p>
</div>
<div id="rstudio-settings" class="section level3 unnumbered">
<h3>RStudio settings<a class="anchor" aria-label="anchor" href="#rstudio-settings"><i class="fas fa-link"></i></a>
</h3>
<p>Change RStudio settings and appearance in the <em>Tools</em> drop-down menu, by selecting <em>Global Options</em>. There you can change the default settings, including appearance/background color.</p>
<div class="inline-figure"><img src="images/RStudio_tools_options.png" width="75%" style="display: block; margin: auto;"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="scripts" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Scripts<a class="anchor" aria-label="anchor" href="#scripts"><i class="fas fa-link"></i></a>
</h2>
<p>Scripts are a fundamental part of programming. Storing your code in a script (vs. typing in the console) has many advantages:</p>
<ul>
<li>Reproducibility - so that other can know exactly what you did (and what you might have done wrong!)<br>
</li>
<li>Version control - so you can track changes made by yourself or colleagues<br>
</li>
<li>Commenting/annotation - to explain to your colleagues what you have done</li>
</ul>
<!-- ======================================================= --><div id="r-markdown" class="section level3 unnumbered">
<h3>R markdown<a class="anchor" aria-label="anchor" href="#r-markdown"><i class="fas fa-link"></i></a>
</h3>
<p>Rmarkdown is a type of script in which the script itself <em>becomes</em> a document (PDF, Word, HTML, Powerpoint, etc.). See the handbook page on <a href="r-markdown-1.html#r-markdown-1">R Markdown</a> documents.</p>
<!-- ======================================================= -->
</div>
<div id="r-notebooks" class="section level3 unnumbered">
<h3>R notebooks<a class="anchor" aria-label="anchor" href="#r-notebooks"><i class="fas fa-link"></i></a>
</h3>
<p>There is no difference between writing in a Rmarkdown vs an R notebook. However the execution of the document differs slightly. See this <a href="http://uc-r.github.io/r_notebook">site</a> for more details.</p>
<!-- ======================================================= -->
</div>
<div id="shiny" class="section level3 unnumbered">
<h3>Shiny<a class="anchor" aria-label="anchor" href="#shiny"><i class="fas fa-link"></i></a>
</h3>
<p>Shiny apps/websites are contained within one script, which must be named <code>app.R</code>. This file has three components:</p>
<ol style="list-style-type: decimal">
<li>A user interface (ui)<br>
</li>
<li>A server function<br>
</li>
<li>A call to the <code>shinyApp</code> function</li>
</ol>
<p>See the handbook page on <a href="shiny-and-dashboards.html#shiny-and-dashboards">Shiny and dashboards</a>, or this online tutorial: <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Shiny tutorial</a></p>
<p><em>In older times, the above file was split into two files (<code>ui.R</code> and <code>server.R</code>)</em></p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="workingdirectory" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Working directory<a class="anchor" aria-label="anchor" href="#workingdirectory"><i class="fas fa-link"></i></a>
</h2>
<p><strong>The working directory is the root folder location used by R for your work - where R looks for and saves files by default.</strong></p>
<p>By default, it will save new files and outputs to this location, and will look for files to import (e.g. datasets) here as well.</p>
<p>The working directory appears in grey text at the top of the RStudio Console pane. You can also return the current working directory with <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> (do not put anything in the parentheses).</p>
<p><em>NOTE: If using an R project, the working directory will default to the R project root folder <strong>IF</strong> you open RStudio by clicking open the R project (the file with .rproj extension))</em></p>
<!-- ======================================================= -->
<div id="filepaths" class="section level3 unnumbered">
<h3>Filepaths<a class="anchor" aria-label="anchor" href="#filepaths"><i class="fas fa-link"></i></a>
</h3>
<p>Perhaps the most common source of frustration for an R beginner on a Windows machine - typing in a filepath to import data.</p>
<ol style="list-style-type: decimal">
<li><p>Use <strong>here</strong> - Avoid these problems altogether by using relative pathways from the root of an R project that uses the <strong>here</strong> package. See the <strong>here</strong> tab in this Basics page for more details.</p></li>
<li><p><strong>Slash direction</strong> - <em>If typing in a filepath, beware the direction of the slashes.</em> Enter them using <em>forward slashes</em> to separate components (“data/provincial.csv”). For Windows users, the default way that filepaths are displayed and copied is with <em>backslashes</em> (“\”) - so this means you must go change the direction of each slash. Or just use <strong>here</strong> and an R project as noted above.</p></li>
<li><p>Avoid using “absolute” paths - these are “full address” paths that direct to the same place regardless of the user’s working directory. For example, <strong>avoid this</strong>:</p></li>
</ol>
<pre><code>C:/Users/Name/Document/Analytic Software/R/Projects/Analysis2019/data/March2019.csv  </code></pre>
<p>This path above <em>could break</em> if the script is sent to someone on another computer! Instead, consider using an R project and having the filepath begin at that root directory (i.e. the working directory of the R project).</p>
<p>One possible exception is if working in a larger organization where you need to pull data from across several networked drives and don’t have permission to re-save the data in your R project. This can get tenuous, but it may be best to use these full absolute filepaths.</p>
<!-- ======================================================= -->
</div>
<div id="set-by-command" class="section level3 unnumbered">
<h3>Set by command<a class="anchor" aria-label="anchor" href="#set-by-command"><i class="fas fa-link"></i></a>
</h3>
<p>Use the command <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> with the filepath in quotations, for example: <code><a href="https://rdrr.io/r/base/getwd.html">setwd("C:/Documents/R Files")</a></code></p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> If using an RMarkdown script be aware of the following:</span></p>
<p>In an <a href="#rmarkdown">R Markdown</a> script, the default working directory is the folder the Rmarkdown file (<code>.Rmd</code>) is saved to. If you want to change this, you can use <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> as above, but know the change will only apply to that specific code chunk.</p>
<p>To change the working directory for all code chunks in an R markdown, edit the setup chunk to add the <code>root.dir =</code> parameter, such as below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_knit.html">opts_knit</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>root.dir <span class="op">=</span> <span class="st">'desired/filepath/here'</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="set-manually" class="section level3 unnumbered">
<h3>Set manually<a class="anchor" aria-label="anchor" href="#set-manually"><i class="fas fa-link"></i></a>
</h3>
<p>Setting your working directory manually (point-and-click)</p>
<p>From RStudio click: Session / Set Working Directory / Choose Directory (you will have to do this each time you open RStudio)</p>
<!-- ======================================================= -->
</div>
<div id="within-an-r-project" class="section level3 unnumbered">
<h3>Within an R project<a class="anchor" aria-label="anchor" href="#within-an-r-project"><i class="fas fa-link"></i></a>
</h3>
<p>If you are working in an R project, your working directory will by default be the root folder. This is convenient to maximize with the <strong>here</strong> package.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="objects" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Objects<a class="anchor" aria-label="anchor" href="#objects"><i class="fas fa-link"></i></a>
</h2>
<p>Everything in R is an object. These sections will explain:</p>
<ul>
<li>How to create objects (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>)</li>
<li>Types of objects (e.g. data frames, vectors..)<br>
</li>
<li>How to access subparts of objects (e.g. variables in a dataset)<br>
</li>
<li>Classes of objects (e.g. numeric, logical, integer, double, character, factor)</li>
</ul>
<!-- ======================================================= --><div id="everything-is-an-object" class="section level3" number="3.8.1">
<h3>
<span class="header-section-number">3.8.1</span> Everything is an object<a class="anchor" aria-label="anchor" href="#everything-is-an-object"><i class="fas fa-link"></i></a>
</h3>
<p>Everything you store in R - datasets, variables, a list of village names, a total population number, even outputs such as graphs - are <strong>objects</strong> which are <strong>assigned a name</strong> and <strong>can be referenced</strong> in later commands.</p>
<p>An object exists when you have assigned it a value (see the assignment section below). When it is assigned a value, the object appears in the Environment (see the upper right pane of RStudio). It can then be operated upon, manipulated, changed, and re-defined.</p>
<!-- ======================================================= -->
</div>
<div id="defining-objects--" class="section level3" number="3.8.2">
<h3>
<span class="header-section-number">3.8.2</span> Defining objects (<code>&lt;-</code>)<a class="anchor" aria-label="anchor" href="#defining-objects--"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Create objects <em>by assigning them a value</em> with the &lt;- operator.</strong><br>
You can think of the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> as the words “is defined as”. Assignment commands generally follow a standard order:</p>
<p><strong>object_name</strong> &lt;- <strong>value</strong> (or process/calculation that produce a value)</p>
<blockquote>
<p><strong>EXAMPLE:</strong> You may want to record the current epidemiological reporting week as an object for reference in later code. In this example, the object <code>current_week</code> is created when it is assigned the character value <code>"2018-W10"</code> (the quote marks make these a character value).<br>
The object <code>current_week</code> will then appear in the RStudio Environment pane (upper-right) and can be referenced in later commands.</p>
</blockquote>
<p>See the R commands and their output in the boxes below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">current_week</span> <span class="op">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># this command creates the object current_week by assigning it a value</span>
<span class="va">current_week</span>                 <span class="co"># this command prints the current value of current_week object in the console</span></code></pre></div>
<pre><code>## [1] "2018-W10"</code></pre>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Note the <code>[1]</code> in the R console output is simply indicating that you are viewing the first item of the output</span></p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> <strong>An object’s value can be over-written</strong> at any time by running an assignment command to re-define its value. Thus, the <strong>order of the commands run is very important</strong>.</span></p>
<p>The following command will re-define the value of <code>current_week</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">current_week</span> <span class="op">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># assigns a NEW value to the object current_week</span>
<span class="va">current_week</span>                 <span class="co"># prints the current value of current_week in the console</span></code></pre></div>
<pre><code>## [1] "2018-W51"</code></pre>
<p><strong>Dataset</strong></p>
<p>Datasets are also objects (typically “dataframes”) and must be assigned names when they are imported. In the code below, the object <code>linelist</code> is created and assigned the value of a CSV file imported with the <strong>rio</strong> package and its <code>import()</code> function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># linelist is created and assigned the value of the imported CSV file</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"my_linelist.csv"</span><span class="op">)</span></code></pre></div>
<p>You can read more about importing and exporting datasets with the section on <a href="import-and-export.html#import-and-export">Import and export</a>.</p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> A quick note on naming of objects:</span></p>
<ul>
<li>Object names must not contain spaces, but you should use underscore (_) or a period (.) instead of a space.<br>
</li>
<li>Object names are case-sensitive (meaning that Dataset_A is different from dataset_A).</li>
<li>Object names must begin with a letter (cannot begin with a number like 1, 2 or 3).</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="object-structure" class="section level3 unnumbered">
<h3>Object structure<a class="anchor" aria-label="anchor" href="#object-structure"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Objects can be a single piece of data (e.g. <code>my_number &lt;- 24</code>), or they can consist of structured data.</strong></p>
<p>The graphic below, sourced from <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">this online R tutorial</a> shows some common data structures and their names. Not included in this image is spatial data, which is discussed in the <a href="#gis">GIS section</a>.</p>
<div class="inline-figure"><img src="images/R_data_structures.png" width="75%" height="50%" style="display: block; margin: auto;"></div>
<p>In epidemiology (and particularly field epidemiology), you will <em>most commonly</em> encounter data frames and vectors:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="24%">
<col width="45%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th>Common structure</th>
<th>Explanation</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Vectors</td>
<td>A container for a sequence of singular objects, all of the same class (e.g. numeric, character).</td>
<td>
<strong>“Variables” (columns) in data frames are vectors</strong> (e.g. the column <code>age_years</code>).</td>
</tr>
<tr class="even">
<td>Data Frames</td>
<td>Vectors (e.g. columns) that are bound together that all have the same number of rows.</td>
<td>
<code>linelist</code> is a data frame.</td>
</tr>
</tbody>
</table></div>
<p>Note that to create a vector that “stands alone”, or is not part of a data frame (such as a list of location names), the function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> is often used:
<code>list_of_names &lt;- c("Ruhengeri", "Gisenyi", "Kigali", "Butare")</code></p>
<!-- ======================================================= -->
</div>
<div id="object-classes" class="section level3 unnumbered">
<h3>Object classes<a class="anchor" aria-label="anchor" href="#object-classes"><i class="fas fa-link"></i></a>
</h3>
<p>All the objects stored in R have a <em>class</em> which tells R how to handle the object. There are many possible classes, but common ones include:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="7%">
<col width="54%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th>Class</th>
<th>Explanation</th>
<th>Examples</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Character</td>
<td>These are text/words/sentences <strong>“within quotation marks”</strong>. Math cannot be done on these objects.</td>
<td>“Character objects are in quotation marks”</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Numbers that are <strong>whole only</strong> (no decimals)</td>
<td>-5, 14, or 2000</td>
</tr>
<tr class="odd">
<td>Numeric</td>
<td>These are numbers and <strong>can include decimals</strong>. If within quotation marks the will be considered character.</td>
<td>23.1 or 14</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>These are vectors that have a <strong>specified order</strong> or hierarchy of values</td>
<td>Variable <code>msf_involvement</code> with ordered values N, S, SUB, and U.</td>
</tr>
<tr class="odd">
<td>Date</td>
<td>
<strong>Once R is told that certain data are Dates</strong>, these data can be manipulated and displayed in special ways. See the page on Dates for more information.</td>
<td>2018-04-12 or 15/3/1954 or Wed 4 Jan 1980</td>
</tr>
<tr class="even">
<td>Logical</td>
<td>Values must be one of the two special values TRUE or FALSE (note these are <strong>not</strong> “TRUE” and “FALSE” in quotation marks)</td>
<td>TRUE or FALSE</td>
</tr>
<tr class="odd">
<td>data.frame</td>
<td>A data frame is how R stores a <strong>typical dataset</strong>. It consists of vectors (columns) of data bound together, that all have the same number of observations (rows).</td>
<td>The example AJS dataset named <code>linelist_raw</code> contains 68 variables with 300 observations (rows) each.</td>
</tr>
<tr class="even">
<td>list</td>
<td>A list is like vector, but holds other objects that can be other different classes</td>
<td>A list could hold a single number, and a dataframe, and a vector, and even another list within it!</td>
</tr>
</tbody>
</table></div>
<p><strong>You can test the class of an object by feeding it to the function <code><a href="https://rdrr.io/r/base/class.html">class()</a></code></strong>. Note: you can reference a specific column within a dataset using the <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> notation to separate the name of the dataset and the name of the column.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span>     <span class="co"># class should be numeric</span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span>  <span class="co"># class should be character</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>Sometimes, a column will be converted to a different class automatically by R. Watch out for this! For example, if you have a vector or column of numbers, but a character value is substituted in… the entire column will change to class character.</p>
<p>One common example is when working with a dataframe to print a table - if you make a total row and try paste/glue together percents in the same cell as numbers the entire columns above them will convert to character and can no longer be used for mathematical calculations.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="co"># define vector as all numbers</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_vector</span><span class="op">)</span>          <span class="co"># vector is numeric class</span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_vector</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"three"</span>   <span class="co"># convert the third element to a character</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_vector</span><span class="op">)</span>          <span class="co"># vector is now character class</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p><strong>Sometimes, you will need to convert objects or columns to another class.</strong></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Action</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code></td>
<td>Converts to character class</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code></td>
<td>Converts to numeric class</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/integer.html">as.integer()</a></code></td>
<td>Converts to integer class</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code></td>
<td>Converts to Date class - Note: see section on <a href="#dates">dates</a> for details</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code></td>
<td>Converts to factor - Note: re-defining order of value levels requires extra arguments</td>
</tr>
</tbody>
</table></div>
<p>likewise, there are <strong>base</strong> R functions to check whether an object IS of a specific class, such as <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/character.html">is.character()</a></code>, <code><a href="https://rdrr.io/r/base/double.html">is.double()</a></code>, <code><a href="https://rdrr.io/r/base/factor.html">is.factor()</a></code>, <code><a href="https://rdrr.io/r/base/integer.html">is.integer()</a></code></p>
<p>Here is <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">more online material on classes and data structures in R</a>.</p>
<!-- ======================================================= -->
</div>
<div id="dollarsign" class="section level3" number="3.8.3">
<h3>
<span class="header-section-number">3.8.3</span> Columns/Variables (<code>$</code>)<a class="anchor" aria-label="anchor" href="#dollarsign"><i class="fas fa-link"></i></a>
</h3>
<p>A column in a dataframe is technically a “vector”, or a sequence of values that must all be the same class (either character, numeric, logical, etc).</p>
<p><strong>Columns within a data frame can be called, referenced, extracted, and created using the <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> symbol.</strong> The <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> symbol connects the name of the column to the name of its data frame. In this handbook, we try to use the word “column” instead of “variable”.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve the length of the vector age_years</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="co"># (age is a column in the linelist data frame)</span></code></pre></div>
<p>By typing the name of the dataframe followed by <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> you will also see a drop-down menu of all columns in the data frame. You can scroll through them using your arrow key, select one with your Enter key, and avoid spelling mistakes!</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"images"</span>, <span class="st">"Calling_Names.gif"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="images/Calling_Names.gif" width="100%" style="display: block; margin: auto;"></div>
<p><span style="color: darkgreen;"><strong><em>ADVANCED TIP:</em></strong> Some more complex objects (e.g. a list, or an <code>epicontacts</code> object) may have multiple levels which can be accessed through multiple dollar signs. For example <code>epicontacts$linelist$date_onset</code></span></p>
<!-- ======================================================= -->
</div>
<div id="brackets" class="section level3" number="3.8.4">
<h3>
<span class="header-section-number">3.8.4</span> Access/index with brackets (<code>[]</code>)<a class="anchor" aria-label="anchor" href="#brackets"><i class="fas fa-link"></i></a>
</h3>
<p>You may need to view parts of objects, also called “indexing”, which is often done using the square brackets <code>[ ]</code>. Ssing <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> on a dataframe to access a column is also a type of indexing.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span><span class="op">)</span>  <span class="co"># define the vector</span>
<span class="va">my_vector</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>                                  <span class="co"># print the 5th element</span></code></pre></div>
<pre><code>## [1] "e"</code></pre>
<p>Square brackets also work to return specific parts of an returned output, such as output of a <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># All of the summary</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##     0.0     6.0    13.0    16.2    23.0    90.0      87</code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Just one part of the summary</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>  </code></pre></div>
<pre><code>## 1st Qu. 
##       6</code></pre>
<p>To view specific rows and columns of a dataset, you can do this using the syntax <code>dataframe[rows, columns]</code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># View a specific row (2) from dataset, with all columns (don't forget the comma!)</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>

<span class="co"># View all rows, but just one column</span>
<span class="va">linelist</span><span class="op">[</span>, <span class="st">"date_onset"</span><span class="op">]</span>

<span class="co"># View values from row 2 and columns 5 through 10</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> 

<span class="co"># View values from row 2 and columns 5 through 10 and 18</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">18</span><span class="op">)</span><span class="op">]</span> 

<span class="co"># View rows 2 through 20, and specific columns</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># View rows and columns based on criteria</span>
<span class="co"># *** Note the dataframe must still be names in the criteria!</span>
<span class="va">linelist</span><span class="op">[</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">25</span> , <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"date_birth"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Use View() to see the outputs in the RStudio Viewer pane (easier to read) </span>
<span class="co"># *** Note the capital "V" in View() function</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="st">"date_onset"</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Save as a new object</span>
<span class="va">new_table</span> <span class="op">&lt;-</span> <span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span><span class="op">)</span><span class="op">]</span> </code></pre></div>
<p>When indexing an object of class <strong>list</strong>, single brackets always return with class list, even if only a single object is returned. Double brackets, however, can be used to access a single element and return a different class than list.<br>
Brackets can also be written after one another, as demonstrated below.</p>
<p>This <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">visual explanation of lists indexing, with pepper shakers</a> is humorous and helpful.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># define demo list</span>
<span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="co"># First element in the list is a character vector</span>
  hospitals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span><span class="op">)</span>,
  
  <span class="co"># second element in the list is a dataframe of addresses</span>
  address   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
    street <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span><span class="op">)</span>,
    city   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>Now we extract, using various methods:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># this returns the element in class "list"</span></code></pre></div>
<pre><code>## $hospitals
## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># this is a character vector</span></code></pre></div>
<pre><code>## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="st">"hospitals"</span><span class="op">]</span><span class="op">]</span> <span class="co"># you can also index by name of the list element</span></code></pre></div>
<pre><code>## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="co"># this returns the third element of the "hospitals" character vector</span></code></pre></div>
<pre><code>## [1] "Santa Anna"</code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># This returns the first column ("street") of the address dataframe</span></code></pre></div>
<pre><code>##            street
## 1 145 Medical Way
## 2  1048 Brown Ave
## 3   999 El Camino</code></pre>
<!-- ======================================================= -->
</div>
<div id="remove-objects" class="section level3 unnumbered">
<h3>Remove objects<a class="anchor" aria-label="anchor" href="#remove-objects"><i class="fas fa-link"></i></a>
</h3>
<p>You can remove individual objects by putting the name in the <code><a href="https://rdrr.io/r/base/rm.html">rm()</a></code> function (no quote marks):</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">object_name</span><span class="op">)</span></code></pre></div>
<p>You can remove all objects (clear your workspace) by running:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="functions" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Functions<a class="anchor" aria-label="anchor" href="#functions"><i class="fas fa-link"></i></a>
</h2>
<p>This section on functions explains:</p>
<ul>
<li>What a function is and how they work<br>
</li>
<li>What arguments are<br>
</li>
<li>How to get help understanding a function</li>
</ul>
<!-- ======================================================= --><div id="simple-functions" class="section level3" number="3.9.1">
<h3>
<span class="header-section-number">3.9.1</span> Simple functions<a class="anchor" aria-label="anchor" href="#simple-functions"><i class="fas fa-link"></i></a>
</h3>
<p><strong>A function is like a machine that receives inputs, does some action with those inputs, and produces an output.</strong> What the output is depends on the function.</p>
<p><strong>Functions typically operate upon some object placed within the function’s parentheses</strong>. For example, the function <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt()</a></code> calculates the square root of a number:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">49</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>The object provided to a function also can be a column in a dataset. For example, when the function <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> is applied to the numeric column <code>age</code> in the dataset <code>linelist</code>, the output is a summary of the columns’s numeric and missing values.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##     0.0     6.0    13.0    16.2    23.0    90.0      87</code></pre>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Behind the scenes, a function represents complex additional code that has been wrapped up for the user into one easy command.</span></p>
<!-- ======================================================= -->
</div>
<div id="functions-with-multiple-arguments" class="section level3" number="3.9.2">
<h3>
<span class="header-section-number">3.9.2</span> Functions with multiple arguments<a class="anchor" aria-label="anchor" href="#functions-with-multiple-arguments"><i class="fas fa-link"></i></a>
</h3>
<p>Functions often ask for several inputs, called <strong><em>arguments</em></strong>, located within the parentheses of the function, usually separated by commas.</p>
<ul>
<li>Some arguments are required for the function to work correctly, others are optional<br>
</li>
<li>Optional arguments have default settings<br>
</li>
<li>Arguments can take character, numeric, logical (TRUE/FALSE), and other inputs</li>
</ul>
<p>Here is a fictional function, called <code>oven_bake()</code>, as an example of a typical function. It takes an input object (e.g. a dataset, or in this example “dough”) and performs operations on it as specified by additional arguments (<code>minutes =</code> and <code>temperature =</code>). The output can be printed to the console, or saved as an object using the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>.</p>
<div class="inline-figure"><img src="images/Function_Bread_Example.png" width="75%" style="display: block; margin: auto;"></div>
<p><strong>For example</strong>, the <code>age_pyramid()</code> command below produces an age pyramid plot based on defined age groups and a binary split column, such as <code>gender</code>. The function is given three arguments within the parentheses, separated by commas. The values supplied to the arguments establish <code>linelist</code> as the dataframe to use, <code>age_cat5</code> as the column to count, and <code>gender</code> as the binary column to use for splitting the pyramid by color.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an age pyramid</span>
<span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, age_group <span class="op">=</span> <span class="st">"age_cat5"</span>, split_by <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-20-1.png" width="75%" height="75%"></div>
<p>The above command can be equivalently written as below, with newlines. This can be easier to read and to write <code># comments</code>. To run this command you can highlight the entire command, or just place your cursor in the first line and then press Ctrl and Enter keys simultaneously.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an age pyramid</span>
<span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">linelist</span>,        <span class="co"># case linelist</span>
  age_group <span class="op">=</span> <span class="st">"age_cat5"</span>, <span class="co"># age group column</span>
  split_by <span class="op">=</span> <span class="st">"gender"</span>     <span class="co"># two sides to pyramid</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-21-1.png" width="75%" height="75%"></div>
<p>The first half of an argument assignment (e.g. <code>data =</code>) does not need to be specified if the arguments are written in a specific order (specified in the function’s documentation). The below code produces the exact same pyramid as above, because the function expects the argument order: data frame, <code>age_group</code> variable, <code>split_by</code> variable.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This command will produce the exact same graphic as above</span>
<span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span><span class="va">linelist</span>, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span><span class="op">)</span></code></pre></div>
<p><strong>A more complex <code>age_pyramid()</code> command might include the <em>optional</em> arguments to:</strong></p>
<ul>
<li>Show proportions instead of counts (set <code>proportional = TRUE</code> when the default is <code>FALSE</code>)<br>
</li>
<li>Specify the two colors to use (<code>pal =</code> is short for “palette” and is supplied with a vector of two color names. See the <a href="#objectstructure">objects</a> page for how the function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> makes a vector)</li>
</ul>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> For arguments that you specify with both parts of the argument (e.g. <code>proportiona = TRUE</code>), their order among all the arguments does not matter.</span></p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span>
  <span class="va">linelist</span>,                    <span class="co"># use case linelist</span>
  <span class="st">"age_cat5"</span>,                  <span class="co"># age group column</span>
  <span class="st">"gender"</span>,                    <span class="co"># split by gender</span>
  proportional <span class="op">=</span> <span class="cn">TRUE</span>,         <span class="co"># percents instead of counts</span>
  pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"purple"</span><span class="op">)</span>  <span class="co"># colors</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-22-1.png" width="75%" height="75%"></div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="packages" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Packages<a class="anchor" aria-label="anchor" href="#packages"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Packages contain functions.</strong></p>
<p>An R package is a shareable bundle of code and documentation that contains pre-defined functions. Users in the R community develop and share packages all the time, so chances are likely that a solution exists for you! You will install and use hundreds of packages in your use of R.</p>
<p>On installation, R contains <strong>“base”</strong> packages and functions that perform common elementary tasks. But many R users create specialized functions, which are verified by the R community and which you can download as a <strong>package</strong> for your own use. In this handbook, package names are written in <strong>bold</strong>. One of the more challenging aspects of R is that there are often many functions or packages to choose from to complete a given task.</p>
<div id="install-and-load" class="section level3 unnumbered">
<h3>Install and load<a class="anchor" aria-label="anchor" href="#install-and-load"><i class="fas fa-link"></i></a>
</h3>
<p><em>Functions</em> are contained within <strong>packages</strong> which can be downloaded (“installed”) to your computer from the internet. Once a package is downloaded, you access its functions by loading the package with the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> command at the beginning of each R session.</p>
<p>Think of R as your personal library: When you download a package, your library gains a new book of functions, but each time you want to use a function in that book, you must borrow that book from your library.</p>
<p>Your library is a folder on your computer with all your packages. Find out where R is installed in your computer, and look for a folder called “win-library”. For example: <code>R\win-library\4.0</code> (the 4.0 is the R version - you’ll have a different library for each R version you’ve downloaded).</p>
<p><strong>CRAN</strong></p>
<p>CRAN (Comprehensive R Archive Network) is a public warehouse of R packages that have been published by R community members. Most often, R users download packages from CRAN.</p>
<p><strong>Install vs. Load</strong></p>
<p>To use a package, 2 steps must be implemented:</p>
<ol style="list-style-type: decimal">
<li>The package must be <strong>installed</strong> (once), <em>and</em><br>
</li>
<li>The package must be <strong>loaded</strong> (each R session)</li>
</ol>
<p>The basic function for installing a package is <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>, where the name of the package is provided <em>in quotes</em>. This can also be accomplished point-and-click by going to the RStudio “Packages” pane and clicking “Install” and typing the package name. Note all this is case-sensitive.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></code></pre></div>
<p>The basic function to <strong>load</strong> a package for use (after it has been installed) is <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>, with the name of the package <em>NOT in quotes</em>.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>To check whether a package in installed or loaded, you can view the Packages pane in RStudio. If the package is installed, it is shown there with version number. If the box is checked, it is loaded for the current session.</p>
<p><strong>Using pacman</strong></p>
<p>This handbook uses the package <strong>pacman</strong> (abbreviation for “package manager”), which offers the useful function <code>p_load()</code>. This function combines the above two steps into one - it <em>installs and/or loads packages</em>, depending on what is needed. If the package has not yet been installed, it will attempt to install from CRAN, and then load it.</p>
<p>Below, we load three of the packages often used in this R basics page:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span>, <span class="va">rio</span>, <span class="va">here</span><span class="op">)</span></code></pre></div>
<p><strong>Install from github</strong></p>
<p>Sometimes, you need to install the <em>development version</em> of a package, from a Github repository. You can use <code>p_load_gh()</code> from <strong>pacman</strong> (this function is a “wrapper” around (it uses) <code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github()</a></code> from <strong>devtools</strong> package).</p>
<p>The first name listed in the quotation marks is the Github ID of the repository owner, and after the slash is the name of the repository. If you want to install from a branch other than the main/master branch, add it after an “@”.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install development version of package from github repository</span>
<span class="fu">p_install_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts"</span><span class="op">)</span>

<span class="co"># load development version of package which you had downloaded from github repository</span>
<span class="fu">p_load_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts"</span><span class="op">)</span>

<span class="co"># install development version of package, but not the main branch</span>
<span class="fu">p_install_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts@timeline"</span><span class="op">)</span></code></pre></div>
<p>Read more about <strong>pacman</strong> in this <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">online vignette</a></p>
<p><strong>Install from ZIP or TAR</strong></p>
<p>You could get the package from a URL:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">packageurl</span> <span class="op">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">packageurl</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></code></pre></div>
<p>Or download it to your computer in a zipped file:</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_local</a></span><span class="op">(</span><span class="st">"~/Downloads/dplyr-master.zip"</span><span class="op">)</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">filepath_to_source</span>, repos <span class="op">=</span> <span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span>

<span class="co"># like this: </span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"~/Downloads/dplyr-master.zip"</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></code></pre></div>
</div>
<div id="update-packages" class="section level3 unnumbered">
<h3>Update packages<a class="anchor" aria-label="anchor" href="#update-packages"><i class="fas fa-link"></i></a>
</h3>
<p>You can update packages by re-installing them. You can also click the green “Update” button in your RStudio Packages pane to see which packages have new versions to install. Be aware that your old code may need to be updated if there is a major revision to how a function works!</p>
</div>
<div id="delete-packages" class="section level3 unnumbered">
<h3>Delete packages<a class="anchor" aria-label="anchor" href="#delete-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Use <code>p_delete()</code> from <strong>pacman</strong>, or <code><a href="https://rdrr.io/r/utils/remove.packages.html">remove.packages()</a></code> from <strong>base</strong> R. Alternatively, go find the folder which contains your library and manually delete the folder.</p>
</div>
<div id="dependencies" class="section level3 unnumbered">
<h3>Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"><i class="fas fa-link"></i></a>
</h3>
<p>Packages often depend on other packages to work. These are called dependencies. If a dependency fails to install, then the package depending on it may also fail to install.</p>
<p>See the dependencies of a package with <code>p_depends()</code>, and see which packages depend on it with <code>p_depends_reverse()</code></p>
</div>
<div id="code-syntax" class="section level3 unnumbered">
<h3>Code syntax<a class="anchor" aria-label="anchor" href="#code-syntax"><i class="fas fa-link"></i></a>
</h3>
<p>For clarity in this handbook, functions are usually preceded by the name of their package using the <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> symbol in the following way: <code>package_name::function_name()</code></p>
<p>Once a package is loaded for a session, this explicit style is not necessary. One can just use <code>function_name()</code>. However writing the package name is useful when a function name is common and may exist in multiple packages (e.g. <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>). Writing the package name will also load the package if it is not already loaded.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This command uses the package "rio" and its function "import()" to import a dataset</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist.xlsx"</span>, which <span class="op">=</span> <span class="st">"Sheet1"</span><span class="op">)</span></code></pre></div>
</div>
<div id="masked-functions" class="section level3 unnumbered">
<h3>Masked functions<a class="anchor" aria-label="anchor" href="#masked-functions"><i class="fas fa-link"></i></a>
</h3>
<p>It is not uncommon that two or more packages contain the same function name. For example, the package <strong>dplyr</strong> has a <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> function, but so does the package <strong>stats</strong>. The default <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> function depends on the order these packages are first loaded in the R session - the later one will be the default for the command <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>.</p>
<p>You can check the order in your Environment pane of R Studio - click the drop-down for “Global Environment” and see the order of the packages. Functions from packages <em>lower</em> on that drop-down list will mask functions of the same name in packages that appear higher in the drop-down list. When first loading a package, R will warn you in the console if masking is occurring, but this can be easy to miss.</p>
<div class="inline-figure"><img src="images/masking_functions.png" width="50%" style="display: block; margin: auto;"></div>
<p>Here are ways you can fix masking:</p>
<ol style="list-style-type: decimal">
<li>Specify the package name in the command. For example, use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code><br>
</li>
<li>Re-arrange the order in which the packages are loaded (e.g. within <code>p_load()</code>), and start a new R session</li>
</ol>
</div>
<div id="detach-unload" class="section level3 unnumbered">
<h3>Detach / unload<a class="anchor" aria-label="anchor" href="#detach-unload"><i class="fas fa-link"></i></a>
</h3>
<p>To detach (unload) a package, use this command, with the correct package name:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">package</span><span class="op">:</span><span class="va">PACKAGE_NAME_HERE</span>, unload<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Note that this may not resolve masking.</p>
</div>
<div id="instal-older-version" class="section level3 unnumbered">
<h3>Instal older version<a class="anchor" aria-label="anchor" href="#instal-older-version"><i class="fas fa-link"></i></a>
</h3>
<p>See this <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">guide</a></p>
</div>
<div id="function-help" class="section level3 unnumbered">
<h3>Function help<a class="anchor" aria-label="anchor" href="#function-help"><i class="fas fa-link"></i></a>
</h3>
<p>To read more about a function, you can search for it in the Help tab of the lower-right RStudio. You can also run a command like <code>?thefunctionname</code> (put the name of the function after a question mark) and the Help page will appear in the Help pane. Finally, try searching online for resources.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="piping" class="section level2" number="3.11">
<h2>
<span class="header-section-number">3.11</span> Piping (<code>%&gt;%</code>)<a class="anchor" aria-label="anchor" href="#piping"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Two general approaches to working with objects are:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Pipes/tidyverse</strong> - pipes send an object from function to function - emphasis is on the <em>action</em>, not the object<br>
</li>
<li>
<strong>Define intermediate objects</strong> - an object is re-defined again and again - emphasis is on the object</li>
</ol>
<!-- ======================================================= --><div id="pipes" class="section level3 unnumbered">
<h3>
<strong>Pipes</strong><a class="anchor" aria-label="anchor" href="#pipes"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Simply explained, the pipe operator (<code>%&gt;%</code>) passes an intermediate output from one function to the next.</strong><br>
You can think of it as saying “then”. Many functions can be linked together with <code>%&gt;%</code>.</p>
<ul>
<li>
<strong>Piping emphasizes a sequence of actions, not the object the actions are being performed on</strong><br>
</li>
<li>Pipes are best when a sequence of actions must be performed on one object<br>
</li>
<li>Pipes come from the package <strong>magrittr</strong>, which is automatically included in packages <strong>dplyr</strong> and <strong>tidyverse</strong>
</li>
<li>Pipes can make code more clean and easier to read, more intuitive</li>
</ul>
<p>Read more on this approach in the tidyverse <a href="https://style.tidyverse.org/pipes.html">style guide</a></p>
<p>Here is a fake example for comparison, using fictional functions to “bake a cake”. First, the pipe method:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># A fake example of how to bake a care using piping syntax</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="va">flour</span> <span class="op">%&gt;%</span>       <span class="co"># to define cake, start with flour, and then...</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">eggs</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># add eggs</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">oil</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co"># add oil</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">water</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># add water</span>
  <span class="fu">mix_together</span><span class="op">(</span>         <span class="co"># mix together</span>
    utensil <span class="op">=</span> <span class="va">spoon</span>,
    minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>    
  <span class="fu">bake</span><span class="op">(</span>degrees <span class="op">=</span> <span class="fl">350</span>,   <span class="co"># bake</span>
       system <span class="op">=</span> <span class="st">"fahrenheit"</span>,
       minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span> <span class="op">%&gt;%</span>  
  <span class="fu">let_cool</span><span class="op">(</span><span class="op">)</span>            <span class="co"># let it cool down</span></code></pre></div>
<p>Here is another <a href="https://cfss.uchicago.edu/notes/pipes/#:~:text=Pipes%20are%20an%20extremely%20useful,code%20and%20combine%20multiple%20operations">link</a> describing the utility of pipes.</p>
<p>Piping is not a <strong>base</strong> function. To use piping, the <strong>magrittr</strong> package must be installed and loaded (this is typically done by loading <strong>tidyverse</strong> or <strong>dplyr</strong> package). You can <a href="https://magrittr.tidyverse.org/">read more about piping in the magrittr documentation</a>.</p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> Remember that even when using piping to link functions, if the assignment operator (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>) is present, the object to the left will still be over-written (re-defined) by the right side.</span></p>
<p><strong><code>%&lt;&gt;%</code></strong><br>
This is an “assignment pipe” from the <strong>magritter</strong> package, which pipes an object forward and also re-defines the object. It must be the first pipe operator in the chain. It is shorthand, so <code>object %&lt;&gt;% function() %&gt;% function()</code> is the same as <code>object &lt;- object %&gt;% function() %&gt;% function()</code>.</p>
<!-- ======================================================= -->
</div>
<div id="define-intermediate-objects" class="section level3 unnumbered">
<h3>Define intermediate objects<a class="anchor" aria-label="anchor" href="#define-intermediate-objects"><i class="fas fa-link"></i></a>
</h3>
<p>This approach to changing objects/dataframes may be better if:</p>
<ul>
<li>You need to manipulate multiple objects<br>
</li>
<li>There are intermediate steps that are meaningful and deserve separate object names</li>
</ul>
<p><strong>Risks:</strong></p>
<ul>
<li>Creating new objects for each step means creating lots of objects. If you use the wrong one you might not realize it!<br>
</li>
<li>Naming all the objects can be confusing<br>
</li>
<li>Errors may not be easily detectable</li>
</ul>
<p>Either name each intermediate object, or overwrite the original, or combine all the functions together. All come with their own risks.</p>
<p>Below is the same fake “cake” example as above, but using this style:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># a fake example of how to bake a cake using this method (defining intermediate objects)</span>
<span class="va">batter_1</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">flour</span>, <span class="va">eggs</span><span class="op">)</span>
<span class="va">batter_2</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">batter_1</span>, <span class="va">oil</span><span class="op">)</span>
<span class="va">batter_3</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">batter_2</span>, <span class="va">water</span><span class="op">)</span>

<span class="va">batter_4</span> <span class="op">&lt;-</span> <span class="fu">mix_together</span><span class="op">(</span>object <span class="op">=</span> <span class="va">batter_3</span>, utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">bake</span><span class="op">(</span><span class="va">batter_4</span>, degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">let_cool</span><span class="op">(</span><span class="va">cake</span><span class="op">)</span></code></pre></div>
<p>Combine all functions together - this is difficult to read:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># an example of combining/nesting mutliple functions together - difficult to read</span>
<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">let_cool</span><span class="op">(</span><span class="fu">bake</span><span class="op">(</span><span class="fu">mix_together</span><span class="op">(</span><span class="va">batter_3</span>, utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="operators" class="section level2" number="3.12">
<h2>
<span class="header-section-number">3.12</span> Key operators and functions<a class="anchor" aria-label="anchor" href="#operators"><i class="fas fa-link"></i></a>
</h2>
<p>This section details operators in R, such as:</p>
<ul>
<li>Definitional operators<br>
</li>
<li>Relational operators (less than, equal too..)<br>
</li>
<li>Logical operators (and, or…)<br>
</li>
<li>Handling missing values<br>
</li>
<li>Mathematical operators and functions (+/-, &gt;, sum(), median(), …)<br>
</li>
<li>The <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> operator</li>
</ul>
<!-- ======================================================= --><div id="assignment-operators" class="section level3 unnumbered">
<h3>Assignment operators<a class="anchor" aria-label="anchor" href="#assignment-operators"><i class="fas fa-link"></i></a>
</h3>
<p><strong><code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code></strong></p>
<p>The basic assignment operator in R is <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>. Such that <code>object_name &lt;- value</code>.<br>
This assignment operator can also be written as <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>. We advise use of <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> for general R use.<br>
We also advise surrounding such operators with spaces, for readability.</p>
<p><strong><code><a href="https://rdrr.io/r/base/assignOps.html">&lt;&lt;-</a></code></strong></p>
<p>If <a href="writing-functions.html#writing-functions">Writing functions</a>, or using R in an interactive way with sourced scripts, then you may need to use this assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;&lt;-</a></code> (from <strong>base</strong> R). This operator is used to define an object in a higher ‘parent’ R Environment. See this <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">online reference</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>This is an “assignment pipe” from the <strong>magrittr</strong> package, which pipes an object forward and <em>also re-defines the object</em>. It must be the first pipe operator in the chain. It is shorthand, as shown below in two equivalent examples:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>age_months <span class="op">=</span> <span class="va">age_years</span> <span class="op">*</span> <span class="fl">12</span><span class="op">)</span></code></pre></div>
<p>The above is equivalent to the below:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&lt;&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>age_months <span class="op">=</span> <span class="va">age_years</span> <span class="op">*</span> <span class="fl">12</span><span class="op">)</span></code></pre></div>
<p><strong><code>%&lt;+%</code></strong></p>
<p>This is used to add data to phylogenetic trees with the <strong>ggtree</strong> package. See the page on <a href="phylogenetic-trees.html#phylogenetic-trees">Phylogenetic trees</a> or this online <a href="https://yulab-smu.top/treedata-book/">resource book</a>.</p>
<!-- ======================================================= -->
</div>
<div id="relational-and-logical-operators" class="section level3 unnumbered">
<h3>Relational and logical operators<a class="anchor" aria-label="anchor" href="#relational-and-logical-operators"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Relational operators compare values</strong> and are often used when defining new variables and subsets of datasets. Here are the common relational operators in R:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="30%">
<col width="16%">
<col width="17%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Operator</th>
<th>Example</th>
<th>Example Result</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code></td>
<td><code>"A" == "a"</code></td>
<td>
<code>FALSE</code> (because R is case sensitive) <em>Note that == (double equals) is different from = (single equals), which acts like the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code></em>
</td>
</tr>
<tr class="even">
<td>Not equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>Greater than</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Less than</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Greater than or equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Less than or equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Value is missing</td>
<td><code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code></td>
<td><code><a href="https://rdrr.io/r/base/NA.html">is.na(7)</a></code></td>
<td>
<code>FALSE</code> (see page on <a href="missing-data.html#missing-data">Missing data</a>)</td>
</tr>
<tr class="even">
<td>Value is not missing</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table></div>
<p><strong>Logical operators, such as AND and OR, are often used to connect relational operators and create more complicated criteria</strong>. Complex statements might require parentheses ( ) for grouping and order of application.</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="31%">
<col width="68%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Operator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td><code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code></td>
</tr>
<tr class="even">
<td>OR</td>
<td>
<code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> (vertical bar)</td>
</tr>
<tr class="odd">
<td>Parentheses</td>
<td>
<code>( )</code> Used to group criteria together and clarify order of operations</td>
</tr>
</tbody>
</table></div>
<p>For example, below, we have a linelist with two variables we want to use to create our case definition, <code>hep_e_rdt</code>, a test result and <code>other_cases_in_hh</code>, which will tell us if there are other cases in the household. The command below uses the function <code>case_when()</code> to create the new variable <code>case_def</code> such that:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>case_def <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">rdt_result</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">other_case_in_home</span><span class="op">)</span>            <span class="op">~</span> <span class="cn">NA_character_</span>,
    <span class="va">rdt_result</span> <span class="op">==</span> <span class="st">"Positive"</span>                                 <span class="op">~</span> <span class="st">"Confirmed"</span>,
    <span class="va">rdt_result</span> <span class="op">!=</span> <span class="st">"Positive"</span> <span class="op">&amp;</span> <span class="va">other_cases_in_home</span> <span class="op">==</span> <span class="st">"Yes"</span>  <span class="op">~</span> <span class="st">"Probable"</span>,
    <span class="cn">TRUE</span>                                                     <span class="op">~</span> <span class="st">"Suspected"</span>
  <span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="51%">
<col width="48%">
</colgroup>
<thead><tr class="header">
<th>Criteria in example above</th>
<th>Resulting value in new variable “case_def”</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>If the value for variables <code>rdt_result</code> and <code>other_cases_in_home</code> are missing</td>
<td>
<code>NA</code> (missing)</td>
</tr>
<tr class="even">
<td>If the value in <code>rdt_result</code> is “Positive”</td>
<td>“Confirmed”</td>
</tr>
<tr class="odd">
<td>If the value in <code>rdt_result</code> is NOT “Positive” AND the value in <code>other_cases_in_home</code> is “Yes”</td>
<td>“Probable”</td>
</tr>
<tr class="even">
<td>If one of the above criteria are not met</td>
<td>“Suspected”</td>
</tr>
</tbody>
</table></div>
<p><em>Note that R is case-sensitive, so “Positive” is different than “positive”…</em></p>
<!-- ======================================================= -->
</div>
<div id="missing-values" class="section level3 unnumbered">
<h3>Missing values<a class="anchor" aria-label="anchor" href="#missing-values"><i class="fas fa-link"></i></a>
</h3>
<p><strong>In R, missing values are represented by the special value <code>NA</code> (a “reserved” value)</strong> (capital letters N and A - not in quotation marks). If you import data that records missing data in another way (e.g. 99, “Missing”, or .), you may want to re-code those values to <code>NA</code>.</p>
<p><strong>To test whether a value is <code>NA</code>, use the special function <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code></strong>, which returns <code>TRUE</code> or <code>FALSE</code>.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rdt_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span><span class="op">)</span>   <span class="co"># two positive cases, one suspected, and one unknown</span>
<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">rdt_result</span><span class="op">)</span>  <span class="co"># Tests whether the value of rdt_result is NA</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>Here is the <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/NA.html">R documentation on missing values</a></p>
<p><strong>Variations on <code>NA</code></strong></p>
<p><code>NA</code> is actually a logical value of length 1. You may also encounter <code>NA_character_</code>, <code>NA_real_</code>, <code>NA_complex_</code>, and <code>NA_integer_</code>, which correspond to specific classes.</p>
<p>The most prominent application of one of these variants in common epidemiology work is using <code>case_when()</code>. The Right-Hand Side (RHS) values must all be of the same class. Thus, if you have character outcomes on the RHS like “Confirmed”, “Suspect”, “Probable” and <code>NA</code> - you will get an error. Instead of <code>NA</code> you must have <code>NA_character_</code>. Likewise for integers, use <code>NA_integer_</code>.</p>
<p><strong><code>NULL</code></strong></p>
<p><code>NULL</code> is the null object in R, often used to represent a list of 0 length. Use <code><a href="https://rdrr.io/r/base/NULL.html">is.null()</a></code> to evaluate this status.</p>
<p>More detail on the difference between <code>NA</code> and <code>NULL</code> is <a href="https://www.r-bloggers.com/2010/04/r-na-vs-null/">here</a></p>
<!-- ======================================================= -->
</div>
<div id="mathematics-and-statistics" class="section level3 unnumbered">
<h3>Mathematics and statistics<a class="anchor" aria-label="anchor" href="#mathematics-and-statistics"><i class="fas fa-link"></i></a>
</h3>
<p>All the operators and functions in this page is automatically available using <strong>base</strong> R.</p>
<div id="mathematical-operators" class="section level4 unnumbered">
<h4>Mathematical operators<a class="anchor" aria-label="anchor" href="#mathematical-operators"><i class="fas fa-link"></i></a>
</h4>
<p>These are often used to perform addition, division, to create new columns, etc. Below are common mathematical operators in R. Whether you put spaces around the operators is not important.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Example in R</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>addition</td>
<td>2 + 3</td>
</tr>
<tr class="even">
<td>subtraction</td>
<td>2 - 3</td>
</tr>
<tr class="odd">
<td>multiplication</td>
<td>2 * 3</td>
</tr>
<tr class="even">
<td>division</td>
<td>30 / 5</td>
</tr>
<tr class="odd">
<td>exponent</td>
<td>2^3</td>
</tr>
<tr class="even">
<td>order of operations</td>
<td>( )</td>
</tr>
</tbody>
</table></div>
</div>
<div id="mathematical-functions" class="section level4 unnumbered">
<h4>Mathematical functions<a class="anchor" aria-label="anchor" href="#mathematical-functions"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rounding</td>
<td>round(x, digits = n)</td>
</tr>
<tr class="even">
<td>rounding</td>
<td>janitor::round_half_up(x, digits = n)</td>
</tr>
<tr class="odd">
<td>ceiling (round up)</td>
<td>ceiling(x)</td>
</tr>
<tr class="even">
<td>floor (round down)</td>
<td>floor(x)</td>
</tr>
<tr class="odd">
<td>absolute value</td>
<td>abs(x)</td>
</tr>
<tr class="even">
<td>square root</td>
<td>sqrt(x)</td>
</tr>
<tr class="odd">
<td>exponent</td>
<td>exponent(x)</td>
</tr>
<tr class="even">
<td>natural logarithm</td>
<td>log(x)</td>
</tr>
<tr class="odd">
<td>log base 10</td>
<td>log10(x)</td>
</tr>
<tr class="even">
<td>log base 2</td>
<td>log2(x)</td>
</tr>
</tbody>
</table></div>
</div>
<div id="scientific-notation" class="section level4 unnumbered">
<h4>Scientific notation<a class="anchor" aria-label="anchor" href="#scientific-notation"><i class="fas fa-link"></i></a>
</h4>
<p>To turn off scientific notation in your R session, run this command:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>scipen<span class="op">=</span><span class="fl">999</span><span class="op">)</span></code></pre></div>
</div>
<div id="rounding" class="section level4 unnumbered">
<h4>Rounding<a class="anchor" aria-label="anchor" href="#rounding"><i class="fas fa-link"></i></a>
</h4>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> uses “banker’s rounding” which rounds up from a .5 only if the upper number is even. Use <code>round_half_up()</code> from <strong>janitor</strong> to consistently round halves up to the nearest whole number. See <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">this explanation</a> </span></p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># use the appropriate rounding function for your work</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2 4</code></pre>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/round_half_up.html">round_half_up</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
</div>
<div id="statistical-functions" class="section level4" number="3.12.0.1">
<h4>
<span class="header-section-number">3.12.0.1</span> Statistical functions:<a class="anchor" aria-label="anchor" href="#statistical-functions"><i class="fas fa-link"></i></a>
</h4>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> The functions below will by default include missing values in calculations. Missing values will result in an output of NA, unless the argument <code>na.rm=TRUE</code> is specified</span></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>mean (average)</td>
<td>mean(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>median</td>
<td>median(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>standard deviation</td>
<td>sd(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>quantiles*</td>
<td>quantile(x, probs)</td>
</tr>
<tr class="odd">
<td>sum</td>
<td>sum(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>minimum value</td>
<td>min(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>maximum value</td>
<td>max(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>range of numeric values</td>
<td>range(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>summmary**</td>
<td>summary(x)</td>
</tr>
</tbody>
</table></div>
<p>Notes:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code>: <code>x</code> is the numeric vector to examine, and <code>probs =</code> is a numeric vector with probabilities within 0 and 1.0, e.g <code><a href="https://rdrr.io/r/base/c.html">c(0.5, 0.8, 0.85)</a></code>
</li>
<li>
<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>: gives a summary on a numeric vector including mean, median, and common percentiles</li>
</ul>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> If providing a vector of numbers to one of the above functions, be sure to wrap the numbers within <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> .</span></p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If supplying raw numbers to a function, wrap them in c()</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span>    <span class="co"># !!! INCORRECT !!!  </span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="co"># CORRECT</span></code></pre></div>
<pre><code>## [1] 5.666667</code></pre>
</div>
<div id="other-useful-functions" class="section level4" number="3.12.0.2">
<h4>
<span class="header-section-number">3.12.0.2</span> Other useful functions:<a class="anchor" aria-label="anchor" href="#other-useful-functions"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="29%">
<col width="21%">
<col width="49%">
</colgroup>
<thead><tr class="header">
<th>Objective</th>
<th>Function</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>create a sequence</td>
<td>seq(from, to, by)</td>
<td><code><a href="https://rdrr.io/r/base/seq.html">seq(1, 10, 2)</a></code></td>
</tr>
<tr class="even">
<td>repeat x, n times</td>
<td>rep(x, ntimes)</td>
<td>
<code><a href="https://rdrr.io/r/base/rep.html">rep(1:3, 2)</a></code> or <code><a href="https://rdrr.io/r/base/rep.html">rep(c("a", "b", "c"), 3)</a></code>
</td>
</tr>
<tr class="odd">
<td>subdivide a numeric vector</td>
<td>cut(x, n)</td>
<td><code><a href="https://rdrr.io/r/base/cut.html">cut(linelist$age, 5)</a></code></td>
</tr>
<tr class="even">
<td>take a random sample</td>
<td>sample(x, size)</td>
<td><code><a href="https://rdrr.io/r/base/sample.html">sample(linelist$id, size = 5, replace = TRUE)</a></code></td>
</tr>
</tbody>
</table></div>
<!-- ======================================================= -->
</div>
</div>
<div id="in" class="section level3 unnumbered">
<h3>
<code>%in%</code><a class="anchor" aria-label="anchor" href="#in"><i class="fas fa-link"></i></a>
</h3>
<p>A very useful operator for matching values, and for quickly assessing if a value is within a vector or dataframe.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"a"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"h"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>To ask if a value is <strong>not</strong> <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> a vector, put an exclamation mark (!) <strong>in front</strong> of the logic statement:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># to negate, put an exclamation in front</span>
<span class="op">!</span><span class="st">"a"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">!</span><span class="st">"h"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> is very useful when using the <strong>dplyr</strong> function <code>case_when()</code>. You can define a vector previously, and then reference it later. For example:</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">affirmative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span><span class="op">)</span>

<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>child_hospitaled <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="va">hospitalized</span> <span class="op">%in%</span> <span class="va">affirmative</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">18</span> <span class="op">~</span> <span class="st">"Hospitalized Child"</span>,
    <span class="cn">TRUE</span>                                      <span class="op">~</span> <span class="st">"Not"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Note: If you want to detect a partial string, perhaps using <code>str_detect()</code> from <strong>stringr</strong>, it will not accept a character vector like <code><a href="https://rdrr.io/r/base/c.html">c("1", "Yes", "yes", "y")</a></code>. Instead, it must be given a <em>regular expression</em> - one condensed string with OR bars, such as “1|Yes|yes|y”. For example, <code>str_detect(hospitalized, "1|Yes|yes|y")</code>. See the page on <a href="characters-and-strings.html#characters-and-strings">Characters and strings</a> for more information.</p>
<p>You can convert a character vector to a named regular expression with this command:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">affirmative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span><span class="op">)</span>
<span class="va">affirmative</span></code></pre></div>
<pre><code>## [1] "1"   "Yes" "YES" "yes" "y"   "Y"   "oui" "Oui" "Si"</code></pre>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># condense to </span>
<span class="va">affirmative_str_search</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">affirmative</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>  <span class="co"># option with base R</span>
<span class="va">affirmative_str_search</span> <span class="op">&lt;-</span> <span class="fu">str_c</span><span class="op">(</span><span class="va">affirmative</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>   <span class="co"># option with stringr package</span>

<span class="va">affirmative_str_search</span></code></pre></div>
<pre><code>## [1] "1|Yes|YES|yes|y|Y|oui|Oui|Si"</code></pre>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="errors-warnings" class="section level2" number="3.13">
<h2>
<span class="header-section-number">3.13</span> Errors &amp; Warnings<a class="anchor" aria-label="anchor" href="#errors-warnings"><i class="fas fa-link"></i></a>
</h2>
<p>This section explains:</p>
<ul>
<li>The difference between errors and warnings<br>
</li>
<li>General syntax tips for writing R code<br>
</li>
<li>Code assists</li>
</ul>
<p>Common errors and warnings and troubleshooting tips can be found in the page on [Errors and warnings].</p>
<!-- ======================================================= -->
<div id="error-versus-warning" class="section level3 unnumbered">
<h3>Error versus Warning<a class="anchor" aria-label="anchor" href="#error-versus-warning"><i class="fas fa-link"></i></a>
</h3>
<p>When a command is run, the R Console may show you warning or error messages in red text.</p>
<ul>
<li><p>A <strong>warning</strong> means that R has completed your command, but had to take additional steps or produced unusual output that you should be aware of.</p></li>
<li><p>An <strong>error</strong> means that R was not able to complete your command.</p></li>
</ul>
<p>Look for clues:</p>
<ul>
<li><p>The error/warning message will often include a line number for the problem.</p></li>
<li><p>If an object “is unknown” or “not found”, perhaps you spelled it incorrectly, forgot to call a package with library(), or forgot to re-run your script after making changes.</p></li>
</ul>
<p>If all else fails, copy the error message into Google along with some key terms - chances are that someone else has worked through this already!</p>
<!-- ======================================================= -->
</div>
<div id="general-syntax-tips" class="section level3 unnumbered">
<h3>General syntax tips<a class="anchor" aria-label="anchor" href="#general-syntax-tips"><i class="fas fa-link"></i></a>
</h3>
<p>A few things to remember when writing commands in R, to avoid errors and warnings:</p>
<ul>
<li>Always close parentheses - tip: count the number of opening “(” and closing parentheses “)” for each code chunk</li>
<li>Avoid spaces in column and object names. Use underscore ( _ ) or periods ( . ) instead</li>
<li>Keep track of and remember to separate a function’s arguments with commas</li>
<li>R is case-sensitive, meaning <code>Variable_A</code> is <em>different</em> from <code>variable_A</code>
</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="code-assists" class="section level3 unnumbered">
<h3>Code assists<a class="anchor" aria-label="anchor" href="#code-assists"><i class="fas fa-link"></i></a>
</h3>
<p>Any script (RMarkdown or otherwise) will give clues when you have made a mistake. For example, if you forgot to write a comma where it is needed, or to close a parentheses, RStudio will raise a flag on that line, on the right side of the script, to warn you.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="recommended-training-and-help" class="section level2" number="3.14">
<h2>
<span class="header-section-number">3.14</span> Recommended training and help<a class="anchor" aria-label="anchor" href="#recommended-training-and-help"><i class="fas fa-link"></i></a>
</h2>
<div id="resources-within-rstudio" class="section level3 unnumbered">
<h3>Resources within RStudio<a class="anchor" aria-label="anchor" href="#resources-within-rstudio"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Help documentation</strong></p>
<p>Search the RStudio “Help” tab for documentation on packages and specific functions. This is within the pane that also contains Files, Plots, and Packages (typically in the lower-right pane). As a shortcut, you can also type the name of a package or function into the R console after a question-mark to open the relevant Help page. For example: <code><a href="https://rdrr.io/r/stats/filter.html">?filter</a></code> or <code>?diagrammeR</code>.</p>
<p><strong>Interactive tutorials</strong></p>
<p>RStudio has built-in interative tutorials via the <strong>learnr</strong> package. If this package is installed, you can go through these tutorials via the “Tutorial” tab in the upper-right RStudio pane (which also contains Environment and History tabs).</p>
</div>
<div id="cheatsheets" class="section level3 unnumbered">
<h3>Cheatsheets<a class="anchor" aria-label="anchor" href="#cheatsheets"><i class="fas fa-link"></i></a>
</h3>
<p>This is an online R resource specifically for <a href="https://jules32.github.io/r-for-excel-users/vlookup.html">Excel users</a></p>
<p>There are many cheatsheets available on the <a href="https://rstudio.com/resources/cheatsheets/">RStudio website</a>, for example:</p>
<ul>
<li>Factors with <strong>forcats</strong> package<br>
</li>
<li>Dates and times with <strong>lubridate</strong> package<br>
</li>
<li>Strings with <strong>stringr</strong> pacage<br>
</li>
<li>“apply” functions with <strong>purrr</strong> package<br>
</li>
<li>Data import cheatsheet<br>
</li>
<li>Data transformation cheatsheet with <strong>dplyr</strong> package<br>
</li>
<li>R Markdown<br>
</li>
<li>Shiny<br>
</li>
<li>Data viz with <strong>ggplot2</strong> package<br>
</li>
<li>Cartography<br>
</li>
<li>
<strong>leaflet</strong> package</li>
<li>Python with R (<strong>reticulate</strong> package)</li>
</ul>
</div>
<div id="free-online-books" class="section level3 unnumbered">
<h3>Free online books<a class="anchor" aria-label="anchor" href="#free-online-books"><i class="fas fa-link"></i></a>
</h3>
<p>A definitive text is the <a href="https://r4ds.had.co.nz/">R for Data Science</a> book by Garrett Grolemund and Hadley Wickham</p>
</div>
<div id="courses" class="section level3 unnumbered">
<h3>Courses<a class="anchor" aria-label="anchor" href="#courses"><i class="fas fa-link"></i></a>
</h3>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="datasets-used.html"><span class="header-section-number">2</span> Datasets used</a></div>
<div class="next"><a href="import-and-export.html"><span class="header-section-number">4</span> Import and export</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-basics"><span class="header-section-number">3</span> R Basics</a></li>
<li><a class="nav-link" href="#overview"><span class="header-section-number">3.1</span> Overview</a></li>
<li><a class="nav-link" href="#why-use-r"><span class="header-section-number">3.2</span> Why use R?</a></li>
<li>
<a class="nav-link" href="#coming-to-r"><span class="header-section-number">3.3</span> Coming to R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#from-stata">From STATA</a></li>
<li><a class="nav-link" href="#from-sas">From SAS</a></li>
<li><a class="nav-link" href="#from-spss">From SPSS</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#install"><span class="header-section-number">3.4</span> Installation</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#other-software-you-may-need-to-install">Other software you may need to install</a></li></ul>
</li>
<li>
<a class="nav-link" href="#rstudio"><span class="header-section-number">3.5</span> RStudio</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rstudio-orientation">RStudio Orientation</a></li>
<li><a class="nav-link" href="#rstudio-settings">RStudio settings</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#scripts"><span class="header-section-number">3.6</span> Scripts</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-markdown">R markdown</a></li>
<li><a class="nav-link" href="#r-notebooks">R notebooks</a></li>
<li><a class="nav-link" href="#shiny">Shiny</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#workingdirectory"><span class="header-section-number">3.7</span> Working directory</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#filepaths">Filepaths</a></li>
<li><a class="nav-link" href="#set-by-command">Set by command</a></li>
<li><a class="nav-link" href="#set-manually">Set manually</a></li>
<li><a class="nav-link" href="#within-an-r-project">Within an R project</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#objects"><span class="header-section-number">3.8</span> Objects</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#everything-is-an-object"><span class="header-section-number">3.8.1</span> Everything is an object</a></li>
<li><a class="nav-link" href="#defining-objects--"><span class="header-section-number">3.8.2</span> Defining objects (&lt;-)</a></li>
<li><a class="nav-link" href="#object-structure">Object structure</a></li>
<li><a class="nav-link" href="#object-classes">Object classes</a></li>
<li><a class="nav-link" href="#dollarsign"><span class="header-section-number">3.8.3</span> Columns/Variables ($)</a></li>
<li><a class="nav-link" href="#brackets"><span class="header-section-number">3.8.4</span> Access/index with brackets ([])</a></li>
<li><a class="nav-link" href="#remove-objects">Remove objects</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#functions"><span class="header-section-number">3.9</span> Functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#simple-functions"><span class="header-section-number">3.9.1</span> Simple functions</a></li>
<li><a class="nav-link" href="#functions-with-multiple-arguments"><span class="header-section-number">3.9.2</span> Functions with multiple arguments</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#packages"><span class="header-section-number">3.10</span> Packages</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#install-and-load">Install and load</a></li>
<li><a class="nav-link" href="#update-packages">Update packages</a></li>
<li><a class="nav-link" href="#delete-packages">Delete packages</a></li>
<li><a class="nav-link" href="#dependencies">Dependencies</a></li>
<li><a class="nav-link" href="#code-syntax">Code syntax</a></li>
<li><a class="nav-link" href="#masked-functions">Masked functions</a></li>
<li><a class="nav-link" href="#detach-unload">Detach / unload</a></li>
<li><a class="nav-link" href="#instal-older-version">Instal older version</a></li>
<li><a class="nav-link" href="#function-help">Function help</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#piping"><span class="header-section-number">3.11</span> Piping (%&gt;%)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#pipes">Pipes</a></li>
<li><a class="nav-link" href="#define-intermediate-objects">Define intermediate objects</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#operators"><span class="header-section-number">3.12</span> Key operators and functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#assignment-operators">Assignment operators</a></li>
<li><a class="nav-link" href="#relational-and-logical-operators">Relational and logical operators</a></li>
<li><a class="nav-link" href="#missing-values">Missing values</a></li>
<li><a class="nav-link" href="#mathematics-and-statistics">Mathematics and statistics</a></li>
<li><a class="nav-link" href="#in">%in%</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#errors-warnings"><span class="header-section-number">3.13</span> Errors &amp; Warnings</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#error-versus-warning">Error versus Warning</a></li>
<li><a class="nav-link" href="#general-syntax-tips">General syntax tips</a></li>
<li><a class="nav-link" href="#code-assists">Code assists</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#recommended-training-and-help"><span class="header-section-number">3.14</span> Recommended training and help</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#resources-within-rstudio">Resources within RStudio</a></li>
<li><a class="nav-link" href="#cheatsheets">Cheatsheets</a></li>
<li><a class="nav-link" href="#free-online-books">Free online books</a></li>
<li><a class="nav-link" href="#courses">Courses</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Handbook for Epidemiologists</strong>" was written by the handbook team. It was last built on 2021-03-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
