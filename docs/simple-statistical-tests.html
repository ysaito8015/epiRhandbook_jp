<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>16 Simple statistical tests | R Handbook for Epidemiologists</title>
<meta name="author" content="the handbook team">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.15/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script><link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.9.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><link href="libs/vis-4.20.1/vis.css" rel="stylesheet">
<script src="libs/vis-4.20.1/vis.min.js"></script><script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-1.57.1/plotly-basic-1.57.1.min.js"></script><script src="libs/plotly-cartesian-1.57.1/plotly-cartesian-1.57.1.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Handbook for Epidemiologists</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome - THIS IS A DRAFT</a></li>
<li class="book-part">About this book</li>
<li><a class="" href="style-and-editorial-notes.html"><span class="header-section-number">1</span> Style and editorial notes</a></li>
<li><a class="" href="datasets-used.html"><span class="header-section-number">2</span> Datasets used</a></li>
<li class="book-part">Basics</li>
<li><a class="" href="r-basics.html"><span class="header-section-number">3</span> R Basics</a></li>
<li><a class="" href="importing-and-exporting.html"><span class="header-section-number">4</span> Importing and exporting</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">5</span> R projects</a></li>
<li><a class="" href="suggested-packages.html"><span class="header-section-number">6</span> Suggested packages</a></li>
<li class="book-part">Data Management</li>
<li><a class="" href="cleaning-data.html"><span class="header-section-number">7</span> Cleaning data</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">8</span> Working with dates</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">9</span> Missing data</a></li>
<li><a class="" href="grouping-data.html"><span class="header-section-number">10</span> Grouping data</a></li>
<li><a class="" href="joining-data.html"><span class="header-section-number">11</span> Joining data</a></li>
<li><a class="" href="characters-and-strings.html"><span class="header-section-number">12</span> Characters and strings</a></li>
<li><a class="" href="de-duplication.html"><span class="header-section-number">13</span> De-duplication</a></li>
<li><a class="" href="iteration-and-loops.html"><span class="header-section-number">14</span> Iteration and loops</a></li>
<li class="book-part">Analysis</li>
<li><a class="" href="descriptive-analysis.html"><span class="header-section-number">15</span> Descriptive analysis</a></li>
<li><a class="active" href="simple-statistical-tests.html"><span class="header-section-number">16</span> Simple statistical tests</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">17</span> Standardization</a></li>
<li><a class="" href="moving-averages.html"><span class="header-section-number">18</span> Moving averages</a></li>
<li><a class="" href="outbreak-detection.html"><span class="header-section-number">19</span> Outbreak detection</a></li>
<li><a class="" href="time-series-and-outbreak-detection.html"><span class="header-section-number">20</span> Time series and outbreak detection</a></li>
<li><a class="" href="epidemic-modeling.html"><span class="header-section-number">21</span> Epidemic modeling</a></li>
<li><a class="" href="modeling.html"><span class="header-section-number">22</span> Modeling</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">23</span> Survey analysis</a></li>
<li><a class="" href="survival-analysis-1.html"><span class="header-section-number">24</span> Survival analysis</a></li>
<li><a class="" href="gis-basics.html"><span class="header-section-number">25</span> GIS basics</a></li>
<li class="book-part">Data Vizualization</li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">26</span> ggplot tips</a></li>
<li><a class="" href="epidemic-curves.html"><span class="header-section-number">27</span> Epidemic curves</a></li>
<li><a class="" href="plot-continuous-data.html"><span class="header-section-number">28</span> Plot continuous data</a></li>
<li><a class="" href="plot-categorical-data.html"><span class="header-section-number">29</span> Plot categorical data</a></li>
<li><a class="" href="tables.html"><span class="header-section-number">30</span> Tables</a></li>
<li><a class="" href="age-pyramids.html"><span class="header-section-number">31</span> Age pyramids</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">32</span> Diagrams</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">33</span> Combination analysis</a></li>
<li><a class="" href="heatmaps-density-plots.html"><span class="header-section-number">34</span> Heatmaps &amp; density plots</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">35</span> Transmission chains</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">36</span> Phylogenetic trees</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">37</span> Interactive plots</a></li>
<li class="book-part">Advanced</li>
<li><a class="" href="errors-warnings-1.html"><span class="header-section-number">38</span> Errors &amp; warnings</a></li>
<li><a class="" href="advanced-rstudio.html"><span class="header-section-number">39</span> Advanced RStudio</a></li>
<li><a class="" href="relational-databases.html"><span class="header-section-number">40</span> Relational databases</a></li>
<li><a class="" href="routine-reports.html"><span class="header-section-number">41</span> Routine reports</a></li>
<li><a class="" href="r-markdown-1.html"><span class="header-section-number">42</span> R Markdown</a></li>
<li><a class="" href="shiny-and-dashboards.html"><span class="header-section-number">43</span> Shiny and dashboards</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">44</span> Collaboration</a></li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">45</span> Writing functions</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">46</span> R on network drives</a></li>
<li><a class="" href="directory-interactions.html"><span class="header-section-number">47</span> Directory interactions</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="simple-statistical-tests" class="section level1" number="16">
<h1>
<span class="header-section-number">16</span> Simple statistical tests<a class="anchor" aria-label="anchor" href="#simple-statistical-tests"><i class="fas fa-link"></i></a>
</h1>
<!-- ======================================================= -->
<div id="overview-9" class="section level2" number="16.1">
<h2>
<span class="header-section-number">16.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview-9"><i class="fas fa-link"></i></a>
</h2>
<p>This tab demonstrates the use of <strong>gtstummary</strong> and regression packages to
look at associations between variables (e.g. odds ratios, risk ratios and hazard
ratios)</p>
<ol style="list-style-type: decimal">
<li>Univariate: two-by-two tables</li>
<li>Stratified: mantel-haenszel estimates</li>
<li>Multivariable: variable selection, model selection, final table</li>
<li>Forest plot</li>
</ol>
<!-- ======================================================= -->
</div>
<div id="preparation-7" class="section level2" number="16.2">
<h2>
<span class="header-section-number">16.2</span> Preparation<a class="anchor" aria-label="anchor" href="#preparation-7"><i class="fas fa-link"></i></a>
</h2>
<div id="packages-3" class="section level3" number="16.2.1">
<h3>
<span class="header-section-number">16.2.1</span> Packages<a class="anchor" aria-label="anchor" href="#packages-3"><i class="fas fa-link"></i></a>
</h3>
<p>This code chunk shows the loading of packages required for the analyses.</p>
<div class="sourceCode" id="cb712"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">rio</span>,          <span class="co"># File import</span>
               <span class="va">here</span>,         <span class="co"># File locator</span>
               <span class="va">tidyverse</span>,    <span class="co"># data management + ggplot2 graphics, </span>
               <span class="va">stringr</span>,      <span class="co"># manipulate text strings </span>
               <span class="va">purrr</span>,        <span class="co"># loop over objects in a tidy way</span>
               <span class="va">gtsummary</span>,    <span class="co"># summary statistics and tests </span>
               <span class="va">broom</span>,        <span class="co"># tidy up results from regressions</span>
               <span class="va">parameters</span>,   <span class="co"># alternative to tidy up results from regressions</span>
               <span class="va">see</span>           <span class="co"># alternative to visualise forest plots</span>
               <span class="op">)</span></code></pre></div>
</div>
<div id="load-data-1" class="section level3" number="16.2.2">
<h3>
<span class="header-section-number">16.2.2</span> Load data<a class="anchor" aria-label="anchor" href="#load-data-1"><i class="fas fa-link"></i></a>
</h3>
<p>The example dataset used in this section:</p>
<ul>
<li>Linelist of individual cases from a simulated epidemic</li>
</ul>
<p>The dataset is imported using the <code>import()</code> function from the <em>rio</em> package. See the <em>page on importing data</em> for various ways to import data.</p>
<div class="sourceCode" id="cb713"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># import the linelist</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.xlsx"</span><span class="op">)</span></code></pre></div>
<p>The first 50 rows of the linelist are displayed below.</p>
<div id="htmlwidget-3f6b06c92774b1be64f6" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3f6b06c92774b1be64f6">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"2\" data-max=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1399334400000\" data-max=\"1407283200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1399507200000\" data-max=\"1407628800000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1.39968e+12\" data-max=\"1407715200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"40\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"40\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"-13.2688968279886\" data-max=\"-13.2097478342339\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"8.44852192548534\" data-max=\"8.48604294056283\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"85\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"22\" data-max=\"203\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"20\" data-max=\"25\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"35.6\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"228.928199791883\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["d8a13d","8689b7","11f8ea","dae8c7","acf422","1a4ac9","275cc7","1389ca","057e7a","c97dd9","02d8fd","c36eb4","88eff2","542d07","f50e8a","7f5a01","b799eb","415e3a","bc2adf","188c88","959170","dd9d20","6d788e","67be4e","a9feb3","f81362","4c1040","2cb9a5","342b03","92ddf7","69446e","583717","0a9827","3789ee","d9f1b9","14224c","c5d4ec","53f4ae","c8c030","6b70f0","675f57","1a9636","059cc0","9cd6d0","4ade58","571076","7d99f2","6dca26","579c1d","267434"],[4,4,2,3,6,6,5,4,7,9,9,8,5,5,10,7,5,6,6,10,8,7,11,8,6,8,7,11,7,9,12,10,9,10,8,8,7,7,9,7,11,14,10,12,11,13,12,14,11,15],["2014-05-06",null,null,"2014-05-23","2014-05-25",null,"2014-05-24",null,"2014-06-04",null,"2014-06-14","2014-06-15",null,"2014-06-10",null,"2014-06-23","2014-06-27",null,"2014-07-03","2014-07-03","2014-06-29",null,"2014-07-12","2014-07-15","2014-06-29",null,"2014-07-17",null,null,"2014-07-19",null,null,null,"2014-07-26","2014-07-18","2014-07-17","2014-07-21","2014-07-30",null,null,"2014-07-30",null,null,"2014-08-01","2014-08-02","2014-08-06","2014-07-24",null,"2014-08-03","2014-08-01"],["2014-05-08","2014-05-13","2014-05-16",null,"2014-05-27","2014-05-27","2014-05-27","2014-06-05","2014-06-14",null,"2014-06-20","2014-06-20","2014-06-20",null,"2014-06-22","2014-06-25","2014-07-03","2014-07-06","2014-07-09","2014-07-09","2014-07-13",null,"2014-07-16","2014-07-17","2014-07-19","2014-07-20",null,"2014-07-22","2014-07-22","2014-07-23","2014-07-23","2014-07-27","2014-07-28","2014-08-01","2014-08-02","2014-08-02","2014-08-02",null,"2014-08-02","2014-08-03","2014-08-04","2014-08-05","2014-08-05","2014-08-06","2014-08-07","2014-08-07","2014-08-08","2014-08-09","2014-08-09","2014-08-10"],["2014-05-10","2014-05-14","2014-05-18","2014-05-27","2014-05-28","2014-05-29","2014-05-28","2014-06-07","2014-06-15","2014-06-19","2014-06-20","2014-06-21","2014-06-21","2014-06-23","2014-06-23","2014-06-27","2014-07-05","2014-07-08","2014-07-09","2014-07-11","2014-07-13","2014-07-17","2014-07-17","2014-07-19","2014-07-21","2014-07-21","2014-07-20","2014-07-22","2014-07-24","2014-07-25","2014-07-25","2014-07-28","2014-07-30","2014-08-02","2014-08-03","2014-08-02","2014-08-02","2014-08-04","2014-08-02","2014-08-04","2014-08-04","2014-08-06","2014-08-05","2014-08-07","2014-08-09","2014-08-08","2014-08-10","2014-08-10","2014-08-10","2014-08-11"],[null,"2014-05-18","2014-05-30","2014-05-30","2014-06-27","2014-06-07","2014-06-07","2014-06-09",null,"2014-07-11","2014-07-01","2014-06-24","2014-06-24","2014-06-28","2014-07-01","2014-07-06","2014-07-12","2014-07-26",null,"2014-07-16","2014-07-19","2014-07-21",null,"2014-08-14","2014-08-03","2014-08-07",null,"2014-08-28","2014-08-24",null,"2014-07-27","2014-08-06","2014-07-20","2014-09-13","2014-08-24","2014-08-19",null,null,"2014-08-11",null,"2014-08-18","2014-08-13","2014-08-24","2014-08-13","2014-09-08","2014-08-24","2014-08-27","2014-08-14","2014-08-16","2014-08-21"],[null,"Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover","Death","Death","Death","Death",null,"Death","Recover","Recover",null,null,"Death","Recover","Recover","Recover","Death","Death","Recover","Recover",null,"Recover","Death","Death",null,null,null,null,null,"Death",null,"Death","Recover","Death","Recover","Recover","Recover","Recover","Recover","Death","Death","Recover"],["f","f","m","f","m","m","f","f","f","m","m","m","f","m","f","f","m","f","m","f","f","m","m","f","f","m",null,"f","f","m","f","m","m","f","m","m","m","f","f","m","f","m","m","m","m","f","f","f","f","m"],[3,7,21,4,4,30,13,2,4,22,20,16,5,16,0,13,14,13,19,3,2,23,13,7,14,35,null,10,9,32,31,27,12,12,21,24,33,9,8,40,28,3,18,17,14,17,1,20,29,1],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[3,7,21,4,4,30,13,2,4,22,20,16,5,16,0,13,14,13,19,3,2,23,13,7,14,35,null,10,9,32,31,27,12,12,21,24,33,9,8,40,28,3,18,17,14,17,1,20,29,1],["0-4","5-9","20-29","0-4","0-4","30-49","10-14","0-4","0-4","20-29","20-29","15-19","5-9","15-19","0-4","10-14","10-14","10-14","15-19","0-4","0-4","20-29","10-14","5-9","10-14","30-49",null,"10-14","5-9","30-49","30-49","20-29","10-14","10-14","20-29","20-29","30-49","5-9","5-9","30-49","20-29","0-4","15-19","15-19","10-14","15-19","0-4","20-29","20-29","0-4"],["0-4","5-9","20-24","0-4","0-4","30-34","10-14","0-4","0-4","20-24","20-24","15-19","5-9","15-19","0-4","10-14","10-14","10-14","15-19","0-4","0-4","20-24","10-14","5-9","10-14","35-39",null,"10-14","5-9","30-34","30-34","25-29","10-14","10-14","20-24","20-24","30-34","5-9","5-9","40-44","25-29","0-4","15-19","15-19","10-14","15-19","0-4","20-24","25-29","0-4"],["St. Mark's Maternity Hospital (SMMH)","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Central Hospital","Port Hospital","Central Hospital","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Port Hospital","Missing","Missing","Other","Missing","Central Hospital","Central Hospital","Missing","Missing","Other","St. Mark's Maternity Hospital (SMMH)","Other","Other","Port Hospital","Other","Missing","Military Hospital","Other","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Missing","Missing","Port Hospital","Port Hospital","Missing","Port Hospital","Other","Military Hospital","Missing","Port Hospital","Other","Other"],[-13.2354719577436,-13.2152339775486,-13.212910703914,-13.2197320896877,-13.2688968279886,-13.2604684939726,-13.2369393782451,-13.2572163655863,-13.2180326141688,-13.2243437095992,-13.2124311244169,-13.2619688324425,-13.2195578885261,-13.2628934511971,-13.2336087079551,-13.2339681355349,-13.2162953240809,-13.2531041397858,-13.2266742923612,-13.2123762615712,-13.2452992638476,-13.2192936985287,-13.2199077448676,-13.2343062806506,-13.2155668757305,-13.2163318124535,-13.2359603887432,-13.2097478342339,-13.2209544818868,-13.2221173306518,-13.2306657089937,-13.2587625731645,-13.2243932729634,-13.2137356012883,-13.2207093341173,-13.2564700881739,-13.2258087869163,-13.2223378683793,-13.2106014146595,-13.2486407324245,-13.2188046852032,-13.2461808628649,-13.2123634125052,-13.2111276946553,-13.2591405401705,-13.2191390852229,-13.2301859855135,-13.2481679868778,-13.2163350530737,-13.217405738006],[8.4627682729487,8.45171855856465,8.46481700596819,8.44852192548534,8.47845973648553,8.45421479878989,8.46916113869591,8.47292327643506,8.47155535608018,8.47145134147474,8.45344099552146,8.48475855218221,8.46210832824745,8.46479592922727,8.47804840685363,8.46957530395867,8.46395131808455,8.46110718866038,8.48408263734462,8.4594706833607,8.48334624336805,8.4859413033916,8.4693933891765,8.47121232619015,8.4627846208641,8.4630635336683,8.47704542384682,8.47714159984428,8.48436046542975,8.46420961833913,8.47808779372907,8.45574180260702,8.48325844901445,8.4732571907655,8.47571579396786,8.48329801272452,8.47317350834362,8.46136226718465,8.47793008081529,8.48480340615605,8.47782489076703,8.48313501406402,8.48309382244331,8.46975025432843,8.45279482787079,8.44933234263738,8.47770243597866,8.46556229437808,8.48604294056283,8.47529881925793],["20b688",null,null,"be7f8a","1511c5",null,"e02f66",null,"cbbe78",null,"e61cb9","057e7a",null,"4977bd",null,"a75c7f","ea3740",null,"b799eb","9d07e6","beb26e",null,"36e2e7","7baf73","af1c1f",null,"916d0a",null,null,"d15be5",null,null,null,"3b096b","7baf73","d0eead","805a4f","4af3d1",null,null,"7ee655",null,null,"0e3c82","3789ee","9cd6d0","ce4ec6",null,"b56849","db7b54"],["other",null,null,"other","other",null,"other",null,"funeral",null,"other","other",null,"funeral",null,"other","other",null,"other","funeral","funeral",null,"other","other","other",null,"other",null,null,"other",null,null,null,"other","other","other","funeral","other",null,null,"other",null,null,"funeral","other","other","other",null,"other","other"],[33,41,61,42,51,74,55,19,39,69,61,59,37,67,0,49,79,48,70,28,22,67,70,24,53,85,25,51,48,74,71,69,66,49,65,73,67,53,42,74,74,41,64,64,67,58,21,55,63,20],[55,104,171,60,89,173,115,52,67,135,133,149,78,141,22,113,153,142,137,50,31,160,168,84,144,174,42,115,120,201,203,182,140,134,132,166,176,112,100,173,124,62,126,113,164,98,40,130,163,53],[22,22,23,24,24,22,22,23,23,22,22,21,23,23,25,23,21,22,21,20,21,21,21,24,22,21,23,22,23,23,22,21,23,23,22,22,24,22,21,22,22,21,21,23,22,21,22,23,23,22],["no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no","no","no",null,null,"no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,null,"no","no","no","no",null,"no","no","no","no","no","no","no",null,"no","no"],["no","no","no",null,"no","no","yes","yes","no","no","no","yes","yes","no","no","no","no",null,null,"no","no",null,"yes","no","no","yes","no","no","no","no","no","no","no",null,null,"yes","yes","no","no",null,"yes","yes","no","no","no","yes","yes",null,"no","no"],["no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","no","yes",null,null,"yes","yes",null,"yes","no","yes","yes","yes","yes","yes","yes","yes","yes","no",null,null,"yes","yes","yes","yes",null,"yes","no","no","no","yes","yes","yes",null,"yes","yes"],["no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no","no","no",null,null,"no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,null,"no","no","no","no",null,"no","no","no","no","no","no","no",null,"no","no"],["no","no","no",null,"yes","no","yes","no","no","yes","yes","no","no","no","yes","yes","no",null,null,"yes","yes",null,"yes","yes","yes","no","yes","no","no","no","yes","no","yes",null,null,"yes","yes","no","yes",null,"no","no","no","no","no","yes","no",null,"no","yes"],[37.2,37,37,37.4,36.9,37.3,37.5,37.3,36.8,36.5,36.9,37,37.3,35.6,37.3,37,37,37.1,36.8,36.8,37.5,36.6,36.6,37.1,37.2,37.1,37.1,36.9,37.4,37.7,36.8,36.7,36.3,37.2,37.4,38,36,37.3,37.8,36.3,36.7,37.3,37.5,36,37,37.3,37.4,36.4,37.1,36.5],["19:08","14:47","11:19","17:22","10:37",null,"09:40","10:28","18:15","10:20","21:28","12:31","11:17",null,null,"11:48","15:03","14:26","10:49","14:32","08:48","17:27","23:27","19:03","16:40",null,"18:58","12:28","14:19",null,"16:54","10:11","06:53","09:48","05:56","07:21","14:48","16:29",null,"15:42",null,"15:07","15:45",null,null,"21:54","09:13","05:17","14:30","09:32"],[109.090909090909,37.9068047337278,20.8611196607503,116.666666666667,64.3858098724908,24.7251829329413,41.5879017013233,70.2662721893491,86.879037647583,37.8600823045267,34.4847080106281,26.5753794874105,60.8152531229454,33.7005180825914,0,38.374187485316,33.7477038745782,23.8048006347947,37.2955405189408,112,228.928199791883,26.171875,24.8015873015873,34.0136054421769,25.5594135802469,28.075042938301,141.72335600907,38.5633270321361,33.3333333333333,18.3163783074676,17.2292460384867,20.8308175341142,33.6734693877551,27.288928491869,37.3048668503214,26.4915082014806,21.6296487603306,42.2512755102041,42,24.7251829329413,48.1269510926119,106.659729448491,40.3124212648022,50.121387735923,24.9107674003569,60.3915035401916,131.25,32.5443786982248,23.7118446309609,71.1997152011392],[2,1,2,null,1,2,1,2,1,null,0,1,1,null,1,2,2,2,0,2,0,null,1,2,2,1,null,0,2,2,2,1,2,1,1,0,0,null,0,1,0,1,0,1,2,1,2,1,1,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="clean-data-1" class="section level3" number="16.2.3">
<h3>
<span class="header-section-number">16.2.3</span> Clean data<a class="anchor" aria-label="anchor" href="#clean-data-1"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb714"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## make sure that age variable is numeric </span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span>

<span class="co">## define variables of interest </span>
<span class="va">explanatory_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span><span class="op">)</span>

<span class="co">## make dichotomous variables in to 0/1 </span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    <span class="co">## for each of the variables listed</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>
      <span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">all_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">explanatory_vars</span>, <span class="st">"outcome"</span><span class="op">)</span><span class="op">)</span>, 
      <span class="co">## recode male, yes and death to 1; female, no and recover to 0</span>
      <span class="co">## otherwise set to missing</span>
           <span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
             <span class="va">.</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"m"</span>, <span class="st">"yes"</span>, <span class="st">"Death"</span><span class="op">)</span>   <span class="op">~</span> <span class="fl">1</span>,
             <span class="va">.</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"f"</span>, <span class="st">"no"</span>,  <span class="st">"Recover"</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>, 
             <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_real_</span>
           <span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>

<span class="co">## add in age_category to the explanatory vars </span>
<span class="va">explanatory_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">explanatory_vars</span>, <span class="st">"age_cat"</span><span class="op">)</span>

<span class="co">## drop rows with missing information for variables of interest </span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">drop_na</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"outcome"</span>, <span class="va">explanatory_vars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="univariate" class="section level2" number="16.3">
<h2>
<span class="header-section-number">16.3</span> Univariate<a class="anchor" aria-label="anchor" href="#univariate"><i class="fas fa-link"></i></a>
</h2>
<p>There are two options for doing univariate analysis.
You can use the <code>gtsummary</code> package or you can use the individual regression
functions available in <code>base</code> together with the <code>broom</code> package.</p>
<!-- ======================================================= -->
<div id="gtsummary-package-3" class="section level3" number="16.3.1">
<h3>
<span class="header-section-number">16.3.1</span> <code>gtsummary</code> package<a class="anchor" aria-label="anchor" href="#gtsummary-package-3"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb715"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">univ_tab</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="co">## select variables of interest</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">explanatory_vars</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## produce univariate table</span>
  <span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/tbl_uvregression.html">tbl_uvregression</a></span><span class="op">(</span>
    <span class="co">## define regression want to run (generalised linear model)</span>
    method <span class="op">=</span> <span class="va">glm</span>, 
    <span class="co">## define outcome variable</span>
    y <span class="op">=</span> <span class="va">outcome</span>, 
    <span class="co">## define what type of glm want to run (logistic)</span>
    method.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span>, 
    <span class="co">## exponentiate the outputs to produce odds ratios (rather than log odds)</span>
    exponentiate <span class="op">=</span> <span class="cn">TRUE</span>
    <span class="op">)</span></code></pre></div>
<pre><code>## Note: Using an external vector in selections is ambiguous.
## i Use `all_of(explanatory_vars)` instead of `explanatory_vars` to silence this message.
## i See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.
## This message is displayed once per session.</code></pre>
<div class="sourceCode" id="cb717"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## view univariate results table </span>
<span class="va">univ_tab</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#btxquynbbl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#btxquynbbl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#btxquynbbl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#btxquynbbl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#btxquynbbl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#btxquynbbl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#btxquynbbl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#btxquynbbl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#btxquynbbl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#btxquynbbl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#btxquynbbl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#btxquynbbl .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#btxquynbbl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#btxquynbbl .gt_from_md > :first-child {
  margin-top: 0;
}

#btxquynbbl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#btxquynbbl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#btxquynbbl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#btxquynbbl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#btxquynbbl .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#btxquynbbl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#btxquynbbl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#btxquynbbl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#btxquynbbl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#btxquynbbl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#btxquynbbl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#btxquynbbl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#btxquynbbl .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#btxquynbbl .gt_left {
  text-align: left;
}

#btxquynbbl .gt_center {
  text-align: center;
}

#btxquynbbl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#btxquynbbl .gt_font_normal {
  font-weight: normal;
}

#btxquynbbl .gt_font_bold {
  font-weight: bold;
}

#btxquynbbl .gt_font_italic {
  font-style: italic;
}

#btxquynbbl .gt_super {
  font-size: 65%;
}

#btxquynbbl .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="btxquynbbl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">gender</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.98</td>
      <td class="gt_row gt_center">0.86, 1.10</td>
      <td class="gt_row gt_center">0.7</td>
    </tr>
<tr>
<td class="gt_row gt_left">fever</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.87</td>
      <td class="gt_row gt_center">0.75, 1.02</td>
      <td class="gt_row gt_center">0.094</td>
    </tr>
<tr>
<td class="gt_row gt_left">chills</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">1.11</td>
      <td class="gt_row gt_center">0.96, 1.30</td>
      <td class="gt_row gt_center">0.2</td>
    </tr>
<tr>
<td class="gt_row gt_left">cough</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.9300000000000000</td>
      <td class="gt_row gt_center">0.79, 1.11</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left">aches</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.94</td>
      <td class="gt_row gt_center">0.77, 1.15</td>
      <td class="gt_row gt_center">0.5</td>
    </tr>
<tr>
<td class="gt_row gt_left">vomit</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">1.05</td>
      <td class="gt_row gt_center">0.9300000000000000, 1.19</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left">age_cat</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0-4</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">—</td>
      <td class="gt_row gt_center">—</td>
      <td class="gt_row gt_center"></td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">5-9</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.01</td>
      <td class="gt_row gt_center">0.82, 1.23</td>
      <td class="gt_row gt_center">&gt;0.9</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">10-14</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.09</td>
      <td class="gt_row gt_center">0.88, 1.35</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">15-19</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.00</td>
      <td class="gt_row gt_center">0.8100000000000001, 1.23</td>
      <td class="gt_row gt_center">&gt;0.9</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">20-29</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.43</td>
      <td class="gt_row gt_center">1.17, 1.76</td>
      <td class="gt_row gt_center">&lt;0.001</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">30-49</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.05</td>
      <td class="gt_row gt_center">0.84, 1.31</td>
      <td class="gt_row gt_center">0.7</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">50-69</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.14</td>
      <td class="gt_row gt_center">0.71, 1.87</td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">70+</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.84</td>
      <td class="gt_row gt_center">0.16, 4.59</td>
      <td class="gt_row gt_center">0.8</td>
    </tr>
</tbody>
<tfoot><tr class="gt_footnotes">
<td colspan="5">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks"><em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br></p>
      </td>
    </tr></tfoot>
</table></div></div>
<!-- ======================================================= -->
</div>
<div id="base" class="section level3" number="16.3.2">
<h3>
<span class="header-section-number">16.3.2</span> <code>base</code><a class="anchor" aria-label="anchor" href="#base"><i class="fas fa-link"></i></a>
</h3>
<p>Using the <code>glm</code> function from the <strong>stats</strong> package (part of base R), you can
produce odds ratios.</p>
<p>For a single exposure variable, pass the names to <code>glm</code> and then use <code>tidy</code> from
the <strong>broom</strong> package to get the exponentiated odds ratio estimates and confidence
intervals. Here we demonstrate how to combine model outputs with a table of
counts.</p>
<div class="sourceCode" id="cb718"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span>
  <span class="co">## define the variables of interest</span>
  <span class="va">outcome</span> <span class="op">~</span> <span class="va">age_cat</span>, 
  <span class="co">## define the type of regression (logistic)</span>
  family <span class="op">=</span> <span class="st">"binomial"</span>, 
  <span class="co">## define your dataset</span>
  data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## clean up the outputs of the regression (exponentiate and produce CIs)</span>
  <span class="fu">tidy</span><span class="op">(</span>
      exponentiate <span class="op">=</span> <span class="cn">TRUE</span>, 
      conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>


<span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="co">## get counts of variable of interest grouped by outcome</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## spread to wide format (as in cross-tabulation)</span>
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">outcome</span>, values_from <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## drop rows with missings</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## merge with the outputs of the regression </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">model</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## only keep columns interested in </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">term</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="va">estimate</span>, <span class="va">conf.low</span>, <span class="va">conf.high</span>, <span class="va">p.value</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 7
##   term           `0`   `1` estimate conf.low conf.high  p.value
##   &lt;chr&gt;        &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)    359   425    1.18     1.03       1.36 0.0186  
## 2 age_cat5-9     353   420    1.01     0.823      1.23 0.961   
## 3 age_cat10-14   270   349    1.09     0.883      1.35 0.417   
## 4 age_cat15-19   285   336    0.996    0.806      1.23 0.969   
## 5 age_cat20-29   284   482    1.43     1.17       1.76 0.000508
## 6 age_cat30-49   234   291    1.05     0.841      1.31 0.664   
## 7 age_cat50-69    31    42    1.14     0.707      1.87 0.586   
## 8 age_cat70+       3     3    0.845    0.156      4.59 0.837</code></pre>
<p>To run over several exposure variables to produce univariate odds ratios (i.e. 
not controlling for each other), you can pass a vector of variable names to the
<code>map</code> function in the <strong>purrr</strong> package. This will loop over each of the variables
running regressions for each one.</p>
<div class="sourceCode" id="cb720"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">models</span> <span class="op">&lt;-</span> <span class="va">explanatory_vars</span> <span class="op">%&gt;%</span> 
  <span class="co">## combine each name of the variables of interest with the name of outcome variable</span>
  <span class="fu">str_c</span><span class="op">(</span><span class="st">"outcome ~ "</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## for each string above (outcome ~ "variable of interest)</span>
  <span class="fu">map</span><span class="op">(</span>
    <span class="co">## run a general linear model </span>
    <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span>
      <span class="co">## define formula as each of the strings above</span>
      <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>, 
      <span class="co">## define type of glm (logistic)</span>
      family <span class="op">=</span> <span class="st">"binomial"</span>, 
      <span class="co">## define your dataset</span>
      data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## for each of the output regressions from above </span>
  <span class="fu">map</span><span class="op">(</span>
    <span class="co">## tidy the output</span>
    <span class="op">~</span><span class="fu">tidy</span><span class="op">(</span>
      <span class="co">## each of the regressions </span>
      <span class="va">.x</span>, 
      <span class="co">## exponentiate and produce CIs</span>
      exponentiate <span class="op">=</span> <span class="cn">TRUE</span>, 
      conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## collapse the list of regressions outputs in to one data frame</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span>



<span class="co">## for each explanatory variable</span>
<span class="va">univ_tab_base</span> <span class="op">&lt;-</span> <span class="fu">map</span><span class="op">(</span><span class="va">explanatory_vars</span>, 
      <span class="op">~</span><span class="op">{</span><span class="va">linelist</span> <span class="op">%&gt;%</span> 
          <span class="co">## group data set by outcome</span>
          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
          <span class="co">## produce counts for variable of interest</span>
          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span> 
          <span class="co">## spread to wide format (as in cross-tabulation)</span>
          <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">outcome</span>, values_from <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span> 
          <span class="co">## drop rows with missings</span>
          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">.x</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
          <span class="co">## change the variable of interest column to be called "variable"</span>
          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="st">"variable"</span> <span class="op">=</span> <span class="va">.x</span><span class="op">)</span> <span class="op">%&gt;%</span> 
          <span class="co">## change the variable of interest column to be a character </span>
          <span class="co">## otherwise non-dichotomous (categorical) variables come out as factor and cant be merged</span>
          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">variable</span><span class="op">)</span><span class="op">)</span>
                 <span class="op">}</span>
      <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## collapse the list of count outputs in to one data frame</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## merge with the outputs of the regression </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">models</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## only keep columns interested in </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">term</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="va">estimate</span>, <span class="va">conf.low</span>, <span class="va">conf.high</span>, <span class="va">p.value</span><span class="op">)</span></code></pre></div>
<pre><code>## Note: Using an external vector in selections is ambiguous.
## i Use `all_of(.x)` instead of `.x` to silence this message.
## i See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.
## This message is displayed once per session.</code></pre>
<!-- ======================================================= -->
</div>
</div>
<div id="stratified" class="section level2" number="16.4">
<h2>
<span class="header-section-number">16.4</span> Stratified<a class="anchor" aria-label="anchor" href="#stratified"><i class="fas fa-link"></i></a>
</h2>
<p>Stratified analysis is currently still being worked on for <code>gtsummary</code>,
this page will be updated in due course.</p>
<!-- ======================================================= -->
<div id="gtsummary-package-4" class="section level3" number="16.4.1">
<h3>
<span class="header-section-number">16.4.1</span> <code>gtsummary</code> package<a class="anchor" aria-label="anchor" href="#gtsummary-package-4"><i class="fas fa-link"></i></a>
</h3>
<p>TODO</p>
<!-- ======================================================= -->
</div>
<div id="base-1" class="section level3" number="16.4.2">
<h3>
<span class="header-section-number">16.4.2</span> <code>base</code><a class="anchor" aria-label="anchor" href="#base-1"><i class="fas fa-link"></i></a>
</h3>
<p>TODO</p>
<!-- ======================================================= -->
</div>
</div>
<div id="multivariable" class="section level2" number="16.5">
<h2>
<span class="header-section-number">16.5</span> Multivariable<a class="anchor" aria-label="anchor" href="#multivariable"><i class="fas fa-link"></i></a>
</h2>
<p>For multivariable analysis you can use a combination there is not much difference
between using <code>gtsummary</code> or <code>broom</code> to present the data.
The workflow is the same for both, as below, and only the last step of pulling a
table together is different.</p>
<div class="sourceCode" id="cb722"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## run a regression with all variables of interest </span>
<span class="va">mv_reg</span> <span class="op">&lt;-</span> <span class="va">explanatory_vars</span> <span class="op">%&gt;%</span> 
  <span class="co">## combine all names of the variables of interest separated by a plus</span>
  <span class="fu">str_c</span><span class="op">(</span>collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## combined the names of variables of interest with outcome in formula style</span>
  <span class="fu">str_c</span><span class="op">(</span><span class="st">"outcome ~ "</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="co">## define type of glm (logistic)</span>
      family <span class="op">=</span> <span class="st">"binomial"</span>, 
      <span class="co">## define your dataset</span>
      data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span> 

<span class="co">## choose a model using forward selection based on AIC</span>
<span class="co">## you can also do "backward" or "both" by adjusting the direction</span>
<span class="va">final_mv_reg</span> <span class="op">&lt;-</span> <span class="va">mv_reg</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/step.html">step</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="st">"forward"</span>, trace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
<div id="gtsummary-package-5" class="section level3" number="16.5.1">
<h3>
<span class="header-section-number">16.5.1</span> <code>gtsummary</code> package<a class="anchor" aria-label="anchor" href="#gtsummary-package-5"><i class="fas fa-link"></i></a>
</h3>
<p>The <code>gtsummary</code> package provides the <code>tbl_regression</code> function, which will
take the outputs from a regression (<code>glm</code> in this case) and produce an easy
summary table.
You can also combine several different output tables produced by <code>gtsummary</code> with
the <code>tbl_mege</code> function.</p>
<div class="sourceCode" id="cb723"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## show results table of final regression </span>
<span class="va">mv_tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/tbl_regression.html">tbl_regression</a></span><span class="op">(</span><span class="va">final_mv_reg</span>, exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co">## combine with univariate results </span>
<span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/tbl_merge.html">tbl_merge</a></span><span class="op">(</span>
  tbls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">univ_tab</span>, <span class="va">mv_tab</span><span class="op">)</span>, 
  tab_spanner <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"**Univariate**"</span>, <span class="st">"**Multivariable**"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ovxqgrzimr .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ovxqgrzimr .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ovxqgrzimr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ovxqgrzimr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ovxqgrzimr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ovxqgrzimr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ovxqgrzimr .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ovxqgrzimr .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ovxqgrzimr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ovxqgrzimr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ovxqgrzimr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ovxqgrzimr .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ovxqgrzimr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ovxqgrzimr .gt_from_md > :first-child {
  margin-top: 0;
}

#ovxqgrzimr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ovxqgrzimr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ovxqgrzimr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ovxqgrzimr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ovxqgrzimr .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ovxqgrzimr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ovxqgrzimr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ovxqgrzimr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ovxqgrzimr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ovxqgrzimr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ovxqgrzimr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ovxqgrzimr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ovxqgrzimr .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ovxqgrzimr .gt_left {
  text-align: left;
}

#ovxqgrzimr .gt_center {
  text-align: center;
}

#ovxqgrzimr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ovxqgrzimr .gt_font_normal {
  font-weight: normal;
}

#ovxqgrzimr .gt_font_bold {
  font-weight: bold;
}

#ovxqgrzimr .gt_font_italic {
  font-style: italic;
}

#ovxqgrzimr .gt_super {
  font-size: 65%;
}

#ovxqgrzimr .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ovxqgrzimr" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings">
<tr>
<th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4">
        <span class="gt_column_spanner"><strong>Univariate</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3">
        <span class="gt_column_spanner"><strong>Multivariable</strong></span>
      </th>
    </tr>
<tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>OR</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>95% CI</strong><sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">gender</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.98</td>
      <td class="gt_row gt_center">0.86, 1.10</td>
      <td class="gt_row gt_center">0.7</td>
      <td class="gt_row gt_center">0.95</td>
      <td class="gt_row gt_center">0.83, 1.08</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left">fever</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.87</td>
      <td class="gt_row gt_center">0.75, 1.02</td>
      <td class="gt_row gt_center">0.094</td>
      <td class="gt_row gt_center">0.88</td>
      <td class="gt_row gt_center">0.75, 1.03</td>
      <td class="gt_row gt_center">0.10</td>
    </tr>
<tr>
<td class="gt_row gt_left">chills</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">1.11</td>
      <td class="gt_row gt_center">0.96, 1.30</td>
      <td class="gt_row gt_center">0.2</td>
      <td class="gt_row gt_center">1.11</td>
      <td class="gt_row gt_center">0.96, 1.30</td>
      <td class="gt_row gt_center">0.2</td>
    </tr>
<tr>
<td class="gt_row gt_left">cough</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.9300000000000000</td>
      <td class="gt_row gt_center">0.79, 1.11</td>
      <td class="gt_row gt_center">0.4</td>
      <td class="gt_row gt_center">0.9300000000000000</td>
      <td class="gt_row gt_center">0.79, 1.11</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left">aches</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">0.94</td>
      <td class="gt_row gt_center">0.77, 1.15</td>
      <td class="gt_row gt_center">0.5</td>
      <td class="gt_row gt_center">0.9300000000000000</td>
      <td class="gt_row gt_center">0.76, 1.14</td>
      <td class="gt_row gt_center">0.5</td>
    </tr>
<tr>
<td class="gt_row gt_left">vomit</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center">1.05</td>
      <td class="gt_row gt_center">0.9300000000000000, 1.19</td>
      <td class="gt_row gt_center">0.4</td>
      <td class="gt_row gt_center">1.05</td>
      <td class="gt_row gt_center">0.9300000000000000, 1.19</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left">age_cat</td>
      <td class="gt_row gt_center">4,167</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0-4</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">—</td>
      <td class="gt_row gt_center">—</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">—</td>
      <td class="gt_row gt_center">—</td>
      <td class="gt_row gt_center"></td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">5-9</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.01</td>
      <td class="gt_row gt_center">0.82, 1.23</td>
      <td class="gt_row gt_center">&gt;0.9</td>
      <td class="gt_row gt_center">1.00</td>
      <td class="gt_row gt_center">0.82, 1.22</td>
      <td class="gt_row gt_center">&gt;0.9</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">10-14</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.09</td>
      <td class="gt_row gt_center">0.88, 1.35</td>
      <td class="gt_row gt_center">0.4</td>
      <td class="gt_row gt_center">1.09</td>
      <td class="gt_row gt_center">0.88, 1.35</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">15-19</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.00</td>
      <td class="gt_row gt_center">0.8100000000000001, 1.23</td>
      <td class="gt_row gt_center">&gt;0.9</td>
      <td class="gt_row gt_center">1.01</td>
      <td class="gt_row gt_center">0.8100000000000001, 1.24</td>
      <td class="gt_row gt_center">&gt;0.9</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">20-29</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.43</td>
      <td class="gt_row gt_center">1.17, 1.76</td>
      <td class="gt_row gt_center">&lt;0.001</td>
      <td class="gt_row gt_center">1.45</td>
      <td class="gt_row gt_center">1.18, 1.78</td>
      <td class="gt_row gt_center">&lt;0.001</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">30-49</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.05</td>
      <td class="gt_row gt_center">0.84, 1.31</td>
      <td class="gt_row gt_center">0.7</td>
      <td class="gt_row gt_center">1.07</td>
      <td class="gt_row gt_center">0.85, 1.34</td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">50-69</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">1.14</td>
      <td class="gt_row gt_center">0.71, 1.87</td>
      <td class="gt_row gt_center">0.6</td>
      <td class="gt_row gt_center">1.17</td>
      <td class="gt_row gt_center">0.72, 1.92</td>
      <td class="gt_row gt_center">0.5</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">70+</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.84</td>
      <td class="gt_row gt_center">0.16, 4.59</td>
      <td class="gt_row gt_center">0.8</td>
      <td class="gt_row gt_center">0.88</td>
      <td class="gt_row gt_center">0.16, 4.77</td>
      <td class="gt_row gt_center">0.9</td>
    </tr>
</tbody>
<tfoot><tr class="gt_footnotes">
<td colspan="8">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks"><em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br></p>
      </td>
    </tr></tfoot>
</table></div></div>
<!-- ======================================================= -->
</div>
<div id="base-2" class="section level3" number="16.5.2">
<h3>
<span class="header-section-number">16.5.2</span> <code>base</code><a class="anchor" aria-label="anchor" href="#base-2"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb724"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mv_tab_base</span> <span class="op">&lt;-</span> <span class="va">final_mv_reg</span> <span class="op">%&gt;%</span> 
  <span class="co">## get a tidy dataframe of estimates </span>
  <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span>exponentiate <span class="op">=</span> <span class="cn">TRUE</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co">## combine univariate and multivariable tables </span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">univ_tab_base</span>, <span class="va">mv_tab_base</span>, by <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## choose columns and rename them</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>
    <span class="st">"characteristic"</span> <span class="op">=</span> <span class="va">term</span>, 
    <span class="st">"recovered"</span>      <span class="op">=</span> <span class="st">"0"</span>, 
    <span class="st">"dead"</span>           <span class="op">=</span> <span class="st">"1"</span>, 
    <span class="st">"univ_or"</span>        <span class="op">=</span> <span class="va">estimate.x</span>, 
    <span class="st">"univ_ci_low"</span>    <span class="op">=</span> <span class="va">conf.low.x</span>, 
    <span class="st">"univ_ci_high"</span>   <span class="op">=</span> <span class="va">conf.high.x</span>,
    <span class="st">"univ_pval"</span>      <span class="op">=</span> <span class="va">p.value.x</span>, 
    <span class="st">"mv_or"</span>          <span class="op">=</span> <span class="va">estimate.y</span>, 
    <span class="st">"mvv_ci_low"</span>     <span class="op">=</span> <span class="va">conf.low.y</span>, 
    <span class="st">"mv_ci_high"</span>     <span class="op">=</span> <span class="va">conf.high.y</span>,
    <span class="st">"mv_pval"</span>        <span class="op">=</span> <span class="va">p.value.y</span> 
  <span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 20 x 11
##    characteristic recovered  dead univ_or univ_ci_low univ_ci_high univ_pval mv_or mvv_ci_low mv_ci_high  mv_pval
##    &lt;chr&gt;              &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
##  1 (Intercept)          905  1183   1.31        1.20          1.43  1.31e- 9 1.37       1.06        1.78 0.0166  
##  2 gender               914  1165   0.975       0.863         1.10  6.86e- 1 0.946      0.832       1.08 0.401   
##  3 (Intercept)          323   465   1.44        1.25          1.66  4.89e- 7 1.37       1.06        1.78 0.0166  
##  4 fever               1496  1883   0.874       0.747         1.02  9.43e- 2 0.876      0.747       1.03 0.0999  
##  5 (Intercept)         1466  1852   1.26        1.18          1.35  2.29e-11 1.37       1.06        1.78 0.0166  
##  6 chills               353   496   1.11        0.955         1.30  1.72e- 1 1.11       0.957       1.30 0.165   
##  7 (Intercept)          263   360   1.37        1.17          1.61  1.09e- 4 1.37       1.06        1.78 0.0166  
##  8 cough               1556  1988   0.933       0.785         1.11  4.33e- 1 0.935      0.786       1.11 0.444   
##  9 (Intercept)         1625  2111   1.30        1.22          1.39  2.21e-15 1.37       1.06        1.78 0.0166  
## 10 aches                194   237   0.940       0.770         1.15  5.48e- 1 0.935      0.765       1.14 0.511   
## 11 (Intercept)          915  1153   1.26        1.16          1.37  1.77e- 7 1.37       1.06        1.78 0.0166  
## 12 vomit                904  1195   1.05        0.928         1.19  4.44e- 1 1.05       0.930       1.19 0.423   
## 13 (Intercept)          359   425   1.18        1.03          1.36  1.86e- 2 1.37       1.06        1.78 0.0166  
## 14 age_cat5-9           353   420   1.01        0.823         1.23  9.61e- 1 1.00       0.821       1.22 0.979   
## 15 age_cat10-14         270   349   1.09        0.883         1.35  4.17e- 1 1.09       0.883       1.35 0.415   
## 16 age_cat15-19         285   336   0.996       0.806         1.23  9.69e- 1 1.01       0.814       1.24 0.956   
## 17 age_cat20-29         284   482   1.43        1.17          1.76  5.08e- 4 1.45       1.18        1.78 0.000378
## 18 age_cat30-49         234   291   1.05        0.841         1.31  6.64e- 1 1.07       0.849       1.34 0.579   
## 19 age_cat50-69          31    42   1.14        0.707         1.87  5.86e- 1 1.17       0.716       1.92 0.536   
## 20 age_cat70+             3     3   0.845       0.156         4.59  8.37e- 1 0.876      0.161       4.77 0.872</code></pre>
<!-- ======================================================= -->
</div>
</div>
<div id="forest-plot" class="section level2" number="16.6">
<h2>
<span class="header-section-number">16.6</span> Forest plot<a class="anchor" aria-label="anchor" href="#forest-plot"><i class="fas fa-link"></i></a>
</h2>
<p>This section shows how to produce a plot with the outputs of your regression.
There are two options, you can build a plot yourself using <code>ggplot2</code> or use a
package called</p>
<!-- ======================================================= -->
<div id="ggplot2-package" class="section level3" number="16.6.1">
<h3>
<span class="header-section-number">16.6.1</span> <code>ggplot2</code> package<a class="anchor" aria-label="anchor" href="#ggplot2-package"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb726"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## remove the intercept term from your multivariable results</span>
<span class="va">mv_tab_base</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op">!=</span> <span class="st">"(Intercept)"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co">## plot with variable on the y axis and estimate (OR) on the x axis</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">estimate</span>, y <span class="op">=</span> <span class="va">term</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co">## show the estimate as a point</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co">## add in an error bar for the confidence intervals</span>
  <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>xmin <span class="op">=</span> <span class="va">conf.low</span>, xmax <span class="op">=</span> <span class="va">conf.high</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co">## show where OR = 1 is for reference as a dashed line</span>
  <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/ggplot_forest-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
<div id="easystats-packages" class="section level3" number="16.6.2">
<h3>
<span class="header-section-number">16.6.2</span> <code>easystats</code> packages<a class="anchor" aria-label="anchor" href="#easystats-packages"><i class="fas fa-link"></i></a>
</h3>
<p>The alternative if you do not want to decide all of the different things required
for a <code>ggplot</code>, is to use a combination of <code>easystats</code> packages.
In this case the <code>paramaters</code> package function <code>model_parameters</code> does the equivalent
of <code>broom</code> package function <code>tidy</code>. The <code>see</code> package then accepts those outputs
and creates a default forest plot as a <code>ggplot</code> object.</p>
<div class="sourceCode" id="cb727"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## remove the intercept term from your multivariable results</span>
<span class="va">final_mv_reg</span> <span class="op">%&gt;%</span> 
  <span class="fu">model_parameters</span><span class="op">(</span>exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/easystats_forest-1.png" width="672"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="resources-9" class="section level2" number="16.7">
<h2>
<span class="header-section-number">16.7</span> Resources<a class="anchor" aria-label="anchor" href="#resources-9"><i class="fas fa-link"></i></a>
</h2>
<p>Much of the information in this page is adapted from these resources and vignettes online:</p>
<p><a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">gtsummary</a></p>
<p><a href="http://www.sthda.com/english/articles/36-classification-methods-essentials/150-stepwise-logistic-regression-essentials-in-r/">sthda stepwise regression</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="descriptive-analysis.html"><span class="header-section-number">15</span> Descriptive analysis</a></div>
<div class="next"><a href="standardization.html"><span class="header-section-number">17</span> Standardization</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#simple-statistical-tests"><span class="header-section-number">16</span> Simple statistical tests</a></li>
<li><a class="nav-link" href="#overview-9"><span class="header-section-number">16.1</span> Overview</a></li>
<li>
<a class="nav-link" href="#preparation-7"><span class="header-section-number">16.2</span> Preparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#packages-3"><span class="header-section-number">16.2.1</span> Packages</a></li>
<li><a class="nav-link" href="#load-data-1"><span class="header-section-number">16.2.2</span> Load data</a></li>
<li><a class="nav-link" href="#clean-data-1"><span class="header-section-number">16.2.3</span> Clean data</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#univariate"><span class="header-section-number">16.3</span> Univariate</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#gtsummary-package-3"><span class="header-section-number">16.3.1</span> gtsummary package</a></li>
<li><a class="nav-link" href="#base"><span class="header-section-number">16.3.2</span> base</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#stratified"><span class="header-section-number">16.4</span> Stratified</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#gtsummary-package-4"><span class="header-section-number">16.4.1</span> gtsummary package</a></li>
<li><a class="nav-link" href="#base-1"><span class="header-section-number">16.4.2</span> base</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#multivariable"><span class="header-section-number">16.5</span> Multivariable</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#gtsummary-package-5"><span class="header-section-number">16.5.1</span> gtsummary package</a></li>
<li><a class="nav-link" href="#base-2"><span class="header-section-number">16.5.2</span> base</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#forest-plot"><span class="header-section-number">16.6</span> Forest plot</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ggplot2-package"><span class="header-section-number">16.6.1</span> ggplot2 package</a></li>
<li><a class="nav-link" href="#easystats-packages"><span class="header-section-number">16.6.2</span> easystats packages</a></li>
</ul>
</li>
<li><a class="nav-link" href="#resources-9"><span class="header-section-number">16.7</span> Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Handbook for Epidemiologists</strong>" was written by the handbook team. It was last built on 2021-02-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
