---
title:  |  
  ![](../images/R Handbook Logo.png)
author: ""
date: "Produced `r format(Sys.time(), '%A %d %B %Y')`"
output:
  html_document:
    code_folding: show
    highlight: zenburn
    number_sections: no
    theme: sandstone
    toc: yes
    toc_collapse: no
    toc_depth: 3
    toc_float: yes
params:
    run_page_ind: TRUE
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_dir = "_outputs_knitted") })
---

```{r, child= '_page_setup.Rmd', eval = params$run_page_ind, include = F}
```


<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
# Boxplots {#boxplot .tabset .tabset-fade}  

The Page title should be succinct. Consider adding a tag with no spaces into the curly brackets, such as below. This can be used for internal links within the handbook. 
`{#title_tag .tabset .tabset-fade}`

<!-- ======================================================= -->
## Overview {.tabset .tabset-fade }
<h2> Overview </h2>

Boxplots can be created with:  

* the `boxplot()` function from the **graphics** package (installed automatically with **base R**), or  
* the `ggplot()` function from the **ggplot2** package  

```{r out.width=c('50%', '50%'), fig.show='hold', echo=F}
linelist <- linelist %>% 
  mutate(age = as.numeric(age))

# with the boxplot() function
graphics::boxplot(age ~ outcome*gender,
                  data = linelist,
                  col = c("gold", "darkgreen"),
                  main = "Made using boxplot()")


# with ggplot2 
ggplot(data = linelist,
       mapping = aes(y = age, x = outcome, fill = outcome))+
  geom_boxplot()+
  ggtitle("Made using ggplot()")+
  facet_wrap(~gender)
```



<!-- ======================================================= -->
## Preparation {.tabset .tabset-fade }
<h2> Preparation </h2>

Keep the title of this section as "Preparation".  
Data preparation steps such as:  

* Loading dataset  
* Adding or changing variables  
* melting, pivoting, grouping, etc.   

```{r}
linelist <- linelist %>% 
  mutate(age = as.numeric(age))
```


<!-- ======================================================= -->
## `boxplot()` {.tabset .tabset-fade }
<h2> `boxplot()` </h2>

Some options with `boxplot()` shown below are:  

* boxplots by group (color specification optional)  
* violin plots  
* boxplot width proportional to sample size  
* Horizontal  


```{r, out.width=c('50%', '50%'), fig.show='hold'}
# boxplot of one numeric variable
boxplot(linelist$age,                 # numeric variable
        main="boxplot",               # main title
        xlab="Suppliment and Dose")   # x-axis label


# by group (formula style)
boxplot(age ~ gender, data=linelist, notch=TRUE, main="boxplot", xlab="Suppliment and Dose")
```

You can have multiple levels of group (e.g. age by outcome AND gender)  
Notched "violin plots" are possible. 
The notch represents the median and X around it (TODO)

```{r, out.width=c('33%', '33%', '33%'), fig.show='hold'}
# By subgroup (age by outcome AND gender)
boxplot(age ~ outcome * gender,
        data=linelist,
        col=c("gold","darkgreen"),            # colors, in a vector
        main="Boxplot by Outcome and Gender", # main title
        xlab="Suppliment and Dose")           # x-axis label

# Notched (violin plot), and varying width
boxplot(age ~ outcome * gender,
        data=linelist,
        notch=TRUE,      # notch at median
        varwidth = TRUE, # width varying by sample size
        col=(c("gold","darkgreen")),
        main="Notched boxplot, width varying by sample size",
        xlab="Suppliment and Dose")

# Horizontal
boxplot(age~outcome,
        data=linelist,
        horizontal=TRUE,  # flip to horizontal
        col=(c("gold","darkgreen")),
        main="Horizontal boxplot",
        xlab="Suppliment and Dose")
```

<!-- ======================================================= -->
## `ggplot()` {.tabset .tabset-fade }
<h2> `ggplot()` </h2>



Some options with `ggplot()` shown below are:  

* boxplots by group (color specification optional)  
* violin plots  
* boxplot width proportional to sample size  
* Horizontal  


```{r, out.width=c('33%', '33%', '33%'), fig.show='hold'}
# Simple boxplot of one numeric variable
ggplot(data = linelist, aes(y = age))+  # only y variable given (no x variable)
  geom_boxplot()+
  ggtitle("Simple ggplot() boxplot")

# By group
ggplot(data = linelist, aes(y = age,         # numeric variable
                            x = outcome,      # group variable
                            fill = outcome))+ # fill variable (color of boxes)
  geom_boxplot()+                            # create the boxplot
  ggtitle("ggplot() boxplot by gender")      # main title

# Removing missing values, and add color
ggplot(data = linelist %>% filter(!is.na(outcome)), # dataset piped through a filter to retain rows where gender is not missing
       aes(y = age, x = outcome, fill= outcome))+    # boxes filled according to gender value
  geom_boxplot()+
  ggtitle("ggplot() boxplot by gender (missing excluded)")
```

To examine by subgroups, use *facet_wrap()* (for more see section on [ggplot tips](#ggplottips)).  

```{r}
# By subgroup
ggplot(data = linelist %>% filter(!is.na(gender)), # dataset piped through a filter to retain rows where gender is not missing
       aes(y = age, x = outcome, fill=outcome))+
  geom_boxplot()+
  ggtitle("A ggplot() boxplot")+
  facet_wrap(~gender)
```

"Violin plots" can be made simply or very complex: 

```{r out.width=c('33%', '33%', '33%'), fig.show='hold'}
# Violin plots
ggplot(linelist, aes(x=age, y=outcome, fill = outcome)) + 
  geom_violin(trim=FALSE)


# Vertical violin plot
ggplot(linelist, aes(x=age, y=outcome, fill = outcome)) + 
  geom_violin(trim=FALSE)+
  coord_flip()


# Add jittered points
ggplot(linelist, aes(x=age, y=outcome, fill = outcome)) + 
  geom_violin(trim=FALSE)+
  coord_flip()+ 
  geom_jitter(shape=16,                      # points
              position=position_jitter(0.2)) # jitter permissible to avoid point overlap
```


<!-- ======================================================= -->
## Resources {.tabset .tabset-fade }
<h2> Resources </h2>

This tab should stay with the name "Resources".
Links to other online tutorials or resources.





```{r, child= '_page_closeout.Rmd', eval = params$run_page_ind == F, include = F}
```

