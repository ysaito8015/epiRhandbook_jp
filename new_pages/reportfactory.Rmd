
# Routine reports {  }  

THIS PAGE IS UNDER CONSTRUCTION  

This page will cover the **reportfactory** package and other tips for routinizing your data flows and reports. **reportfactory** is a package developed by RECON (R Epidemics Consortium). It "facilitates workflows for handling multiple .Rmd reports, compiling one or several reports in one go, and storing outputs in well-organised, time-stamped folders."  



## Preparation

To begin, we install and/or load the **reportfactory** package from CRAN.  

```{r, eval=FALSE}
pacman::p_load(reportfactory)
```

## New factory  

Adding a new report factory will add a self-contained folder to the file path that you specify. Therefore, you can add a factory within an existing R project, or you can add it to a folder that is *not* an R project. Below we will create a factory within the empty folder "factory_demo".  

After loading **reportfactory**, you can run the function `new_factory()` and specify the file path for where to build the factory. If you are in an R project, the factory will be built in the root folder by default.  

```{r, eval=F}
# This will create the factory folder in the current directory
new_factory()
```

```{r, eval=F}
# Here we specify that the factory should be made at this file path
new_factory(path = "C:/R handbook/factory demo")
```

Below see that the folder "new_factory" has been created

```{r, warning=F, message=F, echo=F}
knitr::include_graphics(here::here("images", "factory_new1.png"))
```
There are several defaults that you can change in the `new_factory()` command:  

* `factory = ` - you can provide a name for the factory folder. The default is as shown above: "new_factory".  
* `path = ` - as shown above, you can designate a file path for the new factory. The default is the current directory.  
* `report_sources = ` You can provide an alternate name for the folder which holds the R Markdown scripts that create the reports. The default is "report_sources".  
* `outputs = ` You can provide an alternate name for the folder which holds the output reports. The default is "outputs".  


Looking inside the "new_factory" folder we can see that sub-folders were created automatically:  

* The *report_sources* folder should hold your R Markdown scripts, which generate your reports  
* The *outputs* folder will the report outputs (e.g. HTML, Word, PDF, etc.) - it will contain automatically-generated sub-folder organized by report and date-time stamp  
* The *scripts* folder can be used to store other R scripts that can be sourced/run by the R Markdown scripts (optional)  
* The *data* folder can be used to hold your data (optional)  
* A *.here* file was created, so now can reference any files in the sub-folders by their relation to this factory root folder (see [R projects] for more details about the **here** package)  
* A *gitignore* file was created in case you decide to link this to a Github repository (see [Collaboration with Github])  
* An empty README markdown file was created, to assist if using a Github repository  

```{r, warning=F, message=F, echo=F}
knitr::include_graphics(here::here("images", "factory_new2.png"))
```
 
Within R, you can run a command to see the structure of the report factory. Because the factory is very simple at the moment, this is useful to explore the remaining contents of the folders:  

```{r, eval=F}
reportfactory::factory_overview()
```

The following "tree" of the factory's folders and files is printed to the R console. You can see that there sub-folders for "raw" and "clean" data, some example CSV data. There is also an "example_report.Rmd" in the "report_sources" folder.    

```{r, warning=F, message=F, echo=F}
knitr::include_graphics(here::here("images", "factory_overview.png"))
```

## Create a report  

Let's begin by creating a report
Naming 


Create RMD

## Compile a report  

compile_reports()


### By name {-} 

### By number {-}

### All reports {-}  

### Parameterization {-}
 
## Review  

list_outputs()

## Extras  

There is an accompanying package in development called **rfextras** that offers helper functions to assist you in building reports:  

* 

## Alternatives  

Here are some alternative ways of preparing routine reports without **reportfactory**.  


<!-- ======================================================= -->
## Resources {  }

See the **reportfactory** package's [Github page](https://github.com/reconverse/reportfactory)

See the **rfextras** package's [Github page](https://github.com/reconhub/rfextras)  

