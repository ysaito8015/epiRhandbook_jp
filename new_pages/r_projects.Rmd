
# R projects {}  


An R project enables your work to be bundled in a self-contained, self-sufficient folder associated with a working directory. The project can include all the relevant data files, figures/outputs, scripts, and history, and can be shared. 


## Optimal use  

An common, efficient, and trouble-free way to use R is to combine these 3 elements. Each is described in the sections below.  

1) **An R project**  
     - Self-contained working environment with folders for data, scripts, outputs, etc.  
2) The **here** package for relative filepaths  
     - Filepaths are written in relation to the root/base folder of the R project
     - No need to troubleshoot working directory  
     - Filepaths become more simple, less error-prone, and portable across computers  
3) The **rio** for importing/exporting  
     - `import()` and `export()` handle almost any kind of file by reading the existing or desired file extension (e.g. .csv, .xlsx, .png)  
     - See the page on [Import and export] of data for more informaton  
     





<!-- ======================================================= -->
## Creating an R project {}

To create an R project, select "New Project" from the File menu.

* If you want to create a new folder for the project, select "New directory" and indicate where you want it to be created.  
* If you want to create the project within an existing folder, click "Existing directory" and indicate the folder.  
* If you want to clone a Github repository, select the third option "Version Control" and then "Git". See the page on R and Github for further details.  


```{r out.width = "75%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "create_project.png"))
```


The R project you create will come in the form of a folder containing a *.Rproj* file. This file is a shortcut and likely the primary way you will open your project. You can also open a project by selecting "Open Project" from the File menu. Alternatively on the far upper right side of RStudio you will see an R project icon and a drop-down menu of available R projects. 

To exit from an R project, either open a new project, or close the project (File - Close Project).  




### Settings {-}  

It is generally advised that you start RStudio each time with a "clean slate" - that is, with nothing preserved from a previous session or workspace. This will mean that your objects and results will not persist session-to-session (you must re-create them by running your scripts). However, this will force you to write better scripts and will avoid significant pain in the long run. To do this, do the following:  

* Select "Project Options" from the Tools menu.  
* In the "General" tab, set RStudio to **not** restore .RData into workspace at startup, and to **not** save workspace to .RData on exit.  



### Organization {-}  

It is common to have subfolders in your project. Consider having folders such as "data", "scripts", "figures", "presentations"... also consider a version control system. It could be something as simple as having dates on the names of scripts (e.g. "transmission_analysis_2020-10-03.R") and having a header at the top of each script with a description, tags, change log, and author list. 

One tip is that you can search across an entire project or folder using the "Find in Files" tool (Edit menu). It can search and even replace strings across multiple files.  


### Switch projects {-}

To switch between projects, click the R project icon and drop-down menu at the very top-right of RStudio. You will see options to Close Project, Open Project, and a list of recent projects.  

```{r out.width = "100%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "Rproject_dropdown.png"))
```




## Examples  

**here** implements *relative pathways* for any import/export you do (datasets, plots, etc). No more hassle with long filepaths or working directies. Read more about the **here** package in the [Importing and exporting] page.  

To use **here** within an R project:  

1. Begin your R project  
2. Install and/or load the package **here**  
3. Run `here()` to see where the root folder is (should be the root of the R project)  
4. All export/import commands can now use `here()` to create the filepath  
5. Remember to load **here** with `p_load()` or `library()`  

Here are some examples of import/export/saving using `here()`:  

Importing `linelist.xlsx` from the "data" folder in the R project  

```{r eval=F}
linelist <- import(here("data", "linelist.xlsx"))
```

Exporting the R object `linelist` as "my_linelist.rds" in "clean" folder within the "data" folder in the R project.   

```{r, eval=F}
export(linelist, here("data","clean", "my_linelist.rds")
```

And for saving the most recently printed plot as "epicurve_2021-02-15.png" within the "epicurves" folder in "outputs" folder in the R project.  

```{r, eval=F}
ggsave(here::here("outputs", "epicurves", "epicurve_2021-02-15.png"))
```




<!-- ======================================================= -->
## Resources {}

RStudio page on [using R projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)




