[{"path":"index.html","id":"welcome","chapter":"Welcome","heading":"Welcome","text":"","code":""},{"path":"index.html","id":"about-this-handbook","chapter":"Welcome","heading":"About this handbook","text":"free open-source R reference guide catered applied epidemiologists.book strives :Serve quick reference guide - textbookAddress common epidemiological problems via task-centered examplesBe accessible settings limited technical support low internet-connectivity (downloadable version)Contain clear simple language, step--step instructions many commentsBe living document, growing adapting new best practices“Epis” using R must often search online read dozens forum pages complete common data manipulation visualization tasks. online tutorials epidemiology-oriented. Furthermore, epidemiologists often work low internet-connectivity environments limited technical support. handbook aims fill gaps.","code":""},{"path":"index.html","id":"how-to-read-this-handbook","chapter":"Welcome","heading":"How to read this handbook","text":"Review pages tabs Table ContentsReview pages tabs Table ContentsSearch via search box Table ContentsSearch via search box Table ContentsClick “clipboard” icon upper-right code chunk copy itClick “clipboard” icon upper-right code chunk copy itClick download offline versionClick download offline versionIf use appreciate resource, let us know !use appreciate resource, let us know !","code":""},{"path":"index.html","id":"contribute","chapter":"Welcome","heading":"Contribute","text":"suggestions want contribute, please post issue github repository.","code":""},{"path":"index.html","id":"acknowledgements","chapter":"Welcome","heading":"Acknowledgements","text":"","code":""},{"path":"index.html","id":"contributors","chapter":"Welcome","heading":"Contributors","text":"handbook collaborative team production; conceived, written, edited epidemiologists public health practitioners around world. team members:Editor--Chief:Editorial core team: …(list)…Authors: …(list)…Reviewers: …(list)…Advisers …(list)…","code":""},{"path":"index.html","id":"funding-and-programmatic-support","chapter":"Welcome","heading":"Funding and programmatic support","text":"Training Programs Epidemiology Public Health Interventions Network (TEPHINET)EPIET Alumni Network (EAN)","code":""},{"path":"index.html","id":"data-sources","chapter":"Welcome","heading":"Data sources","text":"outbreaks R package","code":""},{"path":"index.html","id":"inspiration","chapter":"Welcome","heading":"Inspiration","text":"“R4Epis” project (collaboration MSF RECON)R Epidemics Consortium (RECON)R Data Science book (R4DS)bookdown: Authoring Books Technical Documents R Markdown\r\nspecific tutorials vignettes credited relevant pages","code":""},{"path":"index.html","id":"image-credits","chapter":"Welcome","heading":"Image credits","text":"Logo: CDC Public Health Image library, R Graph Gallery2013 Yemen looking mosquito breeding sitesEbola virusSurvey RajasthanNetwork","code":""},{"path":"index.html","id":"license-and-terms-of-use","chapter":"Welcome","heading":"License and Terms of Use","text":"Creative Commons license TBD…","code":""},{"path":"grouping-data.html","id":"grouping-data","chapter":"1 Grouping data","heading":"1 Grouping data","text":"page reviews group aggregate data descriptive analysis. makes use tidyverse packages common easy--use functions.","code":""},{"path":"grouping-data.html","id":"overview","chapter":"1 Grouping data","heading":"1.1 Overview","text":"descriptive analyses, almost always necessary first group data summarise across groups (whether time period, place, relevant categorical variable) since often summary statistics across groups meaningful. Luckily, tidyverse makes really easy group_by function.page perform grouping operationsFast & easy using group_by() command dplyr orBase R aggregate() command","code":""},{"path":"grouping-data.html","id":"preparation","chapter":"1 Grouping data","heading":"1.2 Preparation","text":"Load packagesEnsure tidyverse installed, includes dplyr group_byLoad dataFor page use cleaned linelist dataset","code":"\npacman::p_load(rio,       # to import data\n               here,      # to locate files\n               tidyverse  # to clean, handle, and plot the data (includes dplyr!)\n)\nlinelist <- rio::import(here(\"data\", \"linelist_cleaned.xlsx\"))"},{"path":"grouping-data.html","id":"group_by","chapter":"1 Grouping data","heading":"1.3 group_by()","text":"Grouping one columns establishes subsequent calculations performed within context unique group.example, group unique values one column, outcome, run code , placing outcome within group_by().Note change dataset dplyr** verb mutate() summarise() applied “grouped” dataframe. can however “see” groupings printing. print grouped dataframe, see transformed tibble class object (LINK) printed displays grouping columns applied many groups - written just header row.","code":"\nll_by_outcome <- linelist %>% \n  group_by(outcome)\n# print to see which groups are active\nll_by_outcome## # A tibble: 6,464 x 30\r\n## # Groups:   outcome [3]\r\n##    case_id generation date_infection date_onset date_hospitalis~ date_outcome outcome gender   age age_unit age_years age_cat age_cat5 hospital   lon   lat infector\r\n##    <chr>        <dbl> <date>         <date>     <date>           <date>       <chr>   <chr>  <dbl> <chr>        <dbl> <fct>   <fct>    <chr>    <dbl> <dbl> <chr>   \r\n##  1 6c286a           2 NA             2014-04-27 2014-04-27       2014-05-07   Death   f          5 years            5 5-9     5-9      Missing  -13.2  8.46 <NA>    \r\n##  2 a3c8b8           4 2014-05-07     2014-05-08 2014-05-10       2014-05-14   Recover m         18 years           18 15-19   15-19    Port Ho~ -13.2  8.47 2ae019  \r\n##  3 d8a13d           4 2014-05-06     2014-05-08 2014-05-10       NA           <NA>    f         21 years           21 20-29   20-24    St. Mar~ -13.2  8.46 20b688  \r\n##  4 72b905           4 2014-05-06     2014-05-12 2014-05-13       NA           Recover m         26 years           26 20-29   25-29    Other    -13.2  8.47 2ae019  \r\n##  5 be99c8           3 2014-05-03     2014-05-22 2014-05-23       2014-05-24   Recover f         18 years           18 15-19   15-19    Port Ho~ -13.2  8.46 aec8ec  \r\n##  6 566f9e           3 2014-05-24     2014-05-27 2014-05-28       2014-06-03   Recover m          2 years            2 0-4     0-4      Other    -13.2  8.48 be7f8a  \r\n##  7 ce9c02           5 2014-05-27     2014-05-27 2014-05-29       2014-06-17   Death   m         23 years           23 20-29   20-24    Port Ho~ -13.2  8.47 53da57  \r\n##  8 acf422           6 2014-05-25     2014-05-27 2014-05-28       2014-06-27   Recover m         32 years           32 30-49   30-34    Central~ -13.3  8.48 1511c5  \r\n##  9 275cc7           5 2014-05-24     2014-05-27 2014-05-28       2014-06-07   Death   f          2 years            2 0-4     0-4      Central~ -13.2  8.47 e02f66  \r\n## 10 dbebea           7 NA             2014-06-02 2014-06-03       2014-06-05   <NA>    m         11 years           11 10-14   10-14    Port Ho~ -13.2  8.49 <NA>    \r\n## # ... with 6,454 more rows, and 13 more variables: source <chr>, wt_kg <dbl>, ht_cm <dbl>, ct_blood <dbl>, fever <chr>, chills <chr>, cough <chr>, aches <chr>,\r\n## #   vomit <chr>, temp <dbl>, time_admission <chr>, bmi <dbl>, days_onset_hosp <dbl>"},{"path":"grouping-data.html","id":"unique-groups","chapter":"1 Grouping data","heading":"1.3.1 Unique groups","text":"groups created reflect unique combination values grouping columns. see groups number rows group, pass grouped data tally().See three unique values grouping column outcome: “Death”, “Recover”, NA. See 2843 deaths, 2163 recoveries, 1458 outcome recorded.can group one column. , dataframe grouped outcome gender, tallied. Note unique combination outcome gender registered group - including missing values either column.","code":"\nlinelist %>% \n  group_by(outcome) %>% \n  tally()## # A tibble: 3 x 2\r\n##   outcome     n\r\n## * <chr>   <int>\r\n## 1 Death    2843\r\n## 2 Recover  2163\r\n## 3 <NA>     1458\nlinelist %>% \n  group_by(outcome, gender) %>% \n  tally()## # A tibble: 9 x 3\r\n## # Groups:   outcome [3]\r\n##   outcome gender     n\r\n##   <chr>   <chr>  <int>\r\n## 1 Death   f       1366\r\n## 2 Death   m       1332\r\n## 3 Death   <NA>     145\r\n## 4 Recover f       1037\r\n## 5 Recover m       1012\r\n## 6 Recover <NA>     114\r\n## 7 <NA>    f        701\r\n## 8 <NA>    m        687\r\n## 9 <NA>    <NA>      70"},{"path":"grouping-data.html","id":"new-columns","chapter":"1 Grouping data","heading":"1.3.2 New columns","text":"can also create new column within group_by() statement. equivalent calling mutate() group_by().","code":"\n# group dat based on a binary column created *within* the group_by() command\nlinelist %>% \n  group_by(\n    age_class = ifelse(age >= 18, \"adult\", \"child\")) %>% \n  tally(sort = T)## # A tibble: 3 x 2\r\n##   age_class     n\r\n##   <chr>     <int>\r\n## 1 child      4089\r\n## 2 adult      2276\r\n## 3 <NA>         99"},{"path":"grouping-data.html","id":"replaceadd-grouping-columns","chapter":"1 Grouping data","heading":"1.3.3 Replace/add grouping columns","text":"default run group_by() grouped data, old groups removed new one(s) apply. however, want just add new groups existing ones, add arguement .add=TRUE.","code":"\n# Grouped by outcome\nby_outcome <- linelist %>% \n  group_by(outcome)\n\n# Add grouping by gender in addition\nby_outcome_gender <- by_outcome %>% \n  group_by(gender, .add = TRUE)"},{"path":"grouping-data.html","id":"un-group","chapter":"1 Grouping data","heading":"1.4 Un-group","text":"Data grouped remain grouped specifically ungrouped via ungroup(). forget ungroup, can lead incorrect calculations! example removing grouping columns:can also remove grouping specific columns, placing column name inside.NOTE: verb count() automatically ungroups data counting.","code":"\nlinelist %>% \n  group_by(outcome, gender) %>% \n  tally() %>% \n  ungroup()\nlinelist %>% \n  group_by(outcome, gender) %>% \n  tally() %>% \n  ungroup(gender)"},{"path":"grouping-data.html","id":"summarise","chapter":"1 Grouping data","heading":"1.5 Summarise","text":"applying dplyr verb summarise() grouped data, can produce summary tables containing descriptive statistics group.Within summarise statement, provide name(s) new summary column(s), equals sign, statistical function apply data, shown . Within statistical function, list column operated relevant arguements. example, forget na.rm=TRUE remove missing values calculations!example summarise() applied without grouped data. statistics returned produced entire dataset.contrast, summarise() statement applied grouped data. statistics calculated outcome group.TIP: Summarise works UK US spelling - summarise() summarize() call function.","code":"\nlinelist %>% \n  summarise(\n    mean_age = mean(age_years, na.rm=T),\n    max_age  = max(age_years, na.rm=T),\n    min_age  = min(age_years, na.rm=T))##   mean_age max_age min_age\r\n## 1 15.02701      70       0\nlinelist %>% \n  group_by(outcome) %>% \n  summarise(\n    mean_age = mean(age_years, na.rm=T),\n    max_age  = max(age_years, na.rm=T),\n    min_age  = min(age_years, na.rm=T))## # A tibble: 3 x 4\r\n##   outcome mean_age max_age min_age\r\n## * <chr>      <dbl>   <dbl>   <dbl>\r\n## 1 Death       15.0      70       0\r\n## 2 Recover     15.2      58       0\r\n## 3 <NA>        14.9      58       0"},{"path":"grouping-data.html","id":"summarise-across-multiple-columns","chapter":"1 Grouping data","heading":"1.5.1 Summarise across() multiple columns","text":"can use summarise across multiple columns using across(). Provide vector column names, use semantic helper functions used select() (look ) specify columns criteria., mean() applied ungrouped data (global calculation). columns specified, function specified (parentheses), finally, additional arguments function (e.g. na.rm=TRUE)., summarise across call applied grouped data:select() helper functions can place within across():helpers available assist specifying columns:everything() - columns mentionedlast_col() - last columnwhere() - applies function columns selects TRUEstarts_with() - matches specified prefix. Example: select(starts_with(\"date\"))ends_with() - matches specified suffix. Example: select(ends_with(\"_end\"))contains() - columns containing character string. Example: select(contains(\"time\"))matches() - apply regular expression (regex). Example: select(contains(\"[pt]al\"))num_range() -any_of() - matches column named. Useful name might exist. Example: select(any_of(date_onset, date_death, cardiac_arrest))example, return mean every numeric column:want summary multiple statistics multiple columns, easy--read format, consider two-way table gtsummary package package demonstrated extensively Statistics page (LINK).\r\n          1\r\n          \r\n           \r\n          Mean (SD)\r\n          ","code":"\nlinelist %>% \n  summarise(across(.cols = c(age_years, temp),\n                   .fns = mean,\n                   na.rm=T))##   age_years     temp\r\n## 1  15.02701 38.57576\nlinelist %>% \n  group_by(outcome) %>% \n  summarise(across(.cols = c(age_years, temp), .fns = mean, na.rm=T))## # A tibble: 3 x 3\r\n##   outcome age_years  temp\r\n## * <chr>       <dbl> <dbl>\r\n## 1 Death        15.0  38.6\r\n## 2 Recover      15.2  38.6\r\n## 3 <NA>         14.9  38.6\nlinelist %>% \n  group_by(outcome) %>% \n  summarise(across(where(is.numeric), .fns = mean, na.rm=T))## # A tibble: 3 x 12\r\n##   outcome generation   age age_years   lon   lat wt_kg ht_cm ct_blood  temp   bmi days_onset_hosp\r\n## * <chr>        <dbl> <dbl>     <dbl> <dbl> <dbl> <dbl> <dbl>    <dbl> <dbl> <dbl>           <dbl>\r\n## 1 Death         16.8  15.1      15.0 -13.2  8.47  52.5  124.     21.3  38.6  49.6            1.74\r\n## 2 Recover       16.4  15.2      15.2 -13.2  8.47  52.6  124.     21.1  38.6  47.1            2.21\r\n## 3 <NA>          16.4  15.0      14.9 -13.2  8.47  52.3  122.     21.2  38.6  47.1            2.00\nlibrary(gtsummary) \n\nlinelist %>% \n  select(outcome, age_years, temp, ht_cm) %>%     # select columns (optional)\n  gtsummary::tbl_summary( \n    by = outcome,                                 # indicate grouping column (optional)\n    statistic = all_continuous() ~ \"{mean} ({sd})\") # return mean and std deviation for each group"},{"path":"grouping-data.html","id":"count-and-tally","chapter":"1 Grouping data","heading":"1.6 Count and tally","text":"count() tally() provide similar functionality different.tally() shorthand summarise(), automatically group data. Thus, achieve grouped tallys must follow group_by() command. can add sort = TRUE see largest groups first.contrast, count() following:applies group_by() specified column(s)applies summarise() returned column n number observations per groupapplies ungroup()Just like group_by() can create new column within count() command:Read distinction tally() count() hereBoth verbs can called multiple times, functionality “rolling ”. example, summarise number genders present outcome, run following. Note, name final column changed default “n” clarity.","code":"\nlinelist %>% \n  tally##      n\r\n## 1 6464\nlinelist %>% \n  group_by(outcome) %>% \n  tally(sort = TRUE)## # A tibble: 3 x 2\r\n##   outcome     n\r\n##   <chr>   <int>\r\n## 1 Death    2843\r\n## 2 Recover  2163\r\n## 3 <NA>     1458\nlinelist %>% \n  count(outcome)##   outcome    n\r\n## 1   Death 2843\r\n## 2 Recover 2163\r\n## 3    <NA> 1458\nlinelist %>% \n  count(age_class = ifelse(age >= 18, \"adult\", \"child\"), sort = T)##   age_class    n\r\n## 1     child 4089\r\n## 2     adult 2276\r\n## 3      <NA>   99\nlinelist %>% \n  # produce counts by outcome-gender groups\n  count(outcome, gender) %>% \n  # produce counts of gender within each outcome group\n  count(outcome, name = \"number of genders per outcome\" ) ##   outcome number of genders per outcome\r\n## 1   Death                             3\r\n## 2 Recover                             3\r\n## 3    <NA>                             3"},{"path":"grouping-data.html","id":"filter-on-grouped-data","chapter":"1 Grouping data","heading":"1.7 Filter on grouped data","text":"apply filter grouped data,","code":""},{"path":"grouping-data.html","id":"slice-rows-per-group","chapter":"1 Grouping data","heading":"1.7.1 Slice rows per group","text":"dplyr function slice(), subsets rows based position data, can also applied per group. Remember account sorting data within group get desired “slice”.example, retrieve latest 5 admissions hospital:Group linelist column hospitalArrange records latest earliest date_hospitalisation within hospital groupSlice retrieve first 5 rowsslice_head() - selects n rows topslice_tail() - selects n rows endslice_sample() - randomly selects n rowsslice_min() - selects n rows highest values order_by = column, use with_ties = TRUE keep tiesslice_max() - selects n rows lowest values order_by = column, use with_ties = TRUE keep ties","code":"\nlinelist %>%\n  group_by(hospital) %>%\n  arrange(hospital, date_hospitalisation) %>%\n  slice_head(n = 5) %>% \n  arrange(hospital) %>% \n  select(case_id, hospital, date_hospitalisation)## # A tibble: 30 x 3\r\n## # Groups:   hospital [6]\r\n##    case_id hospital          date_hospitalisation\r\n##    <chr>   <chr>             <date>              \r\n##  1 20b688  Central Hospital  2014-05-06          \r\n##  2 d58402  Central Hospital  2014-05-10          \r\n##  3 b8f2fd  Central Hospital  2014-05-13          \r\n##  4 acf422  Central Hospital  2014-05-28          \r\n##  5 275cc7  Central Hospital  2014-05-28          \r\n##  6 d1fafd  Military Hospital 2014-04-17          \r\n##  7 974bc1  Military Hospital 2014-05-13          \r\n##  8 6a9004  Military Hospital 2014-05-13          \r\n##  9 09e386  Military Hospital 2014-05-14          \r\n## 10 865581  Military Hospital 2014-05-15          \r\n## # ... with 20 more rows"},{"path":"grouping-data.html","id":"filter-on-group-size","chapter":"1 Grouping data","heading":"1.7.2 Filter on group size","text":"function add_count() adds column n original data giving number rows row’s group.Shown simplicity selection linelist data - add_count() applied hospital, values column n reflect number rows row’s hospital group. Note values repeated. example , column name n changed name =becomes easy filter case rows hospitalized “small” hospital, say, hospital admitted fewer 500 patients:","code":"\nlinelist %>% \n  select(case_id, hospital) %>% \n  add_count(hospital)  # add \"number of rows admitted to same hospital as this row\" ##     case_id                             hospital    n\r\n## 1    6c286a                              Missing 1597\r\n## 2    a3c8b8                        Port Hospital 1971\r\n## 3    d8a13d St. Mark's Maternity Hospital (SMMH)  446\r\n## 4    72b905                                Other  978\r\n## 5    be99c8                        Port Hospital 1971\r\n## 6    566f9e                                Other  978\r\n## 7    ce9c02                        Port Hospital 1971\r\n## 8    acf422                     Central Hospital  485\r\n## 9    275cc7                     Central Hospital  485\r\n## 10   dbebea                        Port Hospital 1971\r\n## 11   369449                              Missing 1597\r\n## 12   7e95d1                                Other  978\r\n## 13   788a99                        Port Hospital 1971\r\n## 14   2978ac                        Port Hospital 1971\r\n## 15   e0fb09                        Port Hospital 1971\r\n## 16   be502d                    Military Hospital  987\r\n## 17   bab455                        Port Hospital 1971\r\n## 18   9ae2d7                    Military Hospital  987\r\n## 19   2eaa9a                              Missing 1597\r\n## 20   bbfa93                                Other  978\r\n## 21   88eff2 St. Mark's Maternity Hospital (SMMH)  446\r\n## 22   542d07                        Port Hospital 1971\r\n## 23   f86ce2                    Military Hospital  987\r\n## 24   920c1b                                Other  978\r\n## 25   ddddee                                Other  978\r\n## 26   99e8fa                        Port Hospital 1971\r\n## 27   ec8ee4                              Missing 1597\r\n## 28   567136                        Port Hospital 1971\r\n## 29   67184b                                Other  978\r\n## 30   ceed40                        Port Hospital 1971\r\n## 31   9371a9 St. Mark's Maternity Hospital (SMMH)  446\r\n## 32   bc2adf                              Missing 1597\r\n## 33   f3881f                    Military Hospital  987\r\n## 34   8bd1e8                              Missing 1597\r\n## 35   abd4af                              Missing 1597\r\n## 36   959170                     Central Hospital  485\r\n## 37   64c8ef                     Central Hospital  485\r\n## 38   e56412                     Central Hospital  485\r\n## 39   cfd79c                                Other  978\r\n## 40   021718                        Port Hospital 1971\r\n## 41   92ab68                    Military Hospital  987\r\n## 42   4c1040                                Other  978\r\n## 43   342b03                                Other  978\r\n## 44   92ddf7                              Missing 1597\r\n## 45   3f5a00 St. Mark's Maternity Hospital (SMMH)  446\r\n## 46   ae50c8                        Port Hospital 1971\r\n## 47   c76676                    Military Hospital  987\r\n## 48   baacc1                                Other  978\r\n## 49   9d69e4                              Missing 1597\r\n## 50   1e1825                        Port Hospital 1971\r\n## 51   9fcf61                        Port Hospital 1971\r\n## 52   0277c7                              Missing 1597\r\n## 53   cc7393                              Missing 1597\r\n## 54   3789ee St. Mark's Maternity Hospital (SMMH)  446\r\n## 55   c5d4ec St. Mark's Maternity Hospital (SMMH)  446\r\n## 56   a81f7d                        Port Hospital 1971\r\n## 57   72bb4b                              Missing 1597\r\n## 58   df2113                    Military Hospital  987\r\n## 59   52f612                              Missing 1597\r\n## 60   059cc0                              Missing 1597\r\n## 61   1a9636                        Port Hospital 1971\r\n## 62   68623f                              Missing 1597\r\n## 63   bd0983                        Port Hospital 1971\r\n## 64   df8dbb                                Other  978\r\n## 65   9f0c37                                Other  978\r\n## 66   f97626                    Military Hospital  987\r\n## 67   834a39                              Missing 1597\r\n## 68   92e129                     Central Hospital  485\r\n## 69   feea26                     Central Hospital  485\r\n## 70   c9e824                              Missing 1597\r\n## 71   6963ab                              Missing 1597\r\n## 72   1bdf6f                              Missing 1597\r\n## 73   55f73f                    Military Hospital  987\r\n## 74   bbdbda                        Port Hospital 1971\r\n## 75   c41648                                Other  978\r\n## 76   b3f687                                Other  978\r\n## 77   2965bd St. Mark's Maternity Hospital (SMMH)  446\r\n## 78   a182a5                    Military Hospital  987\r\n## 79   a3a599                                Other  978\r\n## 80   cc71ea                        Port Hospital 1971\r\n## 81   37d5ba                        Port Hospital 1971\r\n## 82   effb9d                        Port Hospital 1971\r\n## 83   3bbcd7                        Port Hospital 1971\r\n## 84   3f5fe1 St. Mark's Maternity Hospital (SMMH)  446\r\n## 85   7b46ff                                Other  978\r\n## 86   7f8dd2                              Missing 1597\r\n## 87   cb48bf                                Other  978\r\n## 88   e8c88c                        Port Hospital 1971\r\n## 89   2e9570                    Military Hospital  987\r\n## 90   9c8045                              Missing 1597\r\n## 91   c86866                        Port Hospital 1971\r\n## 92   31e797                     Central Hospital  485\r\n## 93   5f5f78                                Other  978\r\n## 94   e6d478                              Missing 1597\r\n## 95   b3c066                    Military Hospital  987\r\n## 96   3dca80                                Other  978\r\n## 97   61c40f                              Missing 1597\r\n## 98   9b4647                     Central Hospital  485\r\n## 99   6f045a                        Port Hospital 1971\r\n## 100  805ca4                        Port Hospital 1971\r\n## 101  911db7                        Port Hospital 1971\r\n## 102  aa3c55                        Port Hospital 1971\r\n## 103  c68c23                              Missing 1597\r\n## 104  cd38d3                              Missing 1597\r\n## 105  e898af                    Military Hospital  987\r\n## 106  111ca6                     Central Hospital  485\r\n## 107  2463fc                        Port Hospital 1971\r\n## 108  cccca6                              Missing 1597\r\n## 109  660b34                              Missing 1597\r\n## 110  f0251f                        Port Hospital 1971\r\n## 111  270603                    Military Hospital  987\r\n## 112  cf4399                                Other  978\r\n## 113  aebdac                        Port Hospital 1971\r\n## 114  49e88d                    Military Hospital  987\r\n## 115  730684                    Military Hospital  987\r\n## 116  21689b                     Central Hospital  485\r\n## 117  c899b0                              Missing 1597\r\n## 118  6a007d                        Port Hospital 1971\r\n## 119  858426                        Port Hospital 1971\r\n## 120  b4bb29                        Port Hospital 1971\r\n## 121  ee82d4                        Port Hospital 1971\r\n## 122  09915f                        Port Hospital 1971\r\n## 123  83e5cd                                Other  978\r\n## 124  181506                              Missing 1597\r\n## 125  45d75d                              Missing 1597\r\n## 126  508984                                Other  978\r\n## 127  9feec9                    Military Hospital  987\r\n## 128  9e2fb0                        Port Hospital 1971\r\n## 129  ac22bf                              Missing 1597\r\n## 130  83d537                        Port Hospital 1971\r\n## 131  08bf40                              Missing 1597\r\n## 132  407e7e St. Mark's Maternity Hospital (SMMH)  446\r\n## 133  e256c8                              Missing 1597\r\n## 134  8ce67b                                Other  978\r\n## 135  464b83                                Other  978\r\n## 136  d5d56f                                Other  978\r\n## 137  5a54ea                              Missing 1597\r\n## 138  cd182c St. Mark's Maternity Hospital (SMMH)  446\r\n## 139  1bc942                        Port Hospital 1971\r\n## 140  f027f8                        Port Hospital 1971\r\n## 141  0c7230                              Missing 1597\r\n## 142  f70e4c                    Military Hospital  987\r\n## 143  056471                              Missing 1597\r\n## 144  1961e9                    Military Hospital  987\r\n## 145  272fb6                        Port Hospital 1971\r\n## 146  830af5                                Other  978\r\n## 147  3857bf                              Missing 1597\r\n## 148  a49172                                Other  978\r\n## 149  c800a4                        Port Hospital 1971\r\n## 150  d45263                        Port Hospital 1971\r\n## 151  f0b93e                                Other  978\r\n## 152  ee9a23                    Military Hospital  987\r\n## 153  c0c70a                        Port Hospital 1971\r\n## 154  474f41                        Port Hospital 1971\r\n## 155  51f606                        Port Hospital 1971\r\n## 156  363eb4                                Other  978\r\n## 157  93adc6                        Port Hospital 1971\r\n## 158  4a5f7e                                Other  978\r\n## 159  268b99                        Port Hospital 1971\r\n## 160  bb7af6                        Port Hospital 1971\r\n## 161  7ea9a5                                Other  978\r\n## 162  52f06c St. Mark's Maternity Hospital (SMMH)  446\r\n## 163  c10e49                              Missing 1597\r\n## 164  911ded                        Port Hospital 1971\r\n## 165  79f62b                        Port Hospital 1971\r\n## 166  bc0b51 St. Mark's Maternity Hospital (SMMH)  446\r\n## 167  da1f29 St. Mark's Maternity Hospital (SMMH)  446\r\n## 168  8a0025                              Missing 1597\r\n## 169  8e1819                              Missing 1597\r\n## 170  862f64                              Missing 1597\r\n## 171  decb2c                        Port Hospital 1971\r\n## 172  696e71                        Port Hospital 1971\r\n## 173  7b51e1 St. Mark's Maternity Hospital (SMMH)  446\r\n## 174  41b557                        Port Hospital 1971\r\n## 175  af46a6                        Port Hospital 1971\r\n## 176  7256ff                        Port Hospital 1971\r\n## 177  43c97c                                Other  978\r\n## 178  b49023                    Military Hospital  987\r\n## 179  f4a472                              Missing 1597\r\n## 180  f94a8f St. Mark's Maternity Hospital (SMMH)  446\r\n## 181  e55bce St. Mark's Maternity Hospital (SMMH)  446\r\n## 182  4704e2                        Port Hospital 1971\r\n## 183  09f73e                        Port Hospital 1971\r\n## 184  2ae536                        Port Hospital 1971\r\n## 185  52c435                        Port Hospital 1971\r\n## 186  7dacd2                        Port Hospital 1971\r\n## 187  1dffed                              Missing 1597\r\n## 188  251fec                    Military Hospital  987\r\n## 189  4d06ed                        Port Hospital 1971\r\n## 190  2f29c3                    Military Hospital  987\r\n## 191  35a38e                        Port Hospital 1971\r\n## 192  95c85f                              Missing 1597\r\n## 193  7b6887                                Other  978\r\n## 194  68f609                                Other  978\r\n## 195  6f5d6a                              Missing 1597\r\n## 196  aeace5                    Military Hospital  987\r\n## 197  44163c St. Mark's Maternity Hospital (SMMH)  446\r\n## 198  8a79c5                              Missing 1597\r\n## 199  b255c3                              Missing 1597\r\n## 200  edcb9c                                Other  978\r\n## 201  7df257                        Port Hospital 1971\r\n## 202  5d6f13                     Central Hospital  485\r\n## 203  7f8471                              Missing 1597\r\n## 204  97ea41                              Missing 1597\r\n## 205  785e65                        Port Hospital 1971\r\n## 206  984166                              Missing 1597\r\n## 207  8d3858                              Missing 1597\r\n## 208  d7ff31                        Port Hospital 1971\r\n## 209  2336b5                                Other  978\r\n## 210  752c63                              Missing 1597\r\n## 211  7456e4                        Port Hospital 1971\r\n## 212  f40f7b                              Missing 1597\r\n## 213  e25651                                Other  978\r\n## 214  faf2aa                        Port Hospital 1971\r\n## 215  f07ae3                     Central Hospital  485\r\n## 216  70e542                        Port Hospital 1971\r\n## 217  fdfabb                              Missing 1597\r\n## 218  13de32                        Port Hospital 1971\r\n## 219  4df686                        Port Hospital 1971\r\n## 220  507608                              Missing 1597\r\n## 221  b4671f                        Port Hospital 1971\r\n## 222  018cec                    Military Hospital  987\r\n## 223  e68dd5                                Other  978\r\n## 224  8555ef                                Other  978\r\n## 225  7c3e28                              Missing 1597\r\n## 226  dd44f3                                Other  978\r\n## 227  6e0ea5                        Port Hospital 1971\r\n## 228  471584                    Military Hospital  987\r\n## 229  5ee95c                        Port Hospital 1971\r\n## 230  c6cdb2                                Other  978\r\n## 231  acac6f                        Port Hospital 1971\r\n## 232  44088e                              Missing 1597\r\n## 233  25b337                    Military Hospital  987\r\n## 234  b83511                        Port Hospital 1971\r\n## 235  93f42a                    Military Hospital  987\r\n## 236  5a65bb                        Port Hospital 1971\r\n## 237  bb0230                        Port Hospital 1971\r\n## 238  1c7c3f                              Missing 1597\r\n## 239  1aae82                              Missing 1597\r\n## 240  e824bf                                Other  978\r\n## 241  b8c40d                              Missing 1597\r\n## 242  a1b9bd                              Missing 1597\r\n## 243  9d0f57                              Missing 1597\r\n## 244  7f957c                              Missing 1597\r\n## 245  305144                                Other  978\r\n## 246  17742d                                Other  978\r\n## 247  506d04                                Other  978\r\n## 248  54336c                                Other  978\r\n## 249  5c27ca                              Missing 1597\r\n## 250  1bb136                              Missing 1597\r\n## 251  19b40a                              Missing 1597\r\n## 252  882ab5                                Other  978\r\n## 253  dbab87                        Port Hospital 1971\r\n## 254  8028e7                    Military Hospital  987\r\n## 255  a3f6dd                    Military Hospital  987\r\n## 256  300cf2                                Other  978\r\n## 257  10ddce                                Other  978\r\n## 258  d95c49                     Central Hospital  485\r\n## 259  ff144a                        Port Hospital 1971\r\n## 260  836f4a                    Military Hospital  987\r\n## 261  0bafac                              Missing 1597\r\n## 262  7d0cf6                        Port Hospital 1971\r\n## 263  00409c                              Missing 1597\r\n## 264  e9d18b                        Port Hospital 1971\r\n## 265  0e654f                                Other  978\r\n## 266  ad0218                        Port Hospital 1971\r\n## 267  998070                     Central Hospital  485\r\n## 268  125c66                              Missing 1597\r\n## 269  aac41c                              Missing 1597\r\n## 270  5c9744                     Central Hospital  485\r\n## 271  53a3e2                                Other  978\r\n## 272  166302                    Military Hospital  987\r\n## 273  292298                        Port Hospital 1971\r\n## 274  fb2c5a                     Central Hospital  485\r\n## 275  1f3f18                        Port Hospital 1971\r\n## 276  b18a1d                        Port Hospital 1971\r\n## 277  ebe2aa                    Military Hospital  987\r\n## 278  51995c                        Port Hospital 1971\r\n## 279  77d9e0                              Missing 1597\r\n## 280  3d9f8e                                Other  978\r\n## 281  ecb1de                              Missing 1597\r\n## 282  31403d St. Mark's Maternity Hospital (SMMH)  446\r\n## 283  6c1185                              Missing 1597\r\n## 284  02502c                              Missing 1597\r\n## 285  fe8345                    Military Hospital  987\r\n## 286  039299                    Military Hospital  987\r\n## 287  e98078                        Port Hospital 1971\r\n## 288  e0a4cd                              Missing 1597\r\n## 289  9f9bc0                        Port Hospital 1971\r\n## 290  1d6ffd                        Port Hospital 1971\r\n## 291  4e54ad                        Port Hospital 1971\r\n## 292  227baf                        Port Hospital 1971\r\n## 293  00612b                              Missing 1597\r\n## 294  e0ac78                              Missing 1597\r\n## 295  da9565                              Missing 1597\r\n## 296  247cc4                        Port Hospital 1971\r\n## 297  beec14                     Central Hospital  485\r\n## 298  441130                        Port Hospital 1971\r\n## 299  b48c42                              Missing 1597\r\n## 300  e36e1f                     Central Hospital  485\r\n## 301  9d197f                        Port Hospital 1971\r\n## 302  796c7c                        Port Hospital 1971\r\n## 303  26d162                        Port Hospital 1971\r\n## 304  633fbe                              Missing 1597\r\n## 305  1dcf17                              Missing 1597\r\n## 306  08a3ef                              Missing 1597\r\n## 307  987c0a                              Missing 1597\r\n## 308  46bed2                        Port Hospital 1971\r\n## 309  140f9e                              Missing 1597\r\n## 310  a2df92                        Port Hospital 1971\r\n## 311  a6cbbc                        Port Hospital 1971\r\n## 312  42b86c                        Port Hospital 1971\r\n## 313  ae7509                        Port Hospital 1971\r\n## 314  2adcc8                        Port Hospital 1971\r\n## 315  747ece                              Missing 1597\r\n## 316  37e101                        Port Hospital 1971\r\n## 317  a22ee3                                Other  978\r\n## 318  b85356                    Military Hospital  987\r\n## 319  ba66a6                    Military Hospital  987\r\n## 320  306557                    Military Hospital  987\r\n## 321  47dfcd                        Port Hospital 1971\r\n## 322  07df1a                    Military Hospital  987\r\n## 323  6ffce0                                Other  978\r\n## 324  f85d5d                        Port Hospital 1971\r\n## 325  80a84a                        Port Hospital 1971\r\n## 326  6ad9f7                        Port Hospital 1971\r\n## 327  3b925b                                Other  978\r\n## 328  10362e                        Port Hospital 1971\r\n## 329  ab7dc1                    Military Hospital  987\r\n## 330  7f82f3                              Missing 1597\r\n## 331  721b5b                              Missing 1597\r\n## 332  fd960a                        Port Hospital 1971\r\n## 333  8e106e                                Other  978\r\n##  [ reached 'max' / getOption(\"max.print\") -- omitted 6131 rows ]\nlinelist %>% \n  select(case_id, hospital) %>% \n  add_count(hospital) %>% \n  filter(n < 500)"},{"path":"grouping-data.html","id":"mutate-on-grouped-data","chapter":"1 Grouping data","heading":"1.8 Mutate on grouped data","text":"retain columns rows (summarize) add new variable average group statistics, use mutate() instead summarise().useful want group statistics original dataset column present - e.g. calculations comparing one row group. example, code calculates difference row’s delay admission median delay hospital:","code":"\nlinelist %>% \n  # group data by hospital (no change to linelist yet)\n  group_by(hospital) %>% \n  \n  # new columns\n  mutate(\n    # mean days to admission per hospital (rounded to 1 decimal)\n    group_delay_admit = round(mean(days_onset_hosp, na.rm=T), 1),\n    \n    # difference between row's delay and mean delay at their hospital (rounded to 1 decimal)\n    diff_to_group     = round(days_onset_hosp - group_delay_admit, 1)) %>%\n  \n  # select certain rows only - for demonstration/viewing purposes\n  select(case_id, hospital, days_onset_hosp, group_delay_admit, diff_to_group)## # A tibble: 6,464 x 5\r\n## # Groups:   hospital [6]\r\n##    case_id hospital                             days_onset_hosp group_delay_admit diff_to_group\r\n##    <chr>   <chr>                                          <dbl>             <dbl>         <dbl>\r\n##  1 6c286a  Missing                                            0               2            -2  \r\n##  2 a3c8b8  Port Hospital                                      2               1.9           0.1\r\n##  3 d8a13d  St. Mark's Maternity Hospital (SMMH)               2               2             0  \r\n##  4 72b905  Other                                              1               1.9          -0.9\r\n##  5 be99c8  Port Hospital                                      1               1.9          -0.9\r\n##  6 566f9e  Other                                              1               1.9          -0.9\r\n##  7 ce9c02  Port Hospital                                      2               1.9           0.1\r\n##  8 acf422  Central Hospital                                   1               1.8          -0.8\r\n##  9 275cc7  Central Hospital                                   1               1.8          -0.8\r\n## 10 dbebea  Port Hospital                                      1               1.9          -0.9\r\n## # ... with 6,454 more rows"},{"path":"grouping-data.html","id":"select-on-grouped-data","chapter":"1 Grouping data","heading":"1.9 Select on grouped data","text":"verb select() works grouped data, grouping columns always included (even mentioned select()).\r\nwant grouping columns, use ungroup() first.","code":""},{"path":"grouping-data.html","id":"base-r","chapter":"1 Grouping data","heading":"1.10 Base R","text":"briefly demonstrate grouping data base R function aggregate()","code":""},{"path":"grouping-data.html","id":"resources","chapter":"1 Grouping data","heading":"1.11 Resources","text":"useful resources information:\r\nhttps://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf\r\nhttps://datacarpentry.org/R-genomics/04-dplyr.html\r\nhttps://dplyr.tidyverse.org/reference/group_by.html\r\nhttps://dplyr.tidyverse.org/articles/grouping.htmlhttps://itsalocke.com/files/DataManipulationinR.pdfYou can perform summary function grouped data; see Cheat Sheet info:\r\nhttps://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf","code":""}]
