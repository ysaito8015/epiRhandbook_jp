<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1 R Basics | R Handbook for Epidemiologists</title>
<meta name="author" content="the handbook team">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Handbook for Epidemiologists</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome - THIS IS A DRAFT</a></li>
<li class="book-part">Preview pages</li>
<li><a class="active" href="r-basics.html"><span class="header-section-number">1</span> R Basics</a></li>
<li><a class="" href="r-markdown.html"><span class="header-section-number">2</span> R Markdown</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-basics" class="section level1" number="1">
<h1>
<span class="header-section-number">1</span> R Basics<a class="anchor" aria-label="anchor" href="#r-basics"><i class="fas fa-link"></i></a>
</h1>
<!-- ======================================================= -->
<div id="overview" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview"><i class="fas fa-link"></i></a>
</h2>
<p><strong>This page is not intended to be a comprehensive “learn R” tutorial</strong>. However, it does cover some fundamentals that can be useful for reference or for refreshing your memory. See the section on recommended training for more comprehensive tutorials.</p>
<!-- ======================================================= -->
</div>
<div id="why-use-r" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Why use R?<a class="anchor" aria-label="anchor" href="#why-use-r"><i class="fas fa-link"></i></a>
</h2>
<p>As stated on the <a href="https://www.r-project.org/about.html">R project website</a>, R is a programming language and environment for statistical computing and graphics. It is highly versatile, extensible, and community-driven.</p>
<p><strong>Cost</strong></p>
<p>R is free to use! There is a strong ethic in the community of free and open-source material.</p>
<p><strong>Reproducibility</strong></p>
<p>Conducting your data management and analysis through a programming language (compared to Excel or another primarily point-click/manual tool) enhances <strong>reproducibility</strong>, makes <strong>error-detection</strong> easier, and eases your workload.</p>
<p><strong>Community</strong></p>
<p>The R community of users is enormous and collaborative. New packages and tools to address real-life problems are developed daily, and vetted by the community of users. As one example, <a href="https://rladies.org/">R-Ladies</a> is a worldwide organization whose mission is to promote gender diversity in the R community, and is one of the largest organizations of R users. It likely has a chapter near you!</p>
<!-- ======================================================= -->
</div>
<div id="install" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> Installation<a class="anchor" aria-label="anchor" href="#install"><i class="fas fa-link"></i></a>
</h2>
<p><strong>How to install R</strong></p>
<p>Visit this website <a href="https://www.r-project.org/">https://www.r-project.org/</a> and download the latest version of R suitable for your computer.</p>
<p><strong>How to install R Studio</strong></p>
<p>Visit this website <a href="https://rstudio.com/products/rstudio/download/">https://rstudio.com/products/rstudio/download/</a> and download the latest free Desktop version of RStudio suitable for your computer.</p>
<p><strong>How to update R and RStudio</strong></p>
<p>Your version of R is printed to the R Console at start-up. You can also run <code><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo()</a></code>.</p>
<p>To update R, go to the website mentioned above and re-install R. Alternatively, you can use the <strong>installr</strong> package (on Windows) by running <code><a href="http://talgalili.github.io/installr/reference/updateR.html">installr::updateR()</a></code>. This will open dialog boxes to help you download the latest R version and update your packages to the new R version. More details can be found in the <strong>installr</strong> <a href="https://www.r-project.org/nosvn/pandoc/installr.html">documentation</a>.</p>
<p>Be aware that the old R version will still exist in your computer. You can temporarily run an older version (older “installation”) of R by clicking “Tools” -&gt; “Global Options” in RStudio and choosing an R version. This can be useful if you want to use a package that has not been updated to work on the newest version of R.</p>
<p>To update RStudio, you can go to the website above and re-download RStudio. Another option is to click “Help” -&gt; “Check for Updates” within RStudio, but this may not show the very latest updates.</p>
<div id="other-software-you-may-need-to-install" class="section level3" number="1.3.1">
<h3>
<span class="header-section-number">1.3.1</span> Other software you <em>may</em> need to install<a class="anchor" aria-label="anchor" href="#other-software-you-may-need-to-install"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>TinyTeX (<em>for compiling an RMarkdown document to PDF</em>)<br>
</li>
<li>Pandoc (<em>for compiling RMarkdown documents</em>)<br>
</li>
<li>RTools (<em>for building packages for R</em>)<br>
</li>
<li>phantomjs (<em>for saving still images of animated networks, such as transmission chains</em>)</li>
</ul>
<div id="tinytex" class="section level4" number="1.3.1.1">
<h4>
<span class="header-section-number">1.3.1.1</span> TinyTex<a class="anchor" aria-label="anchor" href="#tinytex"><i class="fas fa-link"></i></a>
</h4>
<p>TinyTex is a custom LaTeX distribution, useful when trying to produce PDFs from R.<br>
See <a href="https://yihui.org/tinytex/">https://yihui.org/tinytex/</a> for more informaton.</p>
<p>To install TinyTex from R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'tinytex'</span><span class="op">)</span>
<span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html">install_tinytex</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># to uninstall TinyTeX, run tinytex::uninstall_tinytex()</span></code></pre></div>
</div>
<div id="pandoc" class="section level4 unnumbered">
<h4>Pandoc<a class="anchor" aria-label="anchor" href="#pandoc"><i class="fas fa-link"></i></a>
</h4>
<p>Pandoc is a document converter, a separate software from R. <strong>It comes bundled with RStudio and should not need to be downloaded.</strong> It helps the process of converting Rmarkdown documents to formats like .pdf and adding complex functionality.</p>
</div>
<div id="rtools" class="section level4 unnumbered">
<h4>RTools<a class="anchor" aria-label="anchor" href="#rtools"><i class="fas fa-link"></i></a>
</h4>
<p>RTools is a collection of software for building packages for R</p>
<p>Install from this website: <a href="https://cran.r-project.org/bin/windows/Rtools/">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</div>
<div id="phantomjs" class="section level4 unnumbered">
<h4>phantomjs<a class="anchor" aria-label="anchor" href="#phantomjs"><i class="fas fa-link"></i></a>
</h4>
<p>This is often used to take “screenshots” of webpages. For example when you make a transmission chain with <strong>epicontacts</strong> package, an HTML file is produced that is interactive and dynamic. If you want a static image, if can be useful to use the <a href="https://wch.github.io/webshot/articles/intro.html"><strong>webshot</strong></a> package to automate this process. This will require the external program “phantomjs”. You can install phantomjs via the <strong>webshot</strong> package with the command <code><a href="https://rdrr.io/pkg/webshot/man/install_phantomjs.html">webshot::install_phantomjs()</a></code>.</p>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="rstudio" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> RStudio<a class="anchor" aria-label="anchor" href="#rstudio"><i class="fas fa-link"></i></a>
</h2>
<div id="rstudio-orientation" class="section level3" number="1.4.1">
<h3>
<span class="header-section-number">1.4.1</span> RStudio Orientation<a class="anchor" aria-label="anchor" href="#rstudio-orientation"><i class="fas fa-link"></i></a>
</h3>
<p><strong>First, open RStudio.</strong> As their icons can look very similar, be sure you are opening <em>RStudio</em> and not R.</p>
<p>For RStudio to function you must also have R installed on the computer (see <a href="r-basics.html#install">this section</a> for installation instructions).</p>
<p><strong>RStudio</strong> is an interface (GUI) for easier use of <strong>R</strong>. You can think of R as being the engine of a vehicle, doing the crucial work, and RStudio as the body of the vehicle (with seats, accessories, etc.) that helps you actually use the engine to move forward!</p>
<p>By default RStudio displays four rectangle panes.</p>
<div class="inline-figure"><img src="images/RStudio_overview.PNG" width="100%" style="display: block; margin: auto;"></div>
<p><span style="color: black;"><strong><em>TIP:</em></strong> If your RStudio displays only one left pane it is because you have no scripts open yet.</span></p>
<p><strong>The R Console Pane</strong></p>
<p>The R Console, by default the left or lower-left pane in R Studio, is the home of the R “engine”. This is where the commands are actually run and non-graphic outputs and error/warning messages appear. You can directly enter and run commands in the R Console, but realize that these commands are not saved as they are when running commands from a script.</p>
<p>If you are familiar with Stata, the R Console is like the Command Window and also the Results Window.</p>
<p><strong>The Source Pane</strong><br>
This pane, by default in the upper-left, is space to edit and run your scripts. This pane can also display datasets (data frames) for viewing.</p>
<p>For Stata users, this pane is similar to your Do-file and Data Editor windows.</p>
<p><strong>The Environment Pane</strong><br>
This pane, by default the upper-right, is most often used to see brief summaries of objects in the R Environment in the current session. These <a href="r-basics.html#objects">objects</a> could include imported, modified, or created datasets, parameters you have defined (e.g. a specific epi week for the analysis), or vectors or lists you have defined during analysis (e.g. names of regions). Click on the arrow next to a dataframe name to see its variables.</p>
<p>In Stata, this is most similar to Variables Manager window.</p>
<p>This pane also contains <em>History</em> where can see commands that you can previously. It also has a “Tutorial” tab where you can complete interactive R tutorials if you have the <strong>learnr</strong> package installed.</p>
<p><strong>Plots, Packages, and Help Pane</strong><br>
The lower-right pane includes several tabs including plots (display of graphics including maps), help, a file library, and available R packages (including installation/update options).</p>
<p>This pane contains the Stata equivalents of the Plots Manager and Project Manager windows.</p>
</div>
<div id="rstudio-settings" class="section level3" number="1.4.2">
<h3>
<span class="header-section-number">1.4.2</span> RStudio settings<a class="anchor" aria-label="anchor" href="#rstudio-settings"><i class="fas fa-link"></i></a>
</h3>
<p>Change RStudio settings and appearance in the <em>Tools</em> drop-down menu, by selecting <em>Global Options</em>. There you can change the default settings, including appearance/background color.</p>
<div class="inline-figure"><img src="images/RStudio_tools_options.png" width="75%" style="display: block; margin: auto;"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="scripts" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> Scripts<a class="anchor" aria-label="anchor" href="#scripts"><i class="fas fa-link"></i></a>
</h2>
<p>Scripts are a fundamental part of programming. Storing your code in a script (vs. typing in the console) has many advantages:</p>
<ul>
<li>Reproducibility<br>
</li>
<li>Version control<br>
</li>
<li>Commenting</li>
</ul>
<!-- ======================================================= --><div id="rmarkdown" class="section level3 unnumbered">
<h3>Rmarkdown<a class="anchor" aria-label="anchor" href="#rmarkdown"><i class="fas fa-link"></i></a>
</h3>
<p>Rmarkdown is a type of script in which the script itself <em>becomes</em> a document (PDF, Word, HTML, Powerpoint, etc.). See the handbook page on <a href="r-basics.html#rmarkdown">Rmarkdown</a> documents. <a href="r-markdown.html#r-markdown">R Markdown</a> documents. <a href="#R%20Markdown">R Markdown</a> documents.</p>
<!-- ======================================================= -->
</div>
<div id="r-notebooks" class="section level3 unnumbered">
<h3>R notebooks<a class="anchor" aria-label="anchor" href="#r-notebooks"><i class="fas fa-link"></i></a>
</h3>
<p>There is no difference between writing in a Rmarkdown vs an R notebook. However the execution of the document differs slightly. See this <a href="http://uc-r.github.io/r_notebook">site</a> for more details.</p>
<!-- ======================================================= -->
</div>
<div id="r-shiny" class="section level3 unnumbered">
<h3>R Shiny<a class="anchor" aria-label="anchor" href="#r-shiny"><i class="fas fa-link"></i></a>
</h3>
<p>Shiny apps are contained within one script, which must be named <code>app.R</code>. This file has three components:</p>
<ol style="list-style-type: decimal">
<li>A user interface (ui)<br>
</li>
<li>A server function<br>
</li>
<li>A call to the <code>shinyApp</code> function</li>
</ol>
<p>See the handbook page on Shiny basics, or this online tutorial: <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Shiny tutorial</a></p>
<p><em>In older times, the above file was split into two files (<code>ui.R</code> and <code>server.R</code>)</em></p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="workingdirectory" class="section level2" number="1.6">
<h2>
<span class="header-section-number">1.6</span> Working directory<a class="anchor" aria-label="anchor" href="#workingdirectory"><i class="fas fa-link"></i></a>
</h2>
<p><strong>The working directory is the root folder location used by R for your work - where R looks for and saves files by default.</strong></p>
<p>By default, it will save new files and outputs to this location, and will look for files to import (e.g. datasets) here as well.</p>
<p>The working directory appears in grey text at the top of the RStudio Console pane. You can also return the current working directory with <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> (do not put anything in the parentheses).</p>
<p><em>NOTE: If using an R project, the working directory will default to the R project root folder <strong>IF</strong> you open RStudio by clicking open the R project (the file with .rproj extension))</em></p>
<!-- ======================================================= -->
<div id="filepaths" class="section level3" number="1.6.1">
<h3>
<span class="header-section-number">1.6.1</span> Filepaths<a class="anchor" aria-label="anchor" href="#filepaths"><i class="fas fa-link"></i></a>
</h3>
<p>Perhaps the most common source of frustration for an R beginner on a Windows machine - typing in a filepath to import data.</p>
<ol style="list-style-type: decimal">
<li><p>Use <strong>here</strong> - Avoid these problems altogether by using relative pathways from the root of an R project that uses the <strong>here</strong> package. See the <strong>here</strong> tab in this Basics page for more details.</p></li>
<li><p><strong>Slashes</strong> - If typing in a filepath, beware the direction of the slashes. Enter them using <em>forward slashes</em> to separate components (“data/provincial.csv”). For Windows users, the default way that filepaths are displayed and copied is with <em>backslashes</em> (“\”) - so this means you must go change the direction of each slash. Or just use <strong>here</strong> and an R project as noted above.</p></li>
<li><p>Avoid using “absolute” paths - these are “full address” paths that direct to the same place regardless of the user’s working directory. For example:</p></li>
</ol>
<pre><code>C:/Users/Name/Document/Analytic Software/R/Projects/Analysis2019/data/March2019.csv  </code></pre>
<p>This path <strong>will break</strong> if the script is sent to someone on another computer! Instead, consider using an R project and having the filepath begin at that root directory (i.e. the working directory of the R project).</p>
<p>One possible exception is if working in a larger organization where you need to pull data from across several networked drives and don’t have permission to re-save the data in your R project. This can get tenuous, but it may be best to use these full absolute filepaths.</p>
<!-- ======================================================= -->
</div>
<div id="set-by-command" class="section level3" number="1.6.2">
<h3>
<span class="header-section-number">1.6.2</span> Set by command<a class="anchor" aria-label="anchor" href="#set-by-command"><i class="fas fa-link"></i></a>
</h3>
<p>Use the command <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> with the filepath in quotations, for example: <code><a href="https://rdrr.io/r/base/getwd.html">setwd("C:/Documents/R Files")</a></code></p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> If using an RMarkdown script be aware of the following:</span></p>
<p>In an <a href="r-basics.html#rmarkdown">R Markdown</a> script, the default working directory is the folder the Rmarkdown file (<code>.Rmd</code>) is saved to. If you want to change this, you can use <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> as above, but know the change will only apply to that specific code chunk.</p>
<p>To change the working directory for all code chunks in an R markdown, edit the setup chunk to add the <code>root.dir =</code> parameter, such as below:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_knit.html">opts_knit</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>root.dir <span class="op">=</span> <span class="st">'desired/filepath/here'</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="set-manually" class="section level3" number="1.6.3">
<h3>
<span class="header-section-number">1.6.3</span> Set Manually<a class="anchor" aria-label="anchor" href="#set-manually"><i class="fas fa-link"></i></a>
</h3>
<p>Setting your working directory manually (point-and-click)</p>
<p>From RStudio click: Session / Set Working Directory / Choose Directory (you will have to do this each time you open RStudio)</p>
<!-- ======================================================= -->
</div>
<div id="in-an-r-project" class="section level3" number="1.6.4">
<h3>
<span class="header-section-number">1.6.4</span> In an R project<a class="anchor" aria-label="anchor" href="#in-an-r-project"><i class="fas fa-link"></i></a>
</h3>
<p>If you are working in an R project, your working directory will by default be the root folder. This is convenient to maximize with the <strong>here</strong> package (LINK).</p>
<!-- ======================================================= -->
</div>
</div>
<div id="objects" class="section level2" number="1.7">
<h2>
<span class="header-section-number">1.7</span> Objects<a class="anchor" aria-label="anchor" href="#objects"><i class="fas fa-link"></i></a>
</h2>
<p>Everything in R is an object. These sections will explain:</p>
<ul>
<li>How to create objects (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>)</li>
<li>Types of objects (e.g. data frames, vectors..)<br>
</li>
<li>How to access subparts of objects (e.g. variables in a dataset)<br>
</li>
<li>Classes of objects (e.g. numeric, logical, integer, double, character, factor)</li>
</ul>
<!-- ======================================================= --><div id="everything-is-an-object" class="section level3" number="1.7.1">
<h3>
<span class="header-section-number">1.7.1</span> Everything is an object<a class="anchor" aria-label="anchor" href="#everything-is-an-object"><i class="fas fa-link"></i></a>
</h3>
<p>Everything you store in R - datasets, variables, a list of village names, a total population number, even outputs such as graphs - are <strong>objects</strong> which are <strong>assigned a name</strong> and <strong>can be referenced</strong> in later commands.</p>
<p>An object exists when you have assigned it a value (see the assignment section below). When it is assigned a value, the object appears in the Environment (see the upper right pane of RStudio). It can then be operated upon, manipulated, changed, and re-defined.</p>
<!-- ======================================================= -->
</div>
<div id="defining-objects--" class="section level3" number="1.7.2">
<h3>
<span class="header-section-number">1.7.2</span> Defining objects (<code>&lt;-</code>)<a class="anchor" aria-label="anchor" href="#defining-objects--"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Create objects <em>by assigning them a value</em> with the &lt;- operator.</strong><br>
You can think of the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> as the words “is defined as”. Assignment commands generally follow a standard order:</p>
<p><strong>object_name</strong> &lt;- <strong>value</strong> (or process/calculation that produce a value)</p>
<blockquote>
<p><strong>EXAMPLE:</strong> You may want to record the current epidemiological reporting week as an object for reference in later code. In this example, the object <code>reporting_week</code> is created when it is assigned the character value <code>"2018-W10"</code> (the quote marks make these a character value).<br>
The object <code>reporting_week</code> will then appear in the RStudio Environment pane (upper-right) and can be referenced in later commands.</p>
</blockquote>
<p>See the R commands and their output in the boxes below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reporting_week</span> <span class="op">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># this command creates the object reporting_week by assigning it a value</span>
<span class="va">reporting_week</span>                 <span class="co"># this command prints the current value of reporting_week object in the console</span></code></pre></div>
<pre><code>## [1] "2018-W10"</code></pre>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Note the <code>[1]</code> in the R console output is simply indicating that you are viewing the first item of the output</span></p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> <strong>An object’s value can be over-written</strong> at any time by running an assignment command to re-define its value. Thus, the <strong>order of the commands run is very important</strong>.</span></p>
<p>The following command will re-define the value of <code>reporting_week</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reporting_week</span> <span class="op">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># assigns a NEW value to the object reporting_week</span>
<span class="va">reporting_week</span>                 <span class="co"># prints the current value of reporting_week in the console</span></code></pre></div>
<pre><code>## [1] "2018-W51"</code></pre>
<p><strong>Datasets are also objects (“dataframes”) and must be assigned names when they are imported.</strong></p>
<p>In the code below, the object <code>linelist</code> is created and assigned the value of a CSV file imported with the <strong>rio</strong> package.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># linelist is created and assigned the value of the imported CSV file</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"my_linelist.csv"</span><span class="op">)</span></code></pre></div>
<p>You can read more about importing and exporting datasets with the section on <a href="#importdata">importing data</a>.</p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> A quick note on naming of objects:</span></p>
<ul>
<li>Object names must not contain spaces, but you should use underscore (_) or a period (.) instead of a space.<br>
</li>
<li>Object names are case-sensitive (meaning that Dataset_A is different from dataset_A).</li>
<li>Object names must begin with a letter (cannot begin with a number like 1, 2 or 3).</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="objectstructure" class="section level3" number="1.7.3">
<h3>
<span class="header-section-number">1.7.3</span> Object structure<a class="anchor" aria-label="anchor" href="#objectstructure"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Objects can be a single piece of data (e.g. <code>my_number &lt;- 24</code>), or they can consist of structured data.</strong></p>
<p>The graphic below, sourced from <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">this online R tutorial</a> shows some common data structures and their names. Not included in this image is spatial data, which is discussed in the <a href="#gis">GIS section</a>.</p>
<div class="inline-figure"><img src="images/R_data_structures.png" width="75%" height="50%" style="display: block; margin: auto;"></div>
<p>In epidemiology (and particularly field epidemiology), you will <em>most commonly</em> encounter data frames and vectors:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="24%">
<col width="45%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th>Common structure</th>
<th>Explanation</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Vectors</td>
<td>A container for a sequence of singular objects, all of the same class (e.g. numeric, character).</td>
<td>
<strong>“Variables” (columns) in data frames are vectors</strong> (e.g. the variable <code>age_years</code>).</td>
</tr>
<tr class="even">
<td>Data Frames</td>
<td>Vectors (e.g. columns) that are bound together that all have the same number of rows.</td>
<td>
<code>linelist</code> is a data frame.</td>
</tr>
</tbody>
</table></div>
<p>Note that to create a vector that “stands alone”, or is not part of a data frame (such as a list of location names), the function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> is often used:</p>
<p><code>list_of_names &lt;- c("Ruhengeri", "Gisenyi", "Kigali", "Butare")</code></p>
<!-- ======================================================= -->
</div>
<div id="objectclasses" class="section level3" number="1.7.4">
<h3>
<span class="header-section-number">1.7.4</span> Object classes<a class="anchor" aria-label="anchor" href="#objectclasses"><i class="fas fa-link"></i></a>
</h3>
<p>All the objects stored in R have a <em>class</em> which tells R how to handle the object. There are many possible classes, but common ones include:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="7%">
<col width="54%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th>Class</th>
<th>Explanation</th>
<th>Examples</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Character</td>
<td>These are text/words/sentences <strong>“within quotation marks”</strong>. Math cannot be done on these objects.</td>
<td>“Character objects are in quotation marks”</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Numbers that are <strong>whole only</strong> (no decimals)</td>
<td>-5, 14, or 2000</td>
</tr>
<tr class="odd">
<td>Numeric</td>
<td>These are numbers and <strong>can include decimals</strong>. If within quotation marks the will be considered character.</td>
<td>23.1 or 14</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>These are vectors that have a <strong>specified order</strong> or hierarchy of values</td>
<td>Variable <code>msf_involvement</code> with ordered values N, S, SUB, and U.</td>
</tr>
<tr class="odd">
<td>Date</td>
<td>
<strong>Once R is told that certain data are Dates</strong>, these data can be manipulated and displayed in special ways. See the page on Dates for more information.</td>
<td>2018-04-12 or 15/3/1954 or Wed 4 Jan 1980</td>
</tr>
<tr class="even">
<td>Logical</td>
<td>Values must be one of the two special values TRUE or FALSE (note these are <strong>not</strong> “TRUE” and “FALSE” in quotation marks)</td>
<td>TRUE or FALSE</td>
</tr>
<tr class="odd">
<td>data.frame</td>
<td>A data frame is how R stores a <strong>typical dataset</strong>. It consists of vectors (columns) of data bound together, that all have the same number of observations (rows).</td>
<td>The example AJS dataset named <code>linelist_raw</code> contains 68 variables with 300 observations (rows) each.</td>
</tr>
</tbody>
</table></div>
<p><strong>You can test the class of an object by feeding it to the function <code><a href="https://rdrr.io/r/base/class.html">class()</a></code></strong>. Note: you can reference a specific column within a dataset using the <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> notation to separate the name of the dataset and the name of the column.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span>     <span class="co"># class should be numeric</span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span>  <span class="co"># class should be character</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>Sometimes, a column will be converted to a different class automatically by R. Watch out for this! For example, if you have a vector or column of numbers, but a character value is substituted in… the entire column will change to class character.</p>
<p>One common example is when working with a dataframe to print a table - if you make a total row and try paste/glue together percents in the same cell as numbers the entire columns above them will convert to character and can no longer be used for mathematical calculations.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="co"># define vector as all numbers</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_vector</span><span class="op">)</span>          <span class="co"># vector is numeric class</span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_vector</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"three"</span>   <span class="co"># convert the third element to a character</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_vector</span><span class="op">)</span>          <span class="co"># vector is now character class</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p><strong>Sometimes, you will need to convert objects or columns to another class.</strong></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Action</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code></td>
<td>Converts to character class</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code></td>
<td>Converts to numeric class</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/integer.html">as.integer()</a></code></td>
<td>Converts to integer class</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code></td>
<td>Converts to Date class - Note: see section on <a href="#dates">dates</a> for details</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code></td>
<td>Converts to factor - Note: re-defining order of value levels requires extra arguments</td>
</tr>
</tbody>
</table></div>
<p>likewise, there are <strong>base</strong> R functions to check whether an object IS of a specific class, such as <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/character.html">is.character()</a></code>, <code><a href="https://rdrr.io/r/base/double.html">is.double()</a></code>, <code><a href="https://rdrr.io/r/base/factor.html">is.factor()</a></code>, <code><a href="https://rdrr.io/r/base/integer.html">is.integer()</a></code></p>
<p>Here is <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">more online material on classes and data structures in R</a>.</p>
<!-- ======================================================= -->
</div>
<div id="dollarsign" class="section level3" number="1.7.5">
<h3>
<span class="header-section-number">1.7.5</span> Columns/Variables (<code>$</code>)<a class="anchor" aria-label="anchor" href="#dollarsign"><i class="fas fa-link"></i></a>
</h3>
<p>A column in a dataframe is known as a “vector”, or a sequence of values that must all the same class
<strong>Vectors within a data frame (variables in a dataset) can be called, referenced, or created using the <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> symbol.</strong> The <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> symbol connects the name of the column to the name of its data frame. The <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> symbol must be used, otherwise R will not know where to look for or create the column.</p>
<p>In this handbook, we use the word “column” instead of “variable”.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve the length of the vector age_years</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="co"># (age is a variable in the linelist data frame)</span></code></pre></div>
<p>By typing the name of the data frame followed by <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> you will also see a list of all variables in the data frame. You can scroll through them using your arrow key, select one with your Enter key, and avoid spelling mistakes!</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"images"</span>, <span class="st">"Calling_Names.gif"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="images/Calling_Names.gif" width="100%" style="display: block; margin: auto;"></div>
<p><span style="color: darkgreen;"><strong><em>ADVANCED TIP:</em></strong> Some more complex objects (e.g. an <code>epicontacts</code> object may have multiple levels which can be accessed through multiple dollar signs. For example <code>epicontacts$linelist$date_onset</code>) .</span></p>
<!-- ======================================================= -->
</div>
<div id="brackets" class="section level3" number="1.7.6">
<h3>
<span class="header-section-number">1.7.6</span> Access/index with brackets (<code>[]</code>)<a class="anchor" aria-label="anchor" href="#brackets"><i class="fas fa-link"></i></a>
</h3>
<p>You may need to view parts of objects, also called “indexing”, which is often done using the square brackets <code>[ ]</code>. Note: using <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> on a dataframe to access a column is also a type of indexing.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span><span class="op">)</span>  <span class="co"># define the vector</span>
<span class="va">my_vector</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>                                  <span class="co"># print the 5th element</span></code></pre></div>
<pre><code>## [1] "e"</code></pre>
<p>Square brackets also work to return specific parts of an returned output, such as output of a <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># All of the summary</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>##           Min.        1st Qu.         Median           Mean        3rd Qu.           Max.           NA's 
##  0.00000000000  6.00000000000 13.00000000000 16.42396551724 24.00000000000 95.00000000000             88</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Just one part</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>  </code></pre></div>
<pre><code>## 1st Qu. 
##       6</code></pre>
<p>To view specific rows and columns of a dataset, you can do this using the syntax <code>dataframe[rows, columns]</code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># View a specific row (2) from dataset, with all columns</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>

<span class="co"># View all rows, but just one column</span>
<span class="va">linelist</span><span class="op">[</span>, <span class="st">"date_onset"</span><span class="op">]</span>

<span class="co"># View values from row 2 and columns 5 through 10</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> 

<span class="co"># View values from row 2 and columns 5 through 10 and 18</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">18</span><span class="op">)</span><span class="op">]</span> 

<span class="co"># View rows 2 through 20, and specific columns</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># View rows and columns based on criteria</span>
<span class="co"># *** Note the dataframe must still be names in the criteria!</span>
<span class="va">linelist</span><span class="op">[</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">25</span> , <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"date_birth"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Use View() to see the outputs in the RStudio Viewer pane (easier to read) </span>
<span class="co"># *** Note the capital "V" in View() function</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="st">"date_onset"</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Save as a new object</span>
<span class="va">new_table</span> <span class="op">&lt;-</span> <span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span><span class="op">)</span><span class="op">]</span> </code></pre></div>
<p>When indexing an object of class <strong>list</strong>, single brackets always return with with class list, even if only a single object is returned. Double brackets, however, can be used to access a single element and return a different class than list.<br>
Brackets can also be written after one another, as demonstrated below.</p>
<p>This <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">visual explanation with pepper shakers</a> is humorous and helpful.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># define demo list</span>
<span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="co"># First element in the list is a character vector</span>
  hospitals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span><span class="op">)</span>,
  
  <span class="co"># second element in the list is a dataframe of addresses</span>
  address   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
    street <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span><span class="op">)</span>,
    city   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>


<span class="va">my_list</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># this returns the element in class "list"</span></code></pre></div>
<pre><code>## $hospitals
## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># this is a character vector</span></code></pre></div>
<pre><code>## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="st">"hospitals"</span><span class="op">]</span><span class="op">]</span> <span class="co"># you can also index by name of the list element</span></code></pre></div>
<pre><code>## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="co"># this returns the third element of the "hospitals" character vector</span></code></pre></div>
<pre><code>## [1] "Santa Anna"</code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># This returns the first column ("street") of the address dataframe</span></code></pre></div>
<pre><code>##            street
## 1 145 Medical Way
## 2  1048 Brown Ave
## 3   999 El Camino</code></pre>
<!-- ======================================================= -->
</div>
<div id="remove-objects" class="section level3" number="1.7.7">
<h3>
<span class="header-section-number">1.7.7</span> Remove objects<a class="anchor" aria-label="anchor" href="#remove-objects"><i class="fas fa-link"></i></a>
</h3>
<p>You can remove individual objects by putting the name in the <code><a href="https://rdrr.io/r/base/rm.html">rm()</a></code> function (no quote marks):</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">object_name</span><span class="op">)</span></code></pre></div>
<p>You can remove all objects (clear your workspace) by running:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="functions" class="section level2" number="1.8">
<h2>
<span class="header-section-number">1.8</span> Functions<a class="anchor" aria-label="anchor" href="#functions"><i class="fas fa-link"></i></a>
</h2>
<p>This section on functions explains:</p>
<ul>
<li>What a function is and how they work<br>
</li>
<li>What arguments are<br>
</li>
<li>What packages are<br>
</li>
<li>How to get help understanding a function</li>
</ul>
<!-- ======================================================= --><div id="simple-functions" class="section level3" number="1.8.1">
<h3>
<span class="header-section-number">1.8.1</span> Simple functions<a class="anchor" aria-label="anchor" href="#simple-functions"><i class="fas fa-link"></i></a>
</h3>
<p><strong>A function is like a machine that receives inputs, does some action with those inputs, and produces an output.</strong><br>
What the output is depends on the function.</p>
<p><strong>Functions typically operate upon some object placed within the function’s parentheses</strong>.
For example, the function <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt()</a></code> calculates the square root of a number:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">49</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>Functions can also be applied to variables in a dataset. For example, when the function <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> is applied to the numeric variable <code>age</code> in the dataset <code>linelist</code> (<a href="r-basics.html#objects">what’s the <code>$</code> symbol?</a>), the output is a summary of the variable’s numeric and missing values.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>##           Min.        1st Qu.         Median           Mean        3rd Qu.           Max.           NA's 
##  0.00000000000  6.00000000000 13.00000000000 16.42396551724 24.00000000000 95.00000000000             88</code></pre>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> Behind the scenes, a function represents complex additional code that has been wrapped up for the user into one easy command.</span></p>
<!-- ======================================================= -->
</div>
<div id="functions-with-multiple-arguments" class="section level3" number="1.8.2">
<h3>
<span class="header-section-number">1.8.2</span> Functions with multiple arguments<a class="anchor" aria-label="anchor" href="#functions-with-multiple-arguments"><i class="fas fa-link"></i></a>
</h3>
<p>Functions often ask for several inputs, called <strong><em>arguments</em></strong>, located within the parentheses of the function, usually separated by commas.</p>
<ul>
<li>Some arguments are required for the function to work correctly, others are optional.<br>
</li>
<li>Optional arguments have default settings if they are not specified.</li>
<li>Arguments can take character, numeric, logical (TRUE/FALSE), and other inputs.</li>
</ul>
<div class="inline-figure"><img src="images/Function_Bread_Example.png" width="75%" style="display: block; margin: auto;"></div>
<p><strong>For example</strong>, this <code>age_pyramid()</code> command produces an age pyramid graphic based on defined age groups and a binary split column, such as <code>gender</code>. The function is given three arguments within the parentheses, separated by commas. The values supplied to the arguments establish <code>linelist</code> as the data frame to use, <code>age_cat5</code> as the column to count, and <code>gender</code> as the binary column to use for splitting the pyramid by color.</p>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> For this example, linelist comes with a pre-created column called “age_cat5”. To learn how to create new variable see <a href="#newvars">that section of this handbook</a> </span></p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Creates an age pyramid by specifying the dataframe, age group variable, and a variable to split the pyramid</span>
<span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, age_group <span class="op">=</span> <span class="st">"age_cat5"</span>, split_by <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/basics_functions_pyramid-1.png" width="75%" height="75%"></div>
<p>The first half of an argument assignment (e.g. <code>data =</code>) does not need to be specified if the arguments are written in a specific order (specified in the function’s documentation). The below code produces the exact same pyramid as above, because the function expects the argument order: data frame, <code>age_group</code> variable, <code>split_by</code> variable.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This command will produce the exact same graphic as above</span>
<span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span><span class="va">linelist</span>, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span><span class="op">)</span></code></pre></div>
<p><strong>A more complex <code>age_pyramid()</code> command might include the <em>optional</em> arguments to:</strong></p>
<ul>
<li>Show proportions instead of counts (set <code>proportional = TRUE</code> when the default is <code>FALSE</code>)<br>
</li>
<li>Specify the two colors to use (<code>pal =</code> is short for “palette” and is supplied with a vector of two color names. See the <a href="r-basics.html#objectstructure">objects</a> page for how the function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> makes a vector)</li>
</ul>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> For arguments specified with an equals symbol (e.g. <code>coltotals = ...</code>), their order among the arguments is not important (must still be within the parentheses and separated by commas).</span></p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">apyramid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/apyramid/man/age_pyramid.html">age_pyramid</a></span><span class="op">(</span><span class="va">linelist</span>, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span>, proportional <span class="op">=</span> <span class="cn">TRUE</span>, pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"purple"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-14-1.png" width="75%" height="75%"></div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="packages" class="section level2" number="1.9">
<h2>
<span class="header-section-number">1.9</span> Packages<a class="anchor" aria-label="anchor" href="#packages"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Packages contain functions.</strong></p>
<p>An R package is a shareable bundle of code and documentation that contains pre-defined functions. Users in the R community develop and share packages all the time, so chances are likely that a solution exists for you! You will install and use hundreds of packages in your use of R.</p>
<p>On installation, R contains <strong>“base”</strong> functions that perform common elementary tasks. But many R users create specialized functions, which are verified by the R community and which you can download as a <strong>package</strong> for your own use. In this handbook, package names are written in <strong>bold</strong>. One of the more challenging aspects of R is that there are often many functions or packages to choose from to complete a given task.</p>
<p><strong>Install packages</strong></p>
<p><em>Functions</em> are contained within <strong>packages</strong> which can be downloaded (“installed”) to your computer from the internet. Once a package is downloaded, you access its functions by loading the package with the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> command at the beginning of each R session.</p>
<p>Think of R as your personal library: When you download a package your library gains a book of functions, but each time you want to use a function in that book, you must borrow that book from your library.</p>
<p><strong>CRAN</strong></p>
<p>CRAN (Comprehensive R Archive Network) is a public warehouse of R packages that have been published by R community members. Most often, R users download packages from CRAN.</p>
<p><strong>Install vs. Load</strong></p>
<p>To use a package, 2 steps must be implemented:</p>
<ol style="list-style-type: decimal">
<li>The package must be <strong>installed</strong> (once), <em>and</em><br>
</li>
<li>The package must be <strong>loaded</strong> (each R session)</li>
</ol>
<p>The basic function for installing a package is <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>, where the name of the package is provided <em>in quotes</em>. This can also be accomplished point-and-click by going to the RStudio “Packages” pane and clicking “Install”.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></code></pre></div>
<p>The basic function to <strong>load</strong> a package for use (after it has been installed) is <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>, with the name of the package <em>NOT in quotes</em>.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p><strong>Using pacman</strong></p>
<p>This handbook uses the package <strong>pacman</strong> (abbreviation for “package manager”), which offers the useful function <code>p_load()</code>. This function combines the above two steps into one - it <em>installs and/or loads packages</em>, depending on what is needed. If the package has not yet been installed, it will attempt to install from CRAN, and then load it.</p>
<p>Below, we load some of the packages used in this R basics page:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span>, <span class="va">rio</span>, <span class="va">here</span><span class="op">)</span></code></pre></div>
<p>The function <code>p_isinstalled()</code> will test whether packages are installed already.</p>
<p><strong>Install from github</strong></p>
<p>Sometimes, you need to install the <em>development version</em> of a package, from a github repository. You can use <code>p_load_gh()</code> from <strong>pacman</strong> (this function is a wrapper around <code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github()</a></code> from <strong>devtools</strong>).</p>
<p>The first name listed in the quotation marks is the Github ID of the repository owner, and after the slash is the name of the repository. If you want to install from a branch other than the main/master branch, add it after an “@”.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install development version of package from github repository</span>
<span class="fu">p_install_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts"</span><span class="op">)</span>

<span class="co"># load development version of package which you had downloaded from github repository</span>
<span class="fu">p_load_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts"</span><span class="op">)</span></code></pre></div>
<p>Read more about <strong>pacman</strong> <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">here</a></p>
<p><strong>Install from ZIP or TAR</strong></p>
<p>You could get the package from a URL:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">packageurl</span> <span class="op">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">packageurl</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></code></pre></div>
<p>Or download it to your computer in a zipped file:</p>
<p>Option 1:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_local</a></span><span class="op">(</span><span class="st">"~/Downloads/dplyr-master.zip"</span><span class="op">)</span></code></pre></div>
<p>Option 2:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">path_to_source</span>, repos <span class="op">=</span> <span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"~/Downloads/dplyr-master.zip"</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></code></pre></div>
<p><strong>Delete packages</strong></p>
<p>Use <code>p_delete()</code> from <strong>pacman</strong>, or <code><a href="https://rdrr.io/r/utils/remove.packages.html">remove.packages()</a></code> from <strong>base</strong> R. Alternatively, go find the folder which contains your library and manually delete the folder.</p>
<p><strong>Dependencies</strong></p>
<p>Packages often depend on other packages to work. These are called dependencies. If a dependency fails to install, then the package depending on it may also fail to install.</p>
<p>See the dependencies of a package with <code>p_depends()</code>, and see which packages depend on it with <code>p_depends_reverse()</code></p>
<p><strong>Masked functions</strong></p>
<p>It is not uncommon that two or more packages contain the same function name. For example, the package <strong>dplyr</strong> has a <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> function, but so does the package <strong>stats</strong>. The default <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> function depends on the order these packages are first loaded in the R session - the later one will be the default for the command <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>.</p>
<p>You can check the order in your Environment pane of R Studio - click the drop-down for “Global Environment” and see the order of the packages. Functions from packages <em>lower</em> on that drop-down list will mask functions of the same name in packages that appear highest in the drop-down list. When first loading a package, R will warn you in the console if masking is occurring, but this can be easy to miss.</p>
<div class="inline-figure"><img src="images/masking_functions.png" width="50%" style="display: block; margin: auto;"></div>
<p>Here are ways you can fix masking:</p>
<ol style="list-style-type: decimal">
<li>Specify the package name in the command. For example, use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code><br>
</li>
<li>Re-arrange the order in which the packages are loaded (e.g. within <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> or <code>p_load()</code>), and start a new R session</li>
</ol>
<p><strong>Detach / unload</strong></p>
<p>To detach a package, use this command, with the correct package name:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">package</span><span class="op">:</span><span class="va">PACKAGE_NAME_HERE</span>, unload<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><strong>Packages in code</strong></p>
<p>For clarity in this handbook, functions are usually preceeded by the name of their package using the <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> symbol in the following way:<br><code>package_name::function_name()</code></p>
<p>Once a package is loaded for a session, this explicit style is not necessary. One can just use <code>function_name()</code>. However giving the package name is useful when a function name is common and may exist in multiple packages (e.g. <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>).<br>
Using the package name will also load the package if it is not already loaded.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This command uses the package "rio" and its function "import()" to import a dataset</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist.xlsx"</span>, which <span class="op">=</span> <span class="st">"Sheet1"</span><span class="op">)</span></code></pre></div>
<p><strong>Installing older versions of packages</strong></p>
<p>See this <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">guide</a></p>
<p><strong>Function help</strong></p>
<p>To read more about a function, you can search for it in the Help tab of the lower-right RStudio. You can also run a command like <code>?thefunctionname</code> (put the name of the function after a question mark) and the Help page will appear in the Help pane. Finally, try searching online for resources.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
<div id="piping" class="section level2" number="1.10">
<h2>
<span class="header-section-number">1.10</span> Piping (<code>%&gt;%</code>)<a class="anchor" aria-label="anchor" href="#piping"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Two general approaches to working with objects are:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Tidyverse/piping</strong> - sends an object from function to function - emphasizes the <em>action</em>, not the object<br>
</li>
<li>
<strong>Define intermediate objects</strong> - emphasis the object, as it is re-defined again and again</li>
</ol>
<!-- ======================================================= --><div id="pipes" class="section level3" number="1.10.1">
<h3>
<span class="header-section-number">1.10.1</span> <strong>Pipes</strong><a class="anchor" aria-label="anchor" href="#pipes"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Simply explained, the pipe operator (<code>%&gt;%</code>) passes an intermediate output from one function to the next.</strong><br>
You can think of it as saying “then”. Many functions can be linked together with <code>%&gt;%</code>.</p>
<ul>
<li>
<strong>Piping emphasizes a sequence of actions, not the object the actions are being performed on</strong><br>
</li>
<li>Best when a sequence of actions must be performed on one object<br>
</li>
<li>Pipes come from the package <strong>magrittr</strong>, which is automatically included in packages <strong>dplyr</strong> and <strong>tidyverse</strong>
</li>
<li>Makes code more clean and easier to read, intuitive</li>
</ul>
<p>Read more on this approach in the tidyverse <a href="https://style.tidyverse.org/pipes.html">style guide</a></p>
<p>Example:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># A fake example of how to bake a care using piping syntax</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="va">flour</span> <span class="op">%&gt;%</span>       <span class="co"># to define cake, start with flour, and then...</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">eggs</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># add eggs</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">oil</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co"># add oil</span>
  <span class="fu">left_join</span><span class="op">(</span><span class="va">water</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># add water</span>
  <span class="fu">mix_together</span><span class="op">(</span>utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>                <span class="co"># mix together</span>
  <span class="fu">bake</span><span class="op">(</span>degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># bake</span>
  <span class="fu">let_cool</span><span class="op">(</span><span class="op">)</span>            <span class="co"># let it cool down</span></code></pre></div>
<p>Here is another <a href="https://cfss.uchicago.edu/notes/pipes/#:~:text=Pipes%20are%20an%20extremely%20useful,code%20and%20combine%20multiple%20operations">link</a> describing the utility of pipes.</p>
<p>Piping is not a <strong>base</strong> function. To use piping, the <strong>magrittr</strong> package must be installed and loaded (this is typically done by loading <strong>tidyverse</strong> or <strong>dplyr</strong> package). You can <a href="https://magrittr.tidyverse.org/">read more about piping in the magrittr documentation</a>.</p>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> Remember that even when using piping to link functions, if the assignment operator (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>) is present, the object to the left will still be over-written (re-defined) by the right side.</span></p>
<p><strong><code>%&lt;&gt;%</code></strong><br>
This is an “assignment pipe” from the <strong>magritter</strong> package, which pipes an object forward and also re-defines the object. It must be the first pipe operator in the chain. It is shorthand, so <code>object %&lt;&gt;% function() %&gt;% function()</code> is the same as <code>object &lt;- object %&gt;% function() %&gt;% function()</code>.</p>
<!-- ======================================================= -->
</div>
<div id="define-intermediate-objects" class="section level3" number="1.10.2">
<h3>
<span class="header-section-number">1.10.2</span> Define intermediate objects<a class="anchor" aria-label="anchor" href="#define-intermediate-objects"><i class="fas fa-link"></i></a>
</h3>
<p>This approach to changing objects/dataframes may be better if:</p>
<ul>
<li>You need to manipulate multiple objects<br>
</li>
<li>There are intermediate steps that are meaningful and deserve separate object names</li>
</ul>
<p><strong>Risks:</strong></p>
<ul>
<li>Creating new objects for each step means creating lots of objects. If you use the wrong one you might not realize it!<br>
*Naming all the objects can be confusing<br>
</li>
<li>Errors may not be easily detectable</li>
</ul>
<p>Either name each intermediate object, or overwrite the original, or combine all the functions together. All come with their own risks.</p>
<p>Below are some examples:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># a fake example of how to bake a cake using this method (defining intermediate objects)</span>
<span class="va">batter_1</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">flour</span>, <span class="va">eggs</span><span class="op">)</span>
<span class="va">batter_2</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">batter_1</span>, <span class="va">oil</span><span class="op">)</span>
<span class="va">batter_3</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">batter_2</span>, <span class="va">water</span><span class="op">)</span>

<span class="va">batter_4</span> <span class="op">&lt;-</span> <span class="fu">mix_together</span><span class="op">(</span>object <span class="op">=</span> <span class="va">batter_3</span>, utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">bake</span><span class="op">(</span><span class="va">batter_4</span>, degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">let_cool</span><span class="op">(</span><span class="va">cake</span><span class="op">)</span></code></pre></div>
<p>Combine all functions together - also difficult to read</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># an example of combining/nesting mutliple functions together - difficult to read</span>
<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">let_cool</span><span class="op">(</span><span class="fu">bake</span><span class="op">(</span><span class="fu">mix_together</span><span class="op">(</span><span class="va">batter_3</span>, utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="operators" class="section level2" number="1.11">
<h2>
<span class="header-section-number">1.11</span> Key operators and functions<a class="anchor" aria-label="anchor" href="#operators"><i class="fas fa-link"></i></a>
</h2>
<p>This section details operators in R, such as:</p>
<ul>
<li>Definitional operators<br>
</li>
<li>Relational operators (less than, equal too..)<br>
</li>
<li>Logical operators (and, or…)<br>
</li>
<li>Handling missing values<br>
</li>
<li>Mathematical operators and functions (+/-, &gt;, sum(), median(), …)<br>
</li>
<li>The <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> operator</li>
</ul>
<!-- ======================================================= --><div id="assignment-operators" class="section level3" number="1.11.1">
<h3>
<span class="header-section-number">1.11.1</span> Assignment operators<a class="anchor" aria-label="anchor" href="#assignment-operators"><i class="fas fa-link"></i></a>
</h3>
<p><strong><code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code></strong></p>
<p>The basic assignment operator in R is <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>. Such that <code>object_name &lt;- value</code> (see R Basics tab on “Defining an Object”).<br>
This assignment operator can also be written as <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>. We advise use of <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> for general R use.<br>
We also advise surrounding operators with spaces, for readability.</p>
<p><strong><code><a href="https://rdrr.io/r/base/assignOps.html">&lt;&lt;-</a></code></strong></p>
<p>If writing functions (LINK TO PAGE), or using R in an interactive way with sourced scripts (LINK TO PAGE), then you may need to use this assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;&lt;-</a></code> (<strong>base</strong> R). This operator is used to define an object in a higher ‘parent’ R <code>Environment</code> (LINK to tab on R environments). Also see this <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">online reference</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>This is an “assignment pipe” from the <strong>magritter</strong> package, which pipes an object forward and also re-defines the object. It must be the first pipe operator in the chain. It is shorthand, so <code>object %&lt;&gt;% function() %&gt;% function()</code> is the same as <code>object &lt;- object %&gt;% function() %&gt;% function()</code>.</p>
<p><strong><code>%&lt;+%</code></strong></p>
<p>Used to add data to phylogenetic trees with the <strong>ggtree</strong> package. See the (LINK TO PAGE) or this online <a href="https://yulab-smu.top/treedata-book/">resource book</a>.</p>
<!-- ======================================================= -->
</div>
<div id="relational-and-logical-operators" class="section level3" number="1.11.2">
<h3>
<span class="header-section-number">1.11.2</span> Relational and logical operators<a class="anchor" aria-label="anchor" href="#relational-and-logical-operators"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Relational operators compare values</strong> and are often used when defining new variables and subsets of datasets. Here are the common relational operators in R:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="30%">
<col width="16%">
<col width="17%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Operator</th>
<th>Example</th>
<th>Example Result</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code></td>
<td><code>"A" == "a"</code></td>
<td>
<code>FALSE</code> (because R is case sensitive) <em>Note that == (double equals) is different from = (single equals), which acts like the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code></em>
</td>
</tr>
<tr class="even">
<td>Not equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>Greater than</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Less than</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Greater than or equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Less than or equal to</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Value is missing</td>
<td><code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code></td>
<td><code><a href="https://rdrr.io/r/base/NA.html">is.na(7)</a></code></td>
<td>
<code>FALSE</code> (see section on missing values)</td>
</tr>
<tr class="even">
<td>Value is not missing</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table></div>
<p><strong>Logical operators, such as AND and OR, are often used to connect relational operators and create more complicated criteria</strong>. Complex statements might require parentheses ( ) for grouping and order of application.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Function</th>
<th>Operator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td><code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code></td>
</tr>
<tr class="even">
<td>OR</td>
<td>
<code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> (vertical bar)</td>
</tr>
<tr class="odd">
<td>Parentheses</td>
<td>
<code>( )</code> Used to group criteria together and clarify order</td>
</tr>
</tbody>
</table></div>
<p>For example, below, we have a linelist with two variables we want to use to create our case definition, <code>hep_e_rdt</code>, a test result and <code>other_cases_in_hh</code>, which will tell us if there are other cases in the household. The command below uses the function <code>case_when()</code> to create the new variable <code>case_def</code> such that:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>case_def <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">hep_e_rdt</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">other_cases_in_hh</span><span class="op">)</span>           <span class="op">~</span> <span class="cn">NA_character_</span>,
    <span class="va">hep_e_rdt</span> <span class="op">==</span> <span class="st">"Positive"</span>                               <span class="op">~</span> <span class="st">"Confirmed"</span>,
    <span class="va">hep_e_rdt</span> <span class="op">!=</span> <span class="st">"Positive"</span> <span class="op">&amp;</span> <span class="va">other_cases_in_hh</span> <span class="op">==</span> <span class="st">"Yes"</span>  <span class="op">~</span> <span class="st">"Probable"</span>,
    <span class="cn">TRUE</span>                                                  <span class="op">~</span> <span class="st">"Suspected"</span>
  <span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="51%">
<col width="48%">
</colgroup>
<thead><tr class="header">
<th>Criteria in example above</th>
<th>Resulting value in new variable “case_def”</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>If the value for variables <code>hep_e_rdt</code> and <code>other_cases_in_hh</code> are missing</td>
<td>
<code>NA</code> (missing)</td>
</tr>
<tr class="even">
<td>If the value in <code>hep_e_rdt</code> is “Positive”</td>
<td>“Confirmed”</td>
</tr>
<tr class="odd">
<td>If the value in <code>hep_e_rdt</code> is NOT “Positive” AND the value in <code>other_cases_in_hh</code> is “Yes”</td>
<td>“Probable”</td>
</tr>
<tr class="even">
<td>If one of the above criteria are not met</td>
<td>“Suspected”</td>
</tr>
</tbody>
</table></div>
<p><em>Note that R is case-sensitive, so “Positive” is different than “positive”…</em></p>
<!-- ======================================================= -->
</div>
<div id="missing-values" class="section level3" number="1.11.3">
<h3>
<span class="header-section-number">1.11.3</span> Missing values<a class="anchor" aria-label="anchor" href="#missing-values"><i class="fas fa-link"></i></a>
</h3>
<p><strong>In R, missing values are represented by the special value <code>NA</code> (a “reserved” value)</strong> (capital letters N and A - not in quotation marks). If you import data that records missing data in another way (e.g. 99, “Missing”, or .), you may want to re-code those values to <code>NA</code>.</p>
<p><strong>To test whether a value is <code>NA</code>, use the special function <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code></strong>, which returns <code>TRUE</code> or <code>FALSE</code>.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rdt_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span><span class="op">)</span>   <span class="co"># two positive cases, one suspected, and one unknown</span>
<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">rdt_result</span><span class="op">)</span>  <span class="co"># Tests whether the value of rdt_result is NA</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>Here is the <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/NA.html">R documentation on missing values</a></p>
<p><strong>Variations on <code>NA</code></strong></p>
<p><code>NA</code> is actually a logical value of length 1. You may also encounter <code>NA_character_</code>, <code>NA_real_</code>, <code>NA_complex_</code>, and <code>NA_integer_</code>, which correspond to specific classes.</p>
<p>The most prominent application of one of these variants in common epidemiology work is using <code>case_when()</code>. The Right-Hand Side (RHS) values must all be of the same class. Thus, if you have character outcomes on the RHS like “Confirmed”, “Suspect”, “Probable” and <code>NA</code> - you will get an error. Instead of <code>NA</code> you must have <code>NA_character_</code>. Likewise for integers, use <code>NA_integer_</code>.</p>
<p><strong><code>NULL</code></strong></p>
<p><code>NULL</code> is the null object in R, often used to represent a list of 0 length. Use <code><a href="https://rdrr.io/r/base/NULL.html">is.null()</a></code> to evaluate this status.</p>
<p>More detail on the difference between <code>NA</code> and <code>NULL</code> is <a href="https://www.r-bloggers.com/2010/04/r-na-vs-null/">here</a></p>
<!-- ======================================================= -->
</div>
<div id="mathematics-and-statistics" class="section level3" number="1.11.4">
<h3>
<span class="header-section-number">1.11.4</span> Mathematics and statistics<a class="anchor" aria-label="anchor" href="#mathematics-and-statistics"><i class="fas fa-link"></i></a>
</h3>
<p>All the operators and functions in this page is automatically available using <strong>base</strong> R.</p>
<div id="mathematical-operators" class="section level4" number="1.11.4.1">
<h4>
<span class="header-section-number">1.11.4.1</span> Mathematical operators<a class="anchor" aria-label="anchor" href="#mathematical-operators"><i class="fas fa-link"></i></a>
</h4>
<p>These are often used to perform addition, division, to create new columns, etc. Below are common mathematical operators in R. Whether you put spaces around the operators is not important.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Example in R</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>addition</td>
<td>2 + 3</td>
</tr>
<tr class="even">
<td>subtraction</td>
<td>2 - 3</td>
</tr>
<tr class="odd">
<td>multiplication</td>
<td>2 * 3</td>
</tr>
<tr class="even">
<td>division</td>
<td>30 / 5</td>
</tr>
<tr class="odd">
<td>exponent</td>
<td>2^3</td>
</tr>
<tr class="even">
<td>order of operations</td>
<td>( )</td>
</tr>
</tbody>
</table></div>
</div>
<div id="mathematical-functions" class="section level4" number="1.11.4.2">
<h4>
<span class="header-section-number">1.11.4.2</span> Mathematical functions<a class="anchor" aria-label="anchor" href="#mathematical-functions"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rounding</td>
<td>round(x, digits = n)</td>
</tr>
<tr class="even">
<td>rounding</td>
<td>janitor::round_half_up(x, digits = n)</td>
</tr>
<tr class="odd">
<td>ceiling (round up)</td>
<td>ceiling(x)</td>
</tr>
<tr class="even">
<td>floor (round down)</td>
<td>floor(x)</td>
</tr>
<tr class="odd">
<td>absolute value</td>
<td>abs(x)</td>
</tr>
<tr class="even">
<td>square root</td>
<td>sqrt(x)</td>
</tr>
<tr class="odd">
<td>exponent</td>
<td>exponent(x)</td>
</tr>
<tr class="even">
<td>natural logarithm</td>
<td>log(x)</td>
</tr>
</tbody>
</table></div>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> uses “banker’s rounding” which rounds up from a .5 only if the upper number is even. Use <code>round_half_up()</code> from <strong>janitor</strong> to consistently round halves up to the nearest whole number. See <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">this</a> </span></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># use the appropriate rounding function for your work</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2 4</code></pre>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/round_half_up.html">round_half_up</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
</div>
<div id="statistical-functions" class="section level4" number="1.11.4.3">
<h4>
<span class="header-section-number">1.11.4.3</span> Statistical functions:<a class="anchor" aria-label="anchor" href="#statistical-functions"><i class="fas fa-link"></i></a>
</h4>
<p><span style="color: orange;"><strong><em>CAUTION:</em></strong> The functions below will by default include missing values in calculations. Missing values will result in an output of NA, unless the argument <code>na.rm=TRUE</code> is specified</span></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>mean (average)</td>
<td>mean(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>median</td>
<td>median(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>standard deviation</td>
<td>sd(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>quantiles*</td>
<td>quantile(x, probs)</td>
</tr>
<tr class="odd">
<td>sum</td>
<td>sum(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>minimum value</td>
<td>min(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>maximum value</td>
<td>max(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>range of numeric values</td>
<td>range(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>summmary**</td>
<td>summary(x)</td>
</tr>
</tbody>
</table></div>
<p><span style="color: red;"><strong><em>DANGER:</em></strong> If providing a vector of numbers to one of the above functions, be sure to wrap the numbers within <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> .</span></p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If supplying raw numbers to a function, wrap them in c()</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span>    <span class="co"># !!! INCORRECT !!!  </span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="co"># CORRECT</span></code></pre></div>
<pre><code>## [1] 5.666666666666667</code></pre>
<ul>
<li>
<code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code>: x is the numeric vector to examine, and probs is a numeric vector with probabilities within 0 and 1.0, e.g <code><a href="https://rdrr.io/r/base/c.html">c(0.5, 0.8, 0.85)</a></code>
** <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>: gives a summary on a numeric vector including mean, median, and common percentiles</li>
</ul>
</div>
<div id="other-useful-functions" class="section level4" number="1.11.4.4">
<h4>
<span class="header-section-number">1.11.4.4</span> Other useful functions:<a class="anchor" aria-label="anchor" href="#other-useful-functions"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objective</th>
<th>Function</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>create a sequence</td>
<td>seq(from, to, by)</td>
<td><code><a href="https://rdrr.io/r/base/seq.html">seq(1, 10, 2)</a></code></td>
</tr>
<tr class="even">
<td>repeat x, n times</td>
<td>rep(x, ntimes)</td>
<td>
<code><a href="https://rdrr.io/r/base/rep.html">rep(1:3, 2)</a></code> or <code><a href="https://rdrr.io/r/base/rep.html">rep(c("a", "b", "c"), 3)</a></code>
</td>
</tr>
<tr class="odd">
<td>subdivide a numeric vector</td>
<td>cut(x, n)</td>
<td><code><a href="https://rdrr.io/r/base/cut.html">cut(linelist$age, 5)</a></code></td>
</tr>
</tbody>
</table></div>
<!-- ======================================================= -->
</div>
</div>
<div id="in" class="section level3" number="1.11.5">
<h3>
<span class="header-section-number">1.11.5</span> <code>%in%</code><a class="anchor" aria-label="anchor" href="#in"><i class="fas fa-link"></i></a>
</h3>
<p>A very useful operator for matching values, and quickly assessing if a value is within a vector or dataframe.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span>

<span class="st">"a"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"h"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>To ask if a value is <strong>not</strong> <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code>, put an exclamation mark (!) <strong>in front</strong> of the logic statement:</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># to negate, put an exclamation in front</span>
<span class="op">!</span><span class="st">"a"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">!</span><span class="st">"h"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> is very useful when using the <strong>dplyr</strong> function <code>case_when()</code> to recode values in a column. For example:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="va">hospital</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"St. Fr."</span>, <span class="st">"Saint Francis"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"St. Francis"</span><span class="op">)</span><span class="op">)</span> <span class="co"># convert to correct spelling</span></code></pre></div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="errors-warnings" class="section level2" number="1.12">
<h2>
<span class="header-section-number">1.12</span> Errors &amp; Warnings<a class="anchor" aria-label="anchor" href="#errors-warnings"><i class="fas fa-link"></i></a>
</h2>
<p>This section explains:</p>
<ul>
<li>General syntax for writing R code<br>
</li>
<li>Code assists<br>
</li>
<li>the difference between errors and warnings</li>
</ul>
<p>Common errors and warnings and their solutions can be found in X section (TODO).
See the handbook page on common errors and warnings.</p>
<!-- ======================================================= -->
<div id="error-versus-warning" class="section level3" number="1.12.1">
<h3>
<span class="header-section-number">1.12.1</span> Error versus Warning<a class="anchor" aria-label="anchor" href="#error-versus-warning"><i class="fas fa-link"></i></a>
</h3>
<p>When a command is run, the R Console may show you warning or error messages in red text.</p>
<ul>
<li><p>A <strong>warning</strong> means that R has completed your command, but had to take additional steps or produced unusual output that you should be aware of.</p></li>
<li><p>An <strong>error</strong> means that R was not able to complete your command.</p></li>
</ul>
<p>Look for clues:</p>
<ul>
<li><p>The error/warning message will often include a line number for the problem.</p></li>
<li><p>If an object “is unknown” or “not found”, perhaps you spelled it incorrectly, forgot to call a package with library(), or forgot to re-run your script after making changes.</p></li>
</ul>
<p>If all else fails, copy the error message into Google along with some key terms - chances are that someone else has worked through this already!</p>
<!-- ======================================================= -->
</div>
<div id="general-syntax-tips" class="section level3" number="1.12.2">
<h3>
<span class="header-section-number">1.12.2</span> General syntax tips<a class="anchor" aria-label="anchor" href="#general-syntax-tips"><i class="fas fa-link"></i></a>
</h3>
<p>A few things to remember when writing commands in R, to avoid errors and warnings:</p>
<ul>
<li>Always close parentheses - tip: count the number of opening “(” and closing parentheses “)” for each code chunk</li>
<li>Avoid spaces in column and object names. Use underscore ( _ ) or periods ( . ) instead</li>
<li>Keep track of and remember to separate a function’s arguments with commas</li>
<li>R is case-sensitive, meaning <code>Variable_A</code> is <em>different</em> from <code>variable_A</code>
</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="code-assists" class="section level3" number="1.12.3">
<h3>
<span class="header-section-number">1.12.3</span> Code assists<a class="anchor" aria-label="anchor" href="#code-assists"><i class="fas fa-link"></i></a>
</h3>
<p>Any script (RMarkdown or otherwise) will give clues when you have made a mistake. For example, if you forgot to write a comma where it is needed, or to close a parentheses, RStudio will raise a flag on that line, on the right side of the script, to warn you.</p>
<p>(/images/Warnings_and_Errors.png)</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="recommended-training" class="section level2" number="1.13">
<h2>
<span class="header-section-number">1.13</span> Recommended training<a class="anchor" aria-label="anchor" href="#recommended-training"><i class="fas fa-link"></i></a>
</h2>
<div id="resources-within-rstudio" class="section level3" number="1.13.1">
<h3>
<span class="header-section-number">1.13.1</span> Resources within RStudio<a class="anchor" aria-label="anchor" href="#resources-within-rstudio"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Help documentation</strong></p>
<p>Search the RStudio “Help” tab for documentation on packages and specific functions. This is within the pane that also contains Files, Plots, and Packages (typically in the lower-right pane). As a shortcut, you can also type the name of a package or function into the R console after a question-mark to open the relevant Help page. For example: <code><a href="https://rdrr.io/r/stats/filter.html">?filter</a></code> or <code>?diagrammeR</code>.</p>
<p><strong>Interactive tutorials</strong></p>
<p>RStudio has built-in interative tutorials via the <strong>learnr</strong> package. If this package is installed, you can go through these tutorials via the “Tutorial” tab in the upper-right RStudio pane (which also contains Environment and History tabs).</p>
</div>
<div id="cheatsheets" class="section level3" number="1.13.2">
<h3>
<span class="header-section-number">1.13.2</span> Cheatsheets<a class="anchor" aria-label="anchor" href="#cheatsheets"><i class="fas fa-link"></i></a>
</h3>
<p>This is an online R resource specifically for <a href="https://jules32.github.io/r-for-excel-users/vlookup.html">Excel users</a></p>
<p>There are many cheatsheets available on the <a href="https://rstudio.com/resources/cheatsheets/">RStudio website</a>, for example:</p>
<ul>
<li>Factors with <strong>forcats</strong> package<br>
</li>
<li>Dates and times with <strong>lubridate</strong> package<br>
</li>
<li>Strings with <strong>stringr</strong> pacage<br>
</li>
<li>“apply” functions with <strong>purrr</strong> package<br>
</li>
<li>Data import cheatsheet<br>
</li>
<li>Data transformation cheatsheet with <strong>dplyr</strong> package<br>
</li>
<li>R Markdown<br>
</li>
<li>Shiny<br>
</li>
<li>Data viz with <strong>ggplot2</strong> package<br>
</li>
<li>Cartography<br>
</li>
<li>
<strong>leaflet</strong> package</li>
<li>Python with R (<strong>reticulate</strong> package)</li>
</ul>
</div>
<div id="free-online-books" class="section level3" number="1.13.3">
<h3>
<span class="header-section-number">1.13.3</span> Free online books<a class="anchor" aria-label="anchor" href="#free-online-books"><i class="fas fa-link"></i></a>
</h3>
<p>A definitive text is the <a href="https://r4ds.had.co.nz/">R for Data Science</a> book by Garrett Grolemund and Hadley Wickham</p>
<!-- ======================================================= -->
</div>
<div id="courses" class="section level3" number="1.13.4">
<h3>
<span class="header-section-number">1.13.4</span> Courses<a class="anchor" aria-label="anchor" href="#courses"><i class="fas fa-link"></i></a>
</h3>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html">Welcome - THIS IS A DRAFT</a></div>
<div class="next"><a href="r-markdown.html"><span class="header-section-number">2</span> R Markdown</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-basics"><span class="header-section-number">1</span> R Basics</a></li>
<li><a class="nav-link" href="#overview"><span class="header-section-number">1.1</span> Overview</a></li>
<li><a class="nav-link" href="#why-use-r"><span class="header-section-number">1.2</span> Why use R?</a></li>
<li>
<a class="nav-link" href="#install"><span class="header-section-number">1.3</span> Installation</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#other-software-you-may-need-to-install"><span class="header-section-number">1.3.1</span> Other software you may need to install</a></li></ul>
</li>
<li>
<a class="nav-link" href="#rstudio"><span class="header-section-number">1.4</span> RStudio</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rstudio-orientation"><span class="header-section-number">1.4.1</span> RStudio Orientation</a></li>
<li><a class="nav-link" href="#rstudio-settings"><span class="header-section-number">1.4.2</span> RStudio settings</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#scripts"><span class="header-section-number">1.5</span> Scripts</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rmarkdown">Rmarkdown</a></li>
<li><a class="nav-link" href="#r-notebooks">R notebooks</a></li>
<li><a class="nav-link" href="#r-shiny">R Shiny</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#workingdirectory"><span class="header-section-number">1.6</span> Working directory</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#filepaths"><span class="header-section-number">1.6.1</span> Filepaths</a></li>
<li><a class="nav-link" href="#set-by-command"><span class="header-section-number">1.6.2</span> Set by command</a></li>
<li><a class="nav-link" href="#set-manually"><span class="header-section-number">1.6.3</span> Set Manually</a></li>
<li><a class="nav-link" href="#in-an-r-project"><span class="header-section-number">1.6.4</span> In an R project</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#objects"><span class="header-section-number">1.7</span> Objects</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#everything-is-an-object"><span class="header-section-number">1.7.1</span> Everything is an object</a></li>
<li><a class="nav-link" href="#defining-objects--"><span class="header-section-number">1.7.2</span> Defining objects (&lt;-)</a></li>
<li><a class="nav-link" href="#objectstructure"><span class="header-section-number">1.7.3</span> Object structure</a></li>
<li><a class="nav-link" href="#objectclasses"><span class="header-section-number">1.7.4</span> Object classes</a></li>
<li><a class="nav-link" href="#dollarsign"><span class="header-section-number">1.7.5</span> Columns/Variables ($)</a></li>
<li><a class="nav-link" href="#brackets"><span class="header-section-number">1.7.6</span> Access/index with brackets ([])</a></li>
<li><a class="nav-link" href="#remove-objects"><span class="header-section-number">1.7.7</span> Remove objects</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#functions"><span class="header-section-number">1.8</span> Functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#simple-functions"><span class="header-section-number">1.8.1</span> Simple functions</a></li>
<li><a class="nav-link" href="#functions-with-multiple-arguments"><span class="header-section-number">1.8.2</span> Functions with multiple arguments</a></li>
</ul>
</li>
<li><a class="nav-link" href="#packages"><span class="header-section-number">1.9</span> Packages</a></li>
<li>
<a class="nav-link" href="#piping"><span class="header-section-number">1.10</span> Piping (%&gt;%)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#pipes"><span class="header-section-number">1.10.1</span> Pipes</a></li>
<li><a class="nav-link" href="#define-intermediate-objects"><span class="header-section-number">1.10.2</span> Define intermediate objects</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#operators"><span class="header-section-number">1.11</span> Key operators and functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#assignment-operators"><span class="header-section-number">1.11.1</span> Assignment operators</a></li>
<li><a class="nav-link" href="#relational-and-logical-operators"><span class="header-section-number">1.11.2</span> Relational and logical operators</a></li>
<li><a class="nav-link" href="#missing-values"><span class="header-section-number">1.11.3</span> Missing values</a></li>
<li><a class="nav-link" href="#mathematics-and-statistics"><span class="header-section-number">1.11.4</span> Mathematics and statistics</a></li>
<li><a class="nav-link" href="#in"><span class="header-section-number">1.11.5</span> %in%</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#errors-warnings"><span class="header-section-number">1.12</span> Errors &amp; Warnings</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#error-versus-warning"><span class="header-section-number">1.12.1</span> Error versus Warning</a></li>
<li><a class="nav-link" href="#general-syntax-tips"><span class="header-section-number">1.12.2</span> General syntax tips</a></li>
<li><a class="nav-link" href="#code-assists"><span class="header-section-number">1.12.3</span> Code assists</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#recommended-training"><span class="header-section-number">1.13</span> Recommended training</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#resources-within-rstudio"><span class="header-section-number">1.13.1</span> Resources within RStudio</a></li>
<li><a class="nav-link" href="#cheatsheets"><span class="header-section-number">1.13.2</span> Cheatsheets</a></li>
<li><a class="nav-link" href="#free-online-books"><span class="header-section-number">1.13.3</span> Free online books</a></li>
<li><a class="nav-link" href="#courses"><span class="header-section-number">1.13.4</span> Courses</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Handbook for Epidemiologists</strong>" was written by the handbook team. It was last built on 2021-02-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
