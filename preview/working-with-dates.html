<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1 Working with dates | The Epidemiologist R Handbook</title>
<meta name="author" content="the handbook team">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.15/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Epidemiologist R Handbook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Preview pages</li>
<li><a class="active" href="working-with-dates.html"><span class="header-section-number">1</span> Working with dates</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="working-with-dates" class="section level1" number="1">
<h1>
<span class="header-section-number">1</span> Working with dates<a class="anchor" aria-label="anchor" href="#working-with-dates"><i class="fas fa-link"></i></a>
</h1>
<!-- ======================================================= -->
<div id="overview" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview"><i class="fas fa-link"></i></a>
</h2>
<p>Working with dates in R is notoriously difficult when compared to other object classes. R often interprets dates as character objects - this means they cannot be used for general date operations such as making time series and calculating time intervals. To make matters more difficult, there are many date formats, some of which can be confused for other formats. Luckily, dates can be wrangled easily with practice, and with a set of helpful packages.</p>
<p>Dates in R are their own class of object - the <code>Date</code> class. It should be noted that there is also a class that stores objects with date <em>and</em> time. Date time objects are formally referred to as and/or <code>POSIXt</code>, <code>POSIXct</code>, and/or <code>POSIXlt</code> classes (the difference isn’t important). These objects are informally referred to as <em>datetime</em> classes.</p>
<ul>
<li>It is important to make R recognize when a column contains dates.<br>
</li>
<li>Dates are an object class and can be tricky to work with.<br>
</li>
<li>Here we present several ways to convert date columns to Date class.</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="preparation" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Preparation<a class="anchor" aria-label="anchor" href="#preparation"><i class="fas fa-link"></i></a>
</h2>
<div id="load-packages" class="section level3 unnumbered">
<h3>Load packages<a class="anchor" aria-label="anchor" href="#load-packages"><i class="fas fa-link"></i></a>
</h3>
<p>This code chunk shows the loading of packages required for this page. In this handbook we emphasize <code>p_load()</code> from <strong>pacman</strong>, which installs the package if necessary and loads it for use. You can also load packages with <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> from <strong>base</strong> R. See the page on [R basics] for more information on R packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Checks if package is installed, installs if necessary, and loads package for current session</span>

<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span>
  <span class="va">aweek</span>,      <span class="co"># flexibly converts dates to weeks, and vis-versa</span>
  <span class="va">lubridate</span>,  <span class="co"># for conversions to months, years, etc.</span>
  <span class="va">linelist</span>,   <span class="co"># function to guess messy dates</span>
  <span class="va">ISOweek</span>,    <span class="co"># another option for creating weeks</span>
  <span class="va">tidyverse</span><span class="op">)</span>  <span class="co"># data management and visualization  </span></code></pre></div>
</div>
<div id="import-data" class="section level3 unnumbered">
<h3>Import data<a class="anchor" aria-label="anchor" href="#import-data"><i class="fas fa-link"></i></a>
</h3>
<p>We import the dataset of cases from a simulated Ebola epidemic. If you want to download the data to follow along step-by-step, see instruction in the [Datasets used] page.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.xlsx"</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="current-date-and-time" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> Current date and time<a class="anchor" aria-label="anchor" href="#current-date-and-time"><i class="fas fa-link"></i></a>
</h2>
<p>You can get the system date or system datetime by doing the following with <strong>base</strong> R.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the system date - this is a DATE class</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-03-11"</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the system time - this is a DATETIME class</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-03-11 18:03:41 EST"</code></pre>
<p>With the <strong>lubridate</strong> package these can also be returned with <code>today()</code> and <code>now()</code>, respectively. <code><a href="https://rdrr.io/r/base/date.html">date()</a></code> returns the current date and time with weekday and month names.</p>
<!-- ======================================================= -->
</div>
<div id="convert-to-date-class" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> Convert to Date class<a class="anchor" aria-label="anchor" href="#convert-to-date-class"><i class="fas fa-link"></i></a>
</h2>
<div id="as.date" class="section level3 unnumbered">
<h3>
<code>as.Date()</code><a class="anchor" aria-label="anchor" href="#as.date"><i class="fas fa-link"></i></a>
</h3>
<p>The standard, <strong>base</strong> R function to convert an object or column to class Date is <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> (note capitalization of “D”).</p>
<p><code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> requires that the user <em>specify the <strong>existing</strong> format of the date</em>, so it can understand, convert, and store each element (day, month, year, etc.) correctly. <a href="https://www.stat.berkeley.edu/~s133/dates.html">Read more online about <code>as.Date()</code></a>.</p>
<p><strong>If used on a column, <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> therefore requires that all the character date values be in the same format before converting.</strong> If your data are messy and have varying date formats in the same column, try cleaning them manually or consider using <code>guess_dates()</code> from the <strong>linelist</strong> package.</p>
<p>If you are unsure of confused about the class of your data (e.g. POSIXct, etc.) it can be easiest to first convert the column to class Character with <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code>, and then convert it to class Date.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># With pipes</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span>

<span class="co"># In base R</span>
<span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span><span class="op">)</span></code></pre></div>
<p>Now, your data may look like “1989-12-30” or “05/06/2014”, but they are still character values and not class Date. To convert the column from character values into date values, using the <strong>base</strong> R function <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>.</p>
<p>Within the <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> function, you use the <code>format =</code> argument to tell R the <em>current</em> format of the date components - which characters refer to the month, the day, and the year, and how they are separated. If your values are already in one of R’s standard date formats (YYYY-MM-DD or YYYY/MM/DD) the <code>format =</code> argument is not necessary.</p>
<p>Specify to <code>format =</code> the pattern using the special abbreviations below, as a character string (in quotes).</p>
<p>For example, if your character dates are in the format DD/MM/YYYY, like “24/04/1968”, then your command to turn the values into dates will be as below. <strong>Putting the format in quotation marks is necessary.</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="working-with-dates.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using pipes</span></span>
<span id="cb8-2"><a href="working-with-dates.html#cb8-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="working-with-dates.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_onset =</span> <span class="fu">as.Date</span>(date_of_onset, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>))</span>
<span id="cb8-4"><a href="working-with-dates.html#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="working-with-dates.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Using base R</span></span>
<span id="cb8-6"><a href="working-with-dates.html#cb8-6" aria-hidden="true" tabindex="-1"></a>linelist<span class="sc">$</span>date_onset <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(linelist<span class="sc">$</span>date_of_onset, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>)<span class="er">)</span></span></code></pre></div>
<p>Most of the abbreviations are listed below:</p>
<p>%d = Day number of month (5, 17, 28, etc.)<br>
%j = Day number of the year (Julian day 001-366)<br>
%a = Abbreviated weekday (Mon, Tue, Wed, etc.)<br>
%A = Full weekday (Monday, Tuesday, etc.)
%w = Weekday number (0-6, Sunday is 0)<br>
%u = Weekday number (1-7, Monday is 1)<br>
%W = Week number (00-53, Monday is week start)<br>
%U = Week number (01-53, Sunday is week start)<br>
%m = Month number (e.g. 01, 02, 03, 04)<br>
%b = Abbreviated month (Jan, Feb, etc.)<br>
%B = Full month (January, February, etc.)<br>
%y = 2-digit year (e.g. 89)<br>
%Y = 4-digit year (e.g. 1989)<br>
%h = hours (24-hr clock)<br>
%m = minutes<br>
%s = seconds
%z = offset from GMT<br>
%Z = Time zone (character)</p>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> The <code>format =</code> argument is <em>not</em> telling R the format you want the dates to be, but rather how to identify the date parts as they are <em>before</em> you run the command.</span></p>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> Be sure that in the <code>format =</code> argument you use the <em>date-part separator</em> (e.g. /, -, or space) that is present in your dates.</span></p>
<p>Once the values are in class Date, R will by default display them in the standard format, which is YYYY-MM-DD.</p>
</div>
<div id="lubridate" class="section level3 unnumbered">
<h3>
<strong>lubridate</strong><a class="anchor" aria-label="anchor" href="#lubridate"><i class="fas fa-link"></i></a>
</h3>
<p>Converting character objects to dates can be made <em>far</em> easier by using the <strong>lubridate</strong> package. This is a <strong>tidyverse</strong> package designed to make working with dates and times more simple and consistent than in <strong>base</strong> R. For these reasons, <strong>lubridate</strong> is often considered the gold-standard package for dates and time, and is recommended whenever working with them.</p>
<p>The <strong>lubridate</strong> package provides several different helper functions designed to convert character objects to dates in an intuitive, and more lenient way than specifying the format in <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>. These functions are specific to the rough date format, but allow for a variety of separators, and synonyms for dates (e.g. 01 vs Jan vs January) - they are named after abbreviations of date formats.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install/load lubridate </span>
<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></code></pre></div>
<p>The <code>ymd()</code> function flexibly converts date values supplied as <strong>year, then month, then day</strong>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read date in year-month-day format</span>
<span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-10-11"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ymd</span><span class="op">(</span><span class="st">"20201011"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<p>The <code>mdy()</code> function flexibly converts date values supplied as <strong>month, then day, then year</strong>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read date in month-day-year format</span>
<span class="fu">mdy</span><span class="op">(</span><span class="st">"10/11/2020"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mdy</span><span class="op">(</span><span class="st">"Oct 11 20"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<p>The <code>dmy()</code> function flexibly converts date values supplied as <strong>day, then month, then year</strong>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read date in day-month-year format</span>
<span class="fu">dmy</span><span class="op">(</span><span class="st">"11 10 2020"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dmy</span><span class="op">(</span><span class="st">"11 October 2020"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-10-11"</code></pre>
<!-- The `as.character()` and `as.Date()` commands can optionally be combined as:   -->
<!-- ```{r eval=F} -->
<!-- linelist_cleaned$date_of_onset <- as.Date(as.character(linelist_cleaned$date_of_onset), format = "%d/%m/%Y") -->
<!-- ``` -->
<p>If using <a href="#piping">piping</a> and the tidyverse, the converting of a character column to dates with <strong>lubridate</strong> might look like this:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Once complete, you can run <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> to verify the class of the column</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Check the class of the column</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span><span class="op">)</span>  </code></pre></div>
<p>Once the values are in class Date, R will by default display them in the standard format, which is YYYY-MM-DD.</p>
</div>
<div id="combine-columns" class="section level3 unnumbered">
<h3>Combine columns<a class="anchor" aria-label="anchor" href="#combine-columns"><i class="fas fa-link"></i></a>
</h3>
<p>You can use the <strong>lubridate</strong> functions <code>make_date()</code> and <code>make_datetime()</code> to combine multiple numeric columns into one date column. For example if you have numeric columns <code>day</code>, <code>month</code>, and <code>year</code> in the data frame <code>linelist</code>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu">make_date</span><span class="op">(</span>year <span class="op">=</span> <span class="va">year</span>, month <span class="op">=</span> <span class="va">month</span>, day <span class="op">=</span> <span class="va">day</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="excel-dates" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> Excel Dates<a class="anchor" aria-label="anchor" href="#excel-dates"><i class="fas fa-link"></i></a>
</h2>
<p>Excel stores dates as the number of days since December 30, 1899. If the dataset you imported from Excel shows dates as numbers or characters like “41369”… use the <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> or <strong>lubridate</strong>’s <code>as_date()</code> function to convert, but <strong>instead of supplying a format as above, supply an origin date</strong>. This will not work if the excel date is read as a character type, so be sure to ensure the date is a numeric class (or convert it to one)!</p>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> You should provide the origin date in R’s default date format (“YYYY-MM-DD”).</span></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># An example of providing the Excel 'origin date' when converting Excel number dates</span>
<span class="va">data_cleaned</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu">as_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/double.html">as.double</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span>, origin <span class="op">=</span> <span class="st">"1899-12-30"</span><span class="op">)</span><span class="op">)</span> <span class="co"># convert to numeric, then convert to date</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="messy-dates" class="section level2" number="1.6">
<h2>
<span class="header-section-number">1.6</span> Messy dates<a class="anchor" aria-label="anchor" href="#messy-dates"><i class="fas fa-link"></i></a>
</h2>
<p>The function <code>guess_dates()</code> from the <strong>linelist</strong> package attempts to read a “messy” date column containing dates in many different formats and convert the dates to a standard format. You can <a href="https://www.repidemicsconsortium.org/linelist/reference/guess_dates.html">read more online about <code>guess_dates()</code></a>. If <code>guess_dates()</code> is not yet available on CRAN for R 4.0.2, try install via <code><a href="https://rdrr.io/pkg/pacman/man/p_load_gh.html">pacman::p_load_gh("reconhub/linelist")</a></code>.</p>
<p>For example <code>guess_dates</code> would see a vector of the following character dates “03 Jan 2018”, “07/03/1982”, and “08/20/85” and convert them to class Date as: <code>2018-01-03</code>, <code>1982-03-07</code>, and <code>1985-08-20</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">linelist</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/linelist/man/guess_dates.html">guess_dates</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"03 Jan 2018"</span>,
                        <span class="st">"07/03/1982"</span>,
                        <span class="st">"08/20/85"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2018-01-03" "1982-03-07" "1985-08-20"</code></pre>
<p>Some optional arguments for <code>guess_dates()</code> that you might include are:</p>
<ul>
<li>
<code>error_tolerance</code> - The proportion of entries which cannot be identified as dates to be tolerated (defaults to 0.1 or 10%)</li>
<li>
<code>last_date</code> - the last valid date (defaults to current date)<br>
</li>
<li>
<code>first_date</code> - the first valid date. Defaults to fifty years before the last_date.</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="working-with-dates.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An example using guess_dates on the column dater_onset</span></span>
<span id="cb28-2"><a href="working-with-dates.html#cb28-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span>                 <span class="co"># the dataset is called linelist</span></span>
<span id="cb28-3"><a href="working-with-dates.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-4"><a href="working-with-dates.html#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_onset =</span> linelist<span class="sc">::</span><span class="fu">guess_dates</span>(  <span class="co"># the guess_dates() from package "linelist"</span></span>
<span id="cb28-5"><a href="working-with-dates.html#cb28-5" aria-hidden="true" tabindex="-1"></a>      date_onset,</span>
<span id="cb28-6"><a href="working-with-dates.html#cb28-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">error_tolerance =</span> <span class="fl">0.1</span>,</span>
<span id="cb28-7"><a href="working-with-dates.html#cb28-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">first_date =</span> <span class="st">"2016-01-01"</span></span>
<span id="cb28-8"><a href="working-with-dates.html#cb28-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="convert-to-datetime-classes" class="section level2" number="1.7">
<h2>
<span class="header-section-number">1.7</span> Convert to <code>datetime</code> classes<a class="anchor" aria-label="anchor" href="#convert-to-datetime-classes"><i class="fas fa-link"></i></a>
</h2>
<p>As previously mentioned, R also supports a <code>datetime</code> class - a column that contains date <strong>and</strong> time information. As with the <code>Date</code> class, these often need to be converted from <code>character</code> objects to <code>datetime</code> objects.</p>
<div id="convert-dates-with-times" class="section level3 unnumbered">
<h3>Convert dates with times<a class="anchor" aria-label="anchor" href="#convert-dates-with-times"><i class="fas fa-link"></i></a>
</h3>
<p>A standard <code>datetime</code> object is formatted with the date first, which is followed by a time component - for example <em>01 Jan 2020, 16:30</em>. As with dates, there are many ways this can be formatted, and there are numerous levels of precision (hours, minutes, seconds) that can be supplied.</p>
<p>Luckily, <strong>lubridate</strong> helper functions also exist to help convert these strings to <code>datetime</code> objects. These functions are extensions of the date helper functions, with <code>_h</code> (only hours supplied), <code>_hm</code> (hours and minutes supplied), or <code>_hms</code> (hours, minutes, and seconds supplied) appended to the end (e.g. <code>dmy_hms()</code>). These can be used as shown:</p>
<p>Convert datetime with only hours to datetime object</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ymd_h</span><span class="op">(</span><span class="st">"2020-01-01 16hrs"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-01 16:00:00 UTC"</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ymd_h</span><span class="op">(</span><span class="st">"2020-01-01 4PM"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-01-01 16:00:00 UTC"</code></pre>
<p>Convert datetime with hours and minutes to datetime object</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dmy_hm</span><span class="op">(</span><span class="st">"Jan 1st 2020 16:20"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: All formats failed to parse. No formats found.</code></pre>
<pre><code>## [1] NA</code></pre>
<p>Convert datetime with hours, minutes, and seconds to datetime object</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mdy_hms</span><span class="op">(</span><span class="st">"01 January 20, 16:20:40"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: All formats failed to parse. No formats found.</code></pre>
<pre><code>## [1] NA</code></pre>
<p>You can supply time zone but it is ignored. See section later in this page on time zones.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mdy_hms</span><span class="op">(</span><span class="st">"01 January 20, 16:20:40 PST"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: All formats failed to parse. No formats found.</code></pre>
<pre><code>## [1] NA</code></pre>
<p>When working with a dataframe, time and date columns can be combined to create a datetime column using <code>str_glue()</code> from <strong>stringr</strong> package and an appropriate <strong>lubridate</strong> function. See the page on [Characters and strings] for details on <strong>stringr</strong>.<br>
In this example, the <code>linelist</code> data frame has a column in format “hours:minutes”. To convert this to a datetime we follow a few steps:</p>
<ol style="list-style-type: decimal">
<li>Create a “clean” time of admission column with missing values filled-in with the column median. We do this because <strong>lubridate</strong> won’t operate on missing values. combine it with the column <code>date_hospitalisation</code>, and then use the function <code>ymd_hm()</code> to convert.</li>
</ol>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="working-with-dates.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># packages</span></span>
<span id="cb42-2"><a href="working-with-dates.html#cb42-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, lubridate, stringr)</span>
<span id="cb42-3"><a href="working-with-dates.html#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="working-with-dates.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># time_admission is a column in hours:minutes</span></span>
<span id="cb42-5"><a href="working-with-dates.html#cb42-5" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="working-with-dates.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-7"><a href="working-with-dates.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># when time of admission is not given, assign the median admission time</span></span>
<span id="cb42-8"><a href="working-with-dates.html#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-9"><a href="working-with-dates.html#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_admission_clean =</span> <span class="fu">ifelse</span>(</span>
<span id="cb42-10"><a href="working-with-dates.html#cb42-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(time_admission),</span>
<span id="cb42-11"><a href="working-with-dates.html#cb42-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">median</span>(time_admission),</span>
<span id="cb42-12"><a href="working-with-dates.html#cb42-12" aria-hidden="true" tabindex="-1"></a>      time_admission</span>
<span id="cb42-13"><a href="working-with-dates.html#cb42-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-14"><a href="working-with-dates.html#cb42-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-15"><a href="working-with-dates.html#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># use str_glue() to combine two columns to create a character column</span></span>
<span id="cb42-16"><a href="working-with-dates.html#cb42-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># and then use ymd_hm() to convert to datetime</span></span>
<span id="cb42-17"><a href="working-with-dates.html#cb42-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-18"><a href="working-with-dates.html#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_time_of_admission =</span> <span class="fu">str_glue</span>(<span class="st">"{date_hospitalisation} {time_admission_clean}"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-19"><a href="working-with-dates.html#cb42-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ymd_hm</span>()</span>
<span id="cb42-20"><a href="working-with-dates.html#cb42-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="convert-times-alone" class="section level3 unnumbered">
<h3>Convert times alone<a class="anchor" aria-label="anchor" href="#convert-times-alone"><i class="fas fa-link"></i></a>
</h3>
<p>If your data contain only a character time (hours and minutes), you can convert and manipulate them as times using <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code> from <strong>base</strong> R. For example, to get the difference between two of these times:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># raw character times</span>
<span class="va">time1</span> <span class="op">&lt;-</span> <span class="st">"13:45"</span> 
<span class="va">time2</span> <span class="op">&lt;-</span> <span class="st">"15:20"</span>

<span class="co"># Times converted to a datetime class</span>
<span class="va">time1_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span><span class="op">(</span><span class="va">time1</span>, format <span class="op">=</span> <span class="st">"%H:%M"</span><span class="op">)</span>
<span class="va">time2_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span><span class="op">(</span><span class="va">time2</span>, format <span class="op">=</span> <span class="st">"%H:%M"</span><span class="op">)</span>

<span class="co"># Difference is of class "difftime" by default, here converted to numeric hours </span>
<span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">time2_clean</span> <span class="op">-</span> <span class="va">time1_clean</span><span class="op">)</span>   <span class="co"># difference in hours</span></code></pre></div>
<pre><code>## [1] 1.583333</code></pre>
<p>Note however that without a date value provided, it assumes the date is today. To combine a string date and a string time together see how to use <strong>stringr</strong> in the section just above. Read more about <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code> <a href="https://rdrr.io/r/base/strptime.html">here</a>.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="working-with-dates-1" class="section level2" number="1.8">
<h2>
<span class="header-section-number">1.8</span> Working with dates<a class="anchor" aria-label="anchor" href="#working-with-dates-1"><i class="fas fa-link"></i></a>
</h2>
<p><code>lubridate</code> can also be used for a variety of other functions, such as <strong>extracting aspects of a date/datetime</strong>, <strong>performing date arithmetic</strong>, or <strong>calculating date intervals</strong></p>
<p>Here we define a date to use for the examples:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create object of class Date</span>
<span class="va">example_date</span> <span class="op">&lt;-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-03-01"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># extract the month and day from this date</span>
<span class="fu">month</span><span class="op">(</span><span class="va">example_date</span><span class="op">)</span>  <span class="co"># month number</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">day</span><span class="op">(</span><span class="va">example_date</span><span class="op">)</span>    <span class="co"># day (number)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">wday</span><span class="op">(</span><span class="va">example_date</span><span class="op">)</span>   <span class="co"># day number of the week (1-7)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>You can also extract time components from a <code>datetime</code> object or column. This can be useful if you want to view the distribution of admission times.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">example_datetime</span> <span class="op">&lt;-</span> <span class="fu">ymd_hm</span><span class="op">(</span><span class="st">"2020-03-01 14:45"</span><span class="op">)</span>

<span class="fu">hour</span><span class="op">(</span><span class="va">example_datetime</span><span class="op">)</span>     <span class="co"># extract hour</span>
<span class="fu">minute</span><span class="op">(</span><span class="va">example_datetime</span><span class="op">)</span>   <span class="co"># extract minute</span>
<span class="fu">second</span><span class="op">(</span><span class="va">example_datetime</span><span class="op">)</span>   <span class="co"># extract second</span></code></pre></div>
<p>There are several options to retrieve weeks. See the section on Epidemiological weeks below.</p>
<div id="date-math" class="section level3 unnumbered">
<h3>Date math<a class="anchor" aria-label="anchor" href="#date-math"><i class="fas fa-link"></i></a>
</h3>
<p>You can add certain numbers of days or weeks using their respective function from <strong>lubridate</strong>.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add 3 days to this date</span>
<span class="va">example_date</span> <span class="op">+</span> <span class="fu">days</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-03-04"</code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add 7 weeks and subtract two days from this date</span>
<span class="va">example_date</span> <span class="op">+</span> <span class="fu">weeks</span><span class="op">(</span><span class="fl">7</span><span class="op">)</span> <span class="op">-</span> <span class="fu">days</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2020-04-17"</code></pre>
</div>
<div id="date-intervals" class="section level3 unnumbered">
<h3>Date intervals<a class="anchor" aria-label="anchor" href="#date-intervals"><i class="fas fa-link"></i></a>
</h3>
<p>The difference between dates can be calculated by:</p>
<ol style="list-style-type: decimal">
<li>Ensure both dates are of class date<br>
</li>
<li>Use subtraction to return the “difftime” difference between the two dates<br>
</li>
<li>If necessary, convert the result to numeric class to perform subsequent mathematical calculations</li>
</ol>
<p>Below the interval between two dates is calculated and displayedYou can find intervals by using the subtraction “minus” symbol on values that are class Date. Note, however that the class of the returned value is “difftime” as displayed below, not numeric.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># find the interval between this date and Feb 20 2020 </span>
<span class="va">output</span> <span class="op">&lt;-</span> <span class="va">example_date</span> <span class="op">-</span> <span class="fu">ymd</span><span class="op">(</span><span class="st">"2020-02-20"</span><span class="op">)</span>
<span class="va">output</span>    <span class="co"># print</span></code></pre></div>
<pre><code>## Time difference of 10 days</code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "difftime"</code></pre>
<p>To do subsequent operations on a “difftime”, convert it to numeric with <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>.</p>
<p>This can all be brought together to work with data - for example:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">lubridate</span>, <span class="va">tidyverse</span><span class="op">)</span>   <span class="co"># load packages</span>

<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span>
  
  <span class="co"># convert date of onset from character to date objects by specifying dmy format</span>
  <span class="fu">mutate</span><span class="op">(</span>date_onset <span class="op">=</span> <span class="fu">dmy</span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span>,
         date_hospitalisation <span class="op">=</span> <span class="fu">dmy</span><span class="op">(</span><span class="va">date_hospitalisation</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  
  <span class="co"># filter out all cases without onset in march</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu">month</span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span>
    
  <span class="co"># find the difference in days between onset and hospitalisation</span>
  <span class="fu">mutate</span><span class="op">(</span>onset_to_hosp_days <span class="op">=</span> <span class="va">date_hospitalisation</span> <span class="op">-</span> <span class="va">date_of_onset</span><span class="op">)</span></code></pre></div>
<p>In a dataframe format (i.e. when working with a linelist), if either of the above dates is missing, the operation will fail for that row. This will result in an <code>NA</code> instead of a numeric value. When using this column for calculations, be sure to set the <code>na.rm</code> option to <code>TRUE</code>. For example:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add a new column</span>
<span class="co"># calculating the number of days between symptom onset and patient outcome</span>
<span class="va">linelist_delay</span> <span class="op">&lt;-</span> <span class="va">linelist_cleaned</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>
    days_onset_to_outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html">as.double</a></span><span class="op">(</span><span class="va">date_of_outcome</span> <span class="op">-</span> <span class="va">date_of_onset</span><span class="op">)</span>
  <span class="op">)</span>

<span class="co"># calculate the median number of days to outcome for all cases where data are available</span>
<span class="va">med_days_outcome</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">linelist_delay</span><span class="op">$</span><span class="va">dats_onset_to_outcome</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>

<span class="co"># often this operation might be done only on a subset of data cases, e.g. those who died</span>
<span class="co"># this is easy to look at and will be explained later in the handbook</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="date-display" class="section level2" number="1.9">
<h2>
<span class="header-section-number">1.9</span> Date display<a class="anchor" aria-label="anchor" href="#date-display"><i class="fas fa-link"></i></a>
</h2>
<p>Once dates are the correct class, you often want them to display differently (e.g. in a plot, graph, or table). For example, to display as “Monday 05 Jan” instead of “2018-01-05”. You can do this with the <strong>base</strong> R function <code><a href="https://rdrr.io/r/base/format.html">format()</a></code>, which accepts the date and then a character string (in quotes) specifying the desired output (same as the <code>format =</code> argument in <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>). Read more <a href="https://www.statmethods.net/input/dates.html">in this online tutorial</a>. Below are most of the common placeholders for the string.</p>
<p>Using <code><a href="https://rdrr.io/r/base/format.html">format()</a></code> will convert the values to class Character, so this is generally used towards the end of an analysis or for display purposes only!</p>
<p>%d = Day number of month (5, 17, 28, etc.)<br>
%j = Day number of the year (Julian day 001-366)<br>
%a = Abbreviated weekday (Mon, Tue, Wed, etc.)<br>
%A = Full weekday (Monday, Tuesday, etc.)
%w = Weekday number (0-6, Sunday is 0)<br>
%u = Weekday number (1-7, Monday is 1)<br>
%W = Week number (00-53, Monday is week start)<br>
%U = Week number (01-53, Sunday is week start)<br>
%m = Month number (e.g. 01, 02, 03, 04)<br>
%b = Abbreviated month (Jan, Feb, etc.)<br>
%B = Full month (January, February, etc.)<br>
%y = 2-digit year (e.g. 89)<br>
%Y = 4-digit year (e.g. 1989)<br>
%h = hours (24-hr clock)<br>
%m = minutes<br>
%s = seconds
%z = offset from GMT<br>
%Z = Time zone (character)</p>
<p>An example of formatting today’s date:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># today's date, with formatting</span>
<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%d %B %Y"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "11 March 2021"</code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># easy way to get full date and time (no formatting)</span>
<span class="fu"><a href="https://rdrr.io/r/base/date.html">date</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Thu Mar 11 18:03:45 2021"</code></pre>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># formatted date, time, and time zone (using paste0() function)</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%A, %b %d '%y, %z  %Z, "</span><span class="op">)</span>, 
  <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%H:%M:%S"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<pre><code>## [1] "Thursday, Mar 11 '21, +0000  UTC, 18:03:45"</code></pre>
<!-- ======================================================= -->
</div>
<div id="converting-datestime-zones" class="section level2" number="1.10">
<h2>
<span class="header-section-number">1.10</span> Converting dates/time zones<a class="anchor" aria-label="anchor" href="#converting-datestime-zones"><i class="fas fa-link"></i></a>
</h2>
<p>When data is present in different time time zones, it can often be important to standardise this data in a unified time zone. This can present a further challenge, as the time zone component of data must be coded manually in most cases.</p>
<p>In R, each <em>datetime</em> object has a timezone component. By default, all datetime objects will carry the local time zone for the computer being used - this is generally specific to a <em>location</em> rather than a named timezone, as time zones will often change in locations due to daylight savings time. It is not possible to accurately compensate for time zones without a time component of a date, as the event a date column represents cannot be attributed to a specific time, and therefore time shifts measured in hours cannot be reasonably accounted for.</p>
<p>To deal with time zones, there are a number of helper functions in lubridate that can be used to change the time zone of a datetime object from the local time zone to a different time zone. Time zones are set by attributing a valid tz database time zone to the datetime object. A list of these can be found here - if the location you are using data from is not on this list, nearby large cities in the time zone are available and serve the same purpose.</p>
<p><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" class="uri">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># assign the current time to a column</span>
<span class="va">time_now</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">time_now</span></code></pre></div>
<pre><code>## [1] "2021-03-11 18:03:45 EST"</code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># use with_tz() to assign a new timezone to the column, while CHANGING the clock time</span>
<span class="va">time_london_real</span> <span class="op">&lt;-</span> <span class="fu">with_tz</span><span class="op">(</span><span class="va">time_now</span>, <span class="st">"Europe/London"</span><span class="op">)</span>

<span class="co"># use force_tz() to assign a new timezone to the column, while KEEPING the clock time</span>
<span class="va">time_london_local</span> <span class="op">&lt;-</span> <span class="fu">force_tz</span><span class="op">(</span><span class="va">time_now</span>, <span class="st">"Europe/London"</span><span class="op">)</span>


<span class="co"># note that as long as the computer that was used to run this code is NOT set to London time, there will be a difference in the times (the number of hours difference from the computers time zone to london)</span>

<span class="va">time_london_real</span> <span class="op">-</span> <span class="va">time_london_local</span></code></pre></div>
<pre><code>## Time difference of 5 hours</code></pre>
<p>This may seem largely abstract, and is often not needed if the user isn’t working across time zones. One simple example of its implementation is:</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># TODO add when time column is here</span>
<span class="co"># set the time column to time zone for ebola outbreak </span>

<span class="co"># "Africa/Lubumbashi" is the time zone for eastern DRC/Kivu Nord</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="epidemiological-weeks" class="section level2" number="1.11">
<h2>
<span class="header-section-number">1.11</span> Epidemiological weeks<a class="anchor" aria-label="anchor" href="#epidemiological-weeks"><i class="fas fa-link"></i></a>
</h2>
<div id="lubridate-1" class="section level3 unnumbered">
<h3>
<strong>lubridate</strong><a class="anchor" aria-label="anchor" href="#lubridate-1"><i class="fas fa-link"></i></a>
</h3>
<p>We generally recommend using the <code>floor_date()</code> function from <strong>lubridate</strong>, with the argument <code>unit = "week"</code>. This rounds the date down to the “start” of the week, as defined by the argument <code>week_start =</code>. The default week start is 1 (for Mondays) but you can specify any day of the week as the start (e.g. 7 for Sundays).</p>
<p><code>floor_date()</code> can also be used to round down to other time units including “second”, “minute”, “hour”, “day”, “month”, or “year”).<br>
The returned value is the start date of the week, in Date class. This is useful when plotting the data, as the class Date will be easily recognized and ordered correctly by <code>ggplot()</code>, and any grouping can be adjusted easily using <code>scale_x_date()</code> (e.g. <code>date_breaks = "3 weeks"</code>). This is described further in the page on [ggplot tips] and the page on [Epidemic curves].</p>
<p>See the section on Date display for tips on how to adjust the <em>display</em> of dates in a plot. You can provide a week column of class Date (after using <code>floor_date()</code>) and format the display as desired by providing the desired “%” nomenclature to <code>date_labels =</code> of <code>scale_x_date()</code>. For example, use “%Y-%W” or “%Y-%U” to return the year and week number (given Monday or Sunday week start, respectively).</p>
<div id="weekly-counts" class="section level4 unnumbered">
<h4>Weekly counts<a class="anchor" aria-label="anchor" href="#weekly-counts"><i class="fas fa-link"></i></a>
</h4>
<p>See the page on [Epidemic curves] for an example of aggregating data into epiweeks. A brief example is below.</p>
<ol style="list-style-type: decimal">
<li>Create a new ‘week’ column with <code>mutate()</code>, using <code>floor_date()</code><br>
</li>
<li>Get counts of rows (case) per week with <code>count()</code>; filter our any cases with missing date<br>
</li>
<li>Follow-up with <code>complete()</code> from <strong>tidyr</strong> to ensure that <em>all</em> weeks appear in the data - even those with no rows/cases.</li>
</ol>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Make aggregated dataset of weekly case counts</span>
<span class="va">weekly_counts</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>week <span class="op">=</span> <span class="fu">floor_date</span><span class="op">(</span>         <span class="co"># make new column, week of onset</span>
    <span class="va">date_onset</span>,
    unit <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>            
  <span class="fu">count</span><span class="op">(</span><span class="va">week</span><span class="op">)</span> <span class="op">%&gt;%</span>                   <span class="co"># group data by week and count rows per group</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>          <span class="co"># remove cases that were missing onset date</span>
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html">complete</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html">seq.Date</a></span><span class="op">(</span>  <span class="co"># ensure all weeks are present, even those with no cases reported</span>
    from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>,               
    to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>,
    by <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Here are the first rows of the resulting data frame:</p>
<div id="htmlwidget-4965c1ca9d2c484b1965" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4965c1ca9d2c484b1965">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1396742400000\" data-max=\"1408233600000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"130\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17"],[1,1,4,4,12,15,16,23,22,18,30,25,33,36,56,59,81,86,118,130]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="alternatives" class="section level3 unnumbered">
<h3>Alternatives<a class="anchor" aria-label="anchor" href="#alternatives"><i class="fas fa-link"></i></a>
</h3>
<p>Note that <strong>lubridate</strong> also has functions <code>week()</code>, <code>epiweek()</code>, and <code>isoweek()</code>, each of which has slightly different start dates and other nuances. Generally speaking though, <code>floor_date()</code> should be all that you need. Read the details for these functions by entering <code>?week</code> into the console or reading the documentation <a href="https://www.rdocumentation.org/packages/lubridate/versions/1.7.4/topics/week">here</a>.</p>
<p>You might consider using the package <strong>aweek</strong> to set epidemiological weeks. You can read more about it <a href="https://www.repidemicsconsortium.org/aweek/">on the RECON website</a>. It has the functions <code>date2week()</code> and <code>week2date()</code> in which you can set the week start day with <code>week_start = "Monday"</code>. This package is easiest if you want “week”-style outputs (e.g. “2020-W12”). Another advantage of <strong>aweek</strong> is that when <code>date2week()</code> is applied to a date column, the returned column (week format) is automatically of class Factor and includes levels for all weeks in the time span (this avoids the extra step of <code>complete()</code> described above). However, <strong>aweek</strong> does not have the functionality to round dates to other time units such as months, years, etc.<br>
Another alternative for time series which also works well to show a a “week” format (“2020 W12”) is <code>yearweek()</code> from the package <strong>tsibble</strong>, as demonstrated in the page on [Time series and outbreak detection].</p>
<!-- ======================================================= -->
</div>
</div>
<div id="lagging-and-leading-calculations" class="section level2" number="1.12">
<h2>
<span class="header-section-number">1.12</span> Lagging and leading calculations<a class="anchor" aria-label="anchor" href="#lagging-and-leading-calculations"><i class="fas fa-link"></i></a>
</h2>
<p><code>lead()</code> and <code><a href="https://rdrr.io/r/stats/lag.html">lag()</a></code> are functions from the <strong>dplyr</strong> package which help find previous (lagged) or subsequent (leading) values in a vector - typically a numeric or date vector. This is useful when doing calculations of change/difference between time units.</p>
<p>Let’s say you want to calculate the difference in cases between a current week and the previous one. The data are initially provided in weekly counts as shown below. To learn how to aggregate counts from daily to weekly see the page on aggregating (LINK).</p>
<div id="htmlwidget-75bbb74f2a272b7575e1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-75bbb74f2a272b7575e1">{"x":{"filter":"none","data":[["2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"],[0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19,0]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week_start<\/th>\n      <th>cases_wk<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p><strong>When using <code><a href="https://rdrr.io/r/stats/lag.html">lag()</a></code> or <code>lead()</code> the order of rows in the dataframe is very important! - pay attention to whether your dates/numbers are ascending or descending</strong></p>
<p>First, create a new column containing the value of the previous (lagged) week.</p>
<ul>
<li>Control the number of units back/forward with <code>n =</code> (must be a non-negative integer)<br>
</li>
<li>Use <code>default =</code> to define the value placed in non-existing rows (e.g. the first row for which there is no lagged value). By default this is <code>NA</code>.<br>
</li>
<li>Use <code>order_by = TRUE</code> if your reference column is not ordered</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">counts</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>cases_prev_wk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lag.html">lag</a></span><span class="op">(</span><span class="va">cases_wk</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-8f4b9efa8016e101985e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8f4b9efa8016e101985e">{"x":{"filter":"none","data":[["2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"],[0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19,0],[null,0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week_start<\/th>\n      <th>cases_wk<\/th>\n      <th>cases_prev_wk<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Next, create a new column which is the difference between the two cases columns:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">counts</span> <span class="op">&lt;-</span> <span class="va">counts</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>cases_prev_wk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lag.html">lag</a></span><span class="op">(</span><span class="va">cases_wk</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
         case_diff <span class="op">=</span> <span class="va">cases_wk</span> <span class="op">-</span> <span class="va">cases_prev_wk</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-0e0401ebaee3861f05b8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0e0401ebaee3861f05b8">{"x":{"filter":"none","data":[["2019-06-23","2019-06-30","2019-07-07","2019-07-14","2019-07-21","2019-07-28","2019-08-04","2019-08-11","2019-08-18","2019-08-25","2019-09-01","2019-09-08","2019-09-15","2019-09-22","2019-09-29","2019-10-06","2019-10-13","2019-10-20","2019-10-27","2019-11-03","2019-11-10","2019-11-17","2019-11-24","2019-12-01","2019-12-08","2019-12-15","2019-12-22","2019-12-29"],[0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19,0],[null,0,25,59,90,65,79,41,47,31,32,28,28,76,41,70,90,124,278,371,329,177,69,77,97,100,39,19],[null,25,34,31,-25,14,-38,6,-16,1,-4,0,48,-35,29,20,34,154,93,-42,-152,-108,8,20,3,-61,-20,-19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>week_start<\/th>\n      <th>cases_wk<\/th>\n      <th>cases_prev_wk<\/th>\n      <th>case_diff<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>You can read more about <code>lead()</code> and <code><a href="https://rdrr.io/r/stats/lag.html">lag()</a></code> in the documentation <a href="https://dplyr.tidyverse.org/reference/lead-lag.html">here</a> or by entering <code><a href="https://rdrr.io/r/stats/lag.html">?lag</a></code> in your console.</p>
<!-- ======================================================= -->
</div>
<div id="dates-miscellaneous" class="section level2" number="1.13">
<h2>
<span class="header-section-number">1.13</span> Dates miscellaneous<a class="anchor" aria-label="anchor" href="#dates-miscellaneous"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date( )</a></code> from <strong>base</strong> R returns the current date of your computer<br>
</li>
<li>
<code>Sys.Time()</code> from <strong>base</strong> R returns the current time of your computer</li>
<li>
<code><a href="https://rdrr.io/r/base/date.html">date()</a></code> from <strong>lubridate</strong> returns the current date and time.</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="resources" class="section level2" number="1.14">
<h2>
<span class="header-section-number">1.14</span> Resources<a class="anchor" aria-label="anchor" href="#resources"><i class="fas fa-link"></i></a>
</h2>
<p><strong>lubridate</strong> <a href="https://lubridate.tidyverse.org/">tidyverse page</a><br><strong>lubridate</strong> RStudio <a href="https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf">cheatsheet</a><br>
R for Data Science page on <a href="https://r4ds.had.co.nz/dates-and-times.html">dates and times</a><br><a href="https://www.statmethods.net/input/dates.html">Online tutorial</a>
<a href="https://www.r-bloggers.com/2013/08/date-formats-in-r/">Date formats</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html"></a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#working-with-dates"><span class="header-section-number">1</span> Working with dates</a></li>
<li><a class="nav-link" href="#overview"><span class="header-section-number">1.1</span> Overview</a></li>
<li>
<a class="nav-link" href="#preparation"><span class="header-section-number">1.2</span> Preparation</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#load-packages">Load packages</a></li>
<li><a class="nav-link" href="#import-data">Import data</a></li>
</ul>
</li>
<li><a class="nav-link" href="#current-date-and-time"><span class="header-section-number">1.3</span> Current date and time</a></li>
<li>
<a class="nav-link" href="#convert-to-date-class"><span class="header-section-number">1.4</span> Convert to Date class</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#as.date">as.Date()</a></li>
<li><a class="nav-link" href="#lubridate">lubridate</a></li>
<li><a class="nav-link" href="#combine-columns">Combine columns</a></li>
</ul>
</li>
<li><a class="nav-link" href="#excel-dates"><span class="header-section-number">1.5</span> Excel Dates</a></li>
<li><a class="nav-link" href="#messy-dates"><span class="header-section-number">1.6</span> Messy dates</a></li>
<li>
<a class="nav-link" href="#convert-to-datetime-classes"><span class="header-section-number">1.7</span> Convert to datetime classes</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#convert-dates-with-times">Convert dates with times</a></li>
<li><a class="nav-link" href="#convert-times-alone">Convert times alone</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#working-with-dates-1"><span class="header-section-number">1.8</span> Working with dates</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#date-math">Date math</a></li>
<li><a class="nav-link" href="#date-intervals">Date intervals</a></li>
</ul>
</li>
<li><a class="nav-link" href="#date-display"><span class="header-section-number">1.9</span> Date display</a></li>
<li><a class="nav-link" href="#converting-datestime-zones"><span class="header-section-number">1.10</span> Converting dates/time zones</a></li>
<li>
<a class="nav-link" href="#epidemiological-weeks"><span class="header-section-number">1.11</span> Epidemiological weeks</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#lubridate-1">lubridate</a></li>
<li><a class="nav-link" href="#alternatives">Alternatives</a></li>
</ul>
</li>
<li><a class="nav-link" href="#lagging-and-leading-calculations"><span class="header-section-number">1.12</span> Lagging and leading calculations</a></li>
<li><a class="nav-link" href="#dates-miscellaneous"><span class="header-section-number">1.13</span> Dates miscellaneous</a></li>
<li><a class="nav-link" href="#resources"><span class="header-section-number">1.14</span> Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Epidemiologist R Handbook</strong>" was written by the handbook team. It was last built on 2021-03-11.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
