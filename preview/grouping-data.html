<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1 Grouping data | R Handbook for Epidemiologists</title>
<meta name="author" content="the handbook team">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.6/header-attrs.js"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.3.9000/tabs.js"></script><script src="libs/bs3compat-0.2.3.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Handbook for Epidemiologists</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li class="book-part">Preview pages</li>
<li><a class="active" href="grouping-data.html"><span class="header-section-number">1</span> Grouping data</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="grouping-data" class="section level1 tabset tabset-fade" number="1">
<h1>
<span class="header-section-number">1</span> Grouping data<a class="anchor" aria-label="anchor" href="#grouping-data"><i class="fas fa-link"></i></a>
</h1>
<p>This page reviews how to group and aggregate data for descriptive analysis. It makes use of tidyverse packages for common and easy-to-use functions.</p>
<!-- ======================================================= -->
<div id="overview" class="section level2 tabset tabset-fade tabset-pills" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview"><i class="fas fa-link"></i></a>
</h2>
<p>Before doing descriptive analyses, it will almost always be a necessary to first group your data and summarise it across these groups (whether it be by time period, place, or a relevant categorical variable) since most often summary statistics across these groups are more meaningful. Luckily, tidyverse makes this really easy through the <code>group_by</code> function.</p>
<p>This page will how to perform these grouping operations</p>
<ul>
<li>Fast &amp; easy using <code>group_by()</code> command in <strong>dplyr</strong> or</li>
<li>Base R <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> command</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="preparation" class="section level2 tabset tabset-fade tabset-pills" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Preparation<a class="anchor" aria-label="anchor" href="#preparation"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Load packages</strong></p>
<p>Ensure tidyverse is installed, which includes dplyr for group_by</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">rio</span>,       <span class="co"># to import data</span>
               <span class="va">here</span>,      <span class="co"># to locate files</span>
               <span class="va">tidyverse</span>  <span class="co"># to clean, handle, and plot the data (includes dplyr!)</span>
<span class="op">)</span></code></pre></div>
<p><strong>Load data</strong></p>
<p>For this page we use the cleaned <code>linelist</code> dataset</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"linelist_cleaned.xlsx"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="group_by" class="section level2 tabset tabset-fade tabset-pills" number="1.3">
<h2>
<span class="header-section-number">1.3</span> <code>group_by()</code><a class="anchor" aria-label="anchor" href="#group_by"><i class="fas fa-link"></i></a>
</h2>
<p>Grouping by one or more columns establishes that any subsequent calculations will be performed within the context of each unique group.</p>
<p>For example, to group by unique values in one column, <code>outcome</code>, we would run the code below, placing <code>outcome</code> within <code>group_by()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ll_by_outcome</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span></code></pre></div>
<p><strong>Note that there is <em>no change to the dataset</em> until a </strong>dplyr** verb such as <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> or <code>summarise()</code> is applied on the “grouped” dataframe. We can however “see” the groupings by printing. When you print a grouped dataframe, you will see it has been transformed into a <code>tibble</code> class object (LINK) which when printed displays which grouping columns have been applied and how many groups there are - written just above the header row.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># print to see which groups are active</span>
<span class="va">ll_by_outcome</span></code></pre></div>
<pre><code>## # A tibble: 6,464 x 30
## # Groups:   outcome [3]
##    case_id generation date_infection date_onset date_hospitalis~ date_outcome outcome gender   age age_unit age_years age_cat age_cat5 hospital   lon   lat infector
##    &lt;chr&gt;        &lt;dbl&gt; &lt;date&gt;         &lt;date&gt;     &lt;date&gt;           &lt;date&gt;       &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;fct&gt;   &lt;fct&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 6c286a           2 NA             2014-04-27 2014-04-27       2014-05-07   Death   f          5 years            5 5-9     5-9      Missing  -13.2  8.46 &lt;NA&gt;    
##  2 a3c8b8           4 2014-05-07     2014-05-08 2014-05-10       2014-05-14   Recover m         18 years           18 15-19   15-19    Port Ho~ -13.2  8.47 2ae019  
##  3 d8a13d           4 2014-05-06     2014-05-08 2014-05-10       NA           &lt;NA&gt;    f         21 years           21 20-29   20-24    St. Mar~ -13.2  8.46 20b688  
##  4 72b905           4 2014-05-06     2014-05-12 2014-05-13       NA           Recover m         26 years           26 20-29   25-29    Other    -13.2  8.47 2ae019  
##  5 be99c8           3 2014-05-03     2014-05-22 2014-05-23       2014-05-24   Recover f         18 years           18 15-19   15-19    Port Ho~ -13.2  8.46 aec8ec  
##  6 566f9e           3 2014-05-24     2014-05-27 2014-05-28       2014-06-03   Recover m          2 years            2 0-4     0-4      Other    -13.2  8.48 be7f8a  
##  7 ce9c02           5 2014-05-27     2014-05-27 2014-05-29       2014-06-17   Death   m         23 years           23 20-29   20-24    Port Ho~ -13.2  8.47 53da57  
##  8 acf422           6 2014-05-25     2014-05-27 2014-05-28       2014-06-27   Recover m         32 years           32 30-49   30-34    Central~ -13.3  8.48 1511c5  
##  9 275cc7           5 2014-05-24     2014-05-27 2014-05-28       2014-06-07   Death   f          2 years            2 0-4     0-4      Central~ -13.2  8.47 e02f66  
## 10 dbebea           7 NA             2014-06-02 2014-06-03       2014-06-05   &lt;NA&gt;    m         11 years           11 10-14   10-14    Port Ho~ -13.2  8.49 &lt;NA&gt;    
## # ... with 6,454 more rows, and 13 more variables: source &lt;chr&gt;, wt_kg &lt;dbl&gt;, ht_cm &lt;dbl&gt;, ct_blood &lt;dbl&gt;, fever &lt;chr&gt;, chills &lt;chr&gt;, cough &lt;chr&gt;, aches &lt;chr&gt;,
## #   vomit &lt;chr&gt;, temp &lt;dbl&gt;, time_admission &lt;chr&gt;, bmi &lt;dbl&gt;, days_onset_hosp &lt;dbl&gt;</code></pre>
<div id="unique-groups" class="section level3" number="1.3.1">
<h3>
<span class="header-section-number">1.3.1</span> Unique groups<a class="anchor" aria-label="anchor" href="#unique-groups"><i class="fas fa-link"></i></a>
</h3>
<p><strong>The groups created reflect each unique combination of values in the grouping columns.</strong> To see the groups and the number of rows in each group, pass the grouped data to <code>tally()</code>.</p>
<p>See below that there are <strong>three</strong> unique values in the grouping column <code>outcome</code>: “Death”, “Recover”, and <code>NA</code>. See that there were 2843 deaths, 2163 recoveries, and 1458 with no outcome recorded.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tally</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   outcome     n
## * &lt;chr&gt;   &lt;int&gt;
## 1 Death    2843
## 2 Recover  2163
## 3 &lt;NA&gt;     1458</code></pre>
<p>You can group by more than one column. Below, the dataframe is grouped by <code>outcome</code> and <code>gender</code>, and then tallied. Note how each unique combination of <code>outcome</code> and <code>gender</code> is registered as its own group - including missing values for either column.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tally</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
## # Groups:   outcome [3]
##   outcome gender     n
##   &lt;chr&gt;   &lt;chr&gt;  &lt;int&gt;
## 1 Death   f       1366
## 2 Death   m       1332
## 3 Death   &lt;NA&gt;     145
## 4 Recover f       1037
## 5 Recover m       1012
## 6 Recover &lt;NA&gt;     114
## 7 &lt;NA&gt;    f        701
## 8 &lt;NA&gt;    m        687
## 9 &lt;NA&gt;    &lt;NA&gt;      70</code></pre>
</div>
<div id="new-columns" class="section level3" number="1.3.2">
<h3>
<span class="header-section-number">1.3.2</span> New columns<a class="anchor" aria-label="anchor" href="#new-columns"><i class="fas fa-link"></i></a>
</h3>
<p>You can also create a new column <em>within</em> the group_by() statement. This is equivalent to calling <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> before the <code>group_by()</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># group dat based on a binary column created *within* the group_by() command</span>
<span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span>
    age_class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">18</span>, <span class="st">"adult"</span>, <span class="st">"child"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tally</span><span class="op">(</span>sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   age_class     n
##   &lt;chr&gt;     &lt;int&gt;
## 1 child      4089
## 2 adult      2276
## 3 &lt;NA&gt;         99</code></pre>
</div>
<div id="replaceadd-grouping-columns" class="section level3" number="1.3.3">
<h3>
<span class="header-section-number">1.3.3</span> Replace/add grouping columns<a class="anchor" aria-label="anchor" href="#replaceadd-grouping-columns"><i class="fas fa-link"></i></a>
</h3>
<p>By default if you run <code>group_by()</code> on grouped data, the old groups will be removed and the new one(s) will apply. If however, you want to just add new groups to the existing ones, add the arguement <code>.add=TRUE</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Grouped by outcome</span>
<span class="va">by_outcome</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>

<span class="co"># Add grouping by gender in addition</span>
<span class="va">by_outcome_gender</span> <span class="op">&lt;-</span> <span class="va">by_outcome</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">gender</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="un-group" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> Un-group<a class="anchor" aria-label="anchor" href="#un-group"><i class="fas fa-link"></i></a>
</h2>
<p>Data that have been grouped will remain grouped until specifically ungrouped via <code>ungroup()</code>. If you forget to ungroup, it can lead to incorrect calculations! Below is an example of removing all grouping columns:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tally</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>You can also remove grouping by only specific columns, by placing the column name inside.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tally</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ungroup</span><span class="op">(</span><span class="va">gender</span><span class="op">)</span></code></pre></div>
<p><span style="color: black;"><strong><em>NOTE:</em></strong> The verb <code>count()</code> automatically ungroups the data after counting.</span></p>
</div>
<div id="summarise" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> Summarise<a class="anchor" aria-label="anchor" href="#summarise"><i class="fas fa-link"></i></a>
</h2>
<p>By applying the <strong>dplyr</strong> verb <code>summarise()</code> to grouped data, you can produce summary tables containing descriptive statistics <em>for each group</em>.</p>
<p>Within the summarise statement, provide the name(s) of the new summary column(s), an equals sign, and then a statistical function to apply to the data, as shown below. Within a statistical function, list the column to be operated on and any relevant arguements. For example, do not forget <code>na.rm=TRUE</code> to remove missing values from calculations!</p>
<p>Below is an example of <code>summarise()</code> <em>applied without grouped data</em>. The statistics returned are produced from the entire dataset.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span>
    mean_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
    max_age  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
    min_age  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   mean_age max_age min_age
## 1 15.02701      70       0</code></pre>
<p>In contrast, below is the same <code>summarise()</code> statement applied to grouped data. The statistics are calculated for each <code>outcome</code> group.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span>
    mean_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
    max_age  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
    min_age  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   outcome mean_age max_age min_age
## * &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Death       15.0      70       0
## 2 Recover     15.2      58       0
## 3 &lt;NA&gt;        14.9      58       0</code></pre>
<p><span style="color: darkgreen;"><strong><em>TIP:</em></strong> Summarise works with both UK and US spelling - <code>summarise()</code> and <code>summarize()</code> call the same function.</span></p>
<div id="summarise-across-multiple-columns" class="section level3" number="1.5.1">
<h3>
<span class="header-section-number">1.5.1</span> Summarise <code>across()</code> multiple columns<a class="anchor" aria-label="anchor" href="#summarise-across-multiple-columns"><i class="fas fa-link"></i></a>
</h3>
<p>You can use summarise across multiple columns using <code>across()</code>. Provide a vector of column names, or use the same semantic helper functions used in <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> (look below) to specify columns by or by criteria.</p>
<p>Below, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> is applied to ungrouped data (global calculation). The columns are specified, a function is specified (no parentheses), and finally, any additional arguments for the function (e.g. <code>na.rm=TRUE</code>).</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">temp</span><span class="op">)</span>,
                   .fns <span class="op">=</span> <span class="va">mean</span>,
                   na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   age_years     temp
## 1  15.02701 38.57576</code></pre>
<p>Below, the same summarise across call is applied on grouped data:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">temp</span><span class="op">)</span>, .fns <span class="op">=</span> <span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   outcome age_years  temp
## * &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 Death        15.0  38.6
## 2 Recover      15.2  38.6
## 3 &lt;NA&gt;         14.9  38.6</code></pre>
<p>Here are those <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> helper functions that you can place <em>within</em> <code>across()</code>:</p>
<p>There are helpers available to assist you in specifying columns:</p>
<ul>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/everything.html">everything()</a></code> - all other columns not mentioned<br>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col()</a></code> - the last column<br>
</li>
<li>
<code>where()</code> - applies a function to all columns and selects those which are TRUE<br>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code> - matches to a specified prefix. Example: <code><a href="https://dplyr.tidyverse.org/reference/select.html">select(starts_with("date"))</a></code>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code> - matches to a specified suffix. Example: <code><a href="https://dplyr.tidyverse.org/reference/select.html">select(ends_with("_end"))</a></code><br>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> - columns containing a character string. Example: <code><a href="https://dplyr.tidyverse.org/reference/select.html">select(contains("time"))</a></code>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code> - to apply a regular expression (regex). Example: <code><a href="https://dplyr.tidyverse.org/reference/select.html">select(contains("[pt]al"))</a></code><br>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">num_range()</a></code> -</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code> - matches if column is named. Useful if the name might not exist. Example: <code><a href="https://dplyr.tidyverse.org/reference/select.html">select(any_of(date_onset, date_death, cardiac_arrest))</a></code>
</li>
</ul>
<p>For example, to return the mean of every numeric column:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, .fns <span class="op">=</span> <span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 12
##   outcome generation   age age_years   lon   lat wt_kg ht_cm ct_blood  temp   bmi days_onset_hosp
## * &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
## 1 Death         16.8  15.1      15.0 -13.2  8.47  52.5  124.     21.3  38.6  49.6            1.74
## 2 Recover       16.4  15.2      15.2 -13.2  8.47  52.6  124.     21.1  38.6  47.1            2.21
## 3 &lt;NA&gt;          16.4  15.0      14.9 -13.2  8.47  52.3  122.     21.2  38.6  47.1            2.00</code></pre>
<p>If you want summary multiple statistics of multiple columns, in an easy-to-read format, consider a two-way table with the <strong>gtsummary</strong> package This package is demonstrated more extensively in the the Statistics page (LINK).</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ddsjoberg/gtsummary">gtsummary</a></span><span class="op">)</span> 

<span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="va">age_years</span>, <span class="va">temp</span>, <span class="va">ht_cm</span><span class="op">)</span> <span class="op">%&gt;%</span>     <span class="co"># select columns (optional)</span>
  <span class="fu">gtsummary</span><span class="fu">::</span><span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/tbl_summary.html">tbl_summary</a></span><span class="op">(</span> 
    by <span class="op">=</span> <span class="va">outcome</span>,                                 <span class="co"># indicate grouping column (optional)</span>
    statistic <span class="op">=</span> <span class="fu"><a href="http://www.danieldsjoberg.com/gtsummary//reference/select_helpers.html">all_continuous</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="st">"{mean} ({sd})"</span><span class="op">)</span> <span class="co"># return mean and std deviation for each group</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#fokoxescet .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fokoxescet .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fokoxescet .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fokoxescet .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fokoxescet .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fokoxescet .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fokoxescet .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fokoxescet .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fokoxescet .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fokoxescet .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fokoxescet .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fokoxescet .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#fokoxescet .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fokoxescet .gt_from_md > :first-child {
  margin-top: 0;
}

#fokoxescet .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fokoxescet .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fokoxescet .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#fokoxescet .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fokoxescet .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#fokoxescet .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fokoxescet .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fokoxescet .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fokoxescet .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fokoxescet .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fokoxescet .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#fokoxescet .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fokoxescet .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#fokoxescet .gt_left {
  text-align: left;
}

#fokoxescet .gt_center {
  text-align: center;
}

#fokoxescet .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fokoxescet .gt_font_normal {
  font-weight: normal;
}

#fokoxescet .gt_font_bold {
  font-weight: bold;
}

#fokoxescet .gt_font_italic {
  font-style: italic;
}

#fokoxescet .gt_super {
  font-size: 65%;
}

#fokoxescet .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="fokoxescet" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>Death</strong>, N = 2,843<sup class="gt_footnote_marks">1</sup>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">
<strong>Recover</strong>, N = 2,163<sup class="gt_footnote_marks">1</sup>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">age_years</td>
      <td class="gt_row gt_center">15 (11)</td>
      <td class="gt_row gt_center">15 (11)</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
      <td class="gt_row gt_center">43</td>
      <td class="gt_row gt_center">33</td>
    </tr>
<tr>
<td class="gt_row gt_left">temp</td>
      <td class="gt_row gt_center">38.56 (0.99)</td>
      <td class="gt_row gt_center">38.58 (0.98)</td>
    </tr>
<tr>
<td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
      <td class="gt_row gt_center">56</td>
      <td class="gt_row gt_center">55</td>
    </tr>
<tr>
<td class="gt_row gt_left">ht_cm</td>
      <td class="gt_row gt_center">124 (49)</td>
      <td class="gt_row gt_center">124 (50)</td>
    </tr>
</tbody>
<tfoot><tr class="gt_footnotes">
<td colspan="3">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks"><em>1</em>
          </sup>
           
          Mean (SD)
          <br></p>
      </td>
    </tr></tfoot>
</table></div></div>
</div>
</div>
<div id="count-and-tally" class="section level2" number="1.6">
<h2>
<span class="header-section-number">1.6</span> Count and tally<a class="anchor" aria-label="anchor" href="#count-and-tally"><i class="fas fa-link"></i></a>
</h2>
<p><code>count()</code> and <code>tally()</code> provide similar functionality but are different.</p>
<p><code>tally()</code> is shorthand for <code>summarise()</code>, and <em>does not</em> automatically group data. Thus, to achieve grouped tallys it must follow a <code>group_by()</code> command. You can add <code>sort = TRUE</code> to see the largest groups first.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="va">tally</span></code></pre></div>
<pre><code>##      n
## 1 6464</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tally</span><span class="op">(</span>sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   outcome     n
##   &lt;chr&gt;   &lt;int&gt;
## 1 Death    2843
## 2 Recover  2163
## 3 &lt;NA&gt;     1458</code></pre>
<p>In contrast, <code>count()</code> does the following:</p>
<ul>
<li>applies <code>group_by()</code> on the specified column(s)<br>
</li>
<li>applies <code>summarise()</code> and returned column <code>n</code> with the number of observations per group<br>
</li>
<li>applies <code>ungroup()</code>
</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span></code></pre></div>
<pre><code>##   outcome    n
## 1   Death 2843
## 2 Recover 2163
## 3    &lt;NA&gt; 1458</code></pre>
<p>Just like with <code>group_by()</code> you can create a new column within the <code>count()</code> command:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span>age_class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">18</span>, <span class="st">"adult"</span>, <span class="st">"child"</span><span class="op">)</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<pre><code>##   age_class    n
## 1     child 4089
## 2     adult 2276
## 3      &lt;NA&gt;   99</code></pre>
<p>Read more about the distinction between <code>tally()</code> and <code>count()</code> <a href="https://dplyr.tidyverse.org/reference/tally.html">here</a></p>
<p>Both of these verbs can be called multiple times, with the functionality “rolling up”. For example, to summarise the number of genders present for each outcome, run the following. Note, the name of the final column is changed from default “n” for clarity.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="co"># produce counts by outcome-gender groups</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co"># produce counts of gender within each outcome group</span>
  <span class="fu">count</span><span class="op">(</span><span class="va">outcome</span>, name <span class="op">=</span> <span class="st">"number of genders per outcome"</span> <span class="op">)</span> </code></pre></div>
<pre><code>##   outcome number of genders per outcome
## 1   Death                             3
## 2 Recover                             3
## 3    &lt;NA&gt;                             3</code></pre>
</div>
<div id="filter-on-grouped-data" class="section level2" number="1.7">
<h2>
<span class="header-section-number">1.7</span> Filter on grouped data<a class="anchor" aria-label="anchor" href="#filter-on-grouped-data"><i class="fas fa-link"></i></a>
</h2>
<p>If you apply a filter to grouped data,</p>
<div id="slice-rows-per-group" class="section level3" number="1.7.1">
<h3>
<span class="header-section-number">1.7.1</span> Slice rows per group<a class="anchor" aria-label="anchor" href="#slice-rows-per-group"><i class="fas fa-link"></i></a>
</h3>
<p>The <strong>dplyr</strong> function <code>slice()</code>, which <a href="https://dplyr.tidyverse.org/reference/slice.html">subsets rows based on their position</a> in the data, can also be applied per group. Remember to account for sorting the data within each group to get the desired “slice”.</p>
<p>For example, to retrieve only the latest 5 admissions from each hospital:</p>
<ol style="list-style-type: decimal">
<li>Group the linelist by column <code>hospital</code><br>
</li>
<li>Arrange the records from latest to earliest <code>date_hospitalisation</code> <em>within each hospital group</em><br>
</li>
<li>Slice to retrieve the first 5 rows</li>
</ol>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="va">hospital</span>, <span class="va">date_hospitalisation</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">hospital</span>, <span class="va">date_hospitalisation</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 30 x 3
## # Groups:   hospital [6]
##    case_id hospital          date_hospitalisation
##    &lt;chr&gt;   &lt;chr&gt;             &lt;date&gt;              
##  1 20b688  Central Hospital  2014-05-06          
##  2 d58402  Central Hospital  2014-05-10          
##  3 b8f2fd  Central Hospital  2014-05-13          
##  4 acf422  Central Hospital  2014-05-28          
##  5 275cc7  Central Hospital  2014-05-28          
##  6 d1fafd  Military Hospital 2014-04-17          
##  7 974bc1  Military Hospital 2014-05-13          
##  8 6a9004  Military Hospital 2014-05-13          
##  9 09e386  Military Hospital 2014-05-14          
## 10 865581  Military Hospital 2014-05-15          
## # ... with 20 more rows</code></pre>
<p><code>slice_head()</code> - selects n rows from the top<br><code>slice_tail()</code> - selects n rows from the end<br><code>slice_sample()</code> - randomly selects n rows<br><code>slice_min()</code> - selects n rows with highest values in <code>order_by =</code> column, use <code>with_ties = TRUE</code> to keep ties<br><code>slice_max()</code> - selects n rows with lowest values in <code>order_by =</code> column, use <code>with_ties = TRUE</code> to keep ties</p>
</div>
<div id="filter-on-group-size" class="section level3" number="1.7.2">
<h3>
<span class="header-section-number">1.7.2</span> Filter on group size<a class="anchor" aria-label="anchor" href="#filter-on-group-size"><i class="fas fa-link"></i></a>
</h3>
<p>The function <code>add_count()</code> adds a column <code>n</code> to the original data giving the number of rows in that row’s group.</p>
<p>Shown below for simplicity is a selection of the <code>linelist</code> data - <code>add_count()</code> is applied to <code>hospital</code>, so the values in column <code>n</code> reflect the number of rows in that row’s hospital group. Note how values are repeated. In the example below, the column name <code>n</code> could be changed to <code>name =</code></p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">hospital</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">add_count</span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span>  <span class="co"># add "number of rows admitted to same hospital as this row" </span></code></pre></div>
<pre><code>##     case_id                             hospital    n
## 1    6c286a                              Missing 1597
## 2    a3c8b8                        Port Hospital 1971
## 3    d8a13d St. Mark's Maternity Hospital (SMMH)  446
## 4    72b905                                Other  978
## 5    be99c8                        Port Hospital 1971
## 6    566f9e                                Other  978
## 7    ce9c02                        Port Hospital 1971
## 8    acf422                     Central Hospital  485
## 9    275cc7                     Central Hospital  485
## 10   dbebea                        Port Hospital 1971
## 11   369449                              Missing 1597
## 12   7e95d1                                Other  978
## 13   788a99                        Port Hospital 1971
## 14   2978ac                        Port Hospital 1971
## 15   e0fb09                        Port Hospital 1971
## 16   be502d                    Military Hospital  987
## 17   bab455                        Port Hospital 1971
## 18   9ae2d7                    Military Hospital  987
## 19   2eaa9a                              Missing 1597
## 20   bbfa93                                Other  978
## 21   88eff2 St. Mark's Maternity Hospital (SMMH)  446
## 22   542d07                        Port Hospital 1971
## 23   f86ce2                    Military Hospital  987
## 24   920c1b                                Other  978
## 25   ddddee                                Other  978
## 26   99e8fa                        Port Hospital 1971
## 27   ec8ee4                              Missing 1597
## 28   567136                        Port Hospital 1971
## 29   67184b                                Other  978
## 30   ceed40                        Port Hospital 1971
## 31   9371a9 St. Mark's Maternity Hospital (SMMH)  446
## 32   bc2adf                              Missing 1597
## 33   f3881f                    Military Hospital  987
## 34   8bd1e8                              Missing 1597
## 35   abd4af                              Missing 1597
## 36   959170                     Central Hospital  485
## 37   64c8ef                     Central Hospital  485
## 38   e56412                     Central Hospital  485
## 39   cfd79c                                Other  978
## 40   021718                        Port Hospital 1971
## 41   92ab68                    Military Hospital  987
## 42   4c1040                                Other  978
## 43   342b03                                Other  978
## 44   92ddf7                              Missing 1597
## 45   3f5a00 St. Mark's Maternity Hospital (SMMH)  446
## 46   ae50c8                        Port Hospital 1971
## 47   c76676                    Military Hospital  987
## 48   baacc1                                Other  978
## 49   9d69e4                              Missing 1597
## 50   1e1825                        Port Hospital 1971
## 51   9fcf61                        Port Hospital 1971
## 52   0277c7                              Missing 1597
## 53   cc7393                              Missing 1597
## 54   3789ee St. Mark's Maternity Hospital (SMMH)  446
## 55   c5d4ec St. Mark's Maternity Hospital (SMMH)  446
## 56   a81f7d                        Port Hospital 1971
## 57   72bb4b                              Missing 1597
## 58   df2113                    Military Hospital  987
## 59   52f612                              Missing 1597
## 60   059cc0                              Missing 1597
## 61   1a9636                        Port Hospital 1971
## 62   68623f                              Missing 1597
## 63   bd0983                        Port Hospital 1971
## 64   df8dbb                                Other  978
## 65   9f0c37                                Other  978
## 66   f97626                    Military Hospital  987
## 67   834a39                              Missing 1597
## 68   92e129                     Central Hospital  485
## 69   feea26                     Central Hospital  485
## 70   c9e824                              Missing 1597
## 71   6963ab                              Missing 1597
## 72   1bdf6f                              Missing 1597
## 73   55f73f                    Military Hospital  987
## 74   bbdbda                        Port Hospital 1971
## 75   c41648                                Other  978
## 76   b3f687                                Other  978
## 77   2965bd St. Mark's Maternity Hospital (SMMH)  446
## 78   a182a5                    Military Hospital  987
## 79   a3a599                                Other  978
## 80   cc71ea                        Port Hospital 1971
## 81   37d5ba                        Port Hospital 1971
## 82   effb9d                        Port Hospital 1971
## 83   3bbcd7                        Port Hospital 1971
## 84   3f5fe1 St. Mark's Maternity Hospital (SMMH)  446
## 85   7b46ff                                Other  978
## 86   7f8dd2                              Missing 1597
## 87   cb48bf                                Other  978
## 88   e8c88c                        Port Hospital 1971
## 89   2e9570                    Military Hospital  987
## 90   9c8045                              Missing 1597
## 91   c86866                        Port Hospital 1971
## 92   31e797                     Central Hospital  485
## 93   5f5f78                                Other  978
## 94   e6d478                              Missing 1597
## 95   b3c066                    Military Hospital  987
## 96   3dca80                                Other  978
## 97   61c40f                              Missing 1597
## 98   9b4647                     Central Hospital  485
## 99   6f045a                        Port Hospital 1971
## 100  805ca4                        Port Hospital 1971
## 101  911db7                        Port Hospital 1971
## 102  aa3c55                        Port Hospital 1971
## 103  c68c23                              Missing 1597
## 104  cd38d3                              Missing 1597
## 105  e898af                    Military Hospital  987
## 106  111ca6                     Central Hospital  485
## 107  2463fc                        Port Hospital 1971
## 108  cccca6                              Missing 1597
## 109  660b34                              Missing 1597
## 110  f0251f                        Port Hospital 1971
## 111  270603                    Military Hospital  987
## 112  cf4399                                Other  978
## 113  aebdac                        Port Hospital 1971
## 114  49e88d                    Military Hospital  987
## 115  730684                    Military Hospital  987
## 116  21689b                     Central Hospital  485
## 117  c899b0                              Missing 1597
## 118  6a007d                        Port Hospital 1971
## 119  858426                        Port Hospital 1971
## 120  b4bb29                        Port Hospital 1971
## 121  ee82d4                        Port Hospital 1971
## 122  09915f                        Port Hospital 1971
## 123  83e5cd                                Other  978
## 124  181506                              Missing 1597
## 125  45d75d                              Missing 1597
## 126  508984                                Other  978
## 127  9feec9                    Military Hospital  987
## 128  9e2fb0                        Port Hospital 1971
## 129  ac22bf                              Missing 1597
## 130  83d537                        Port Hospital 1971
## 131  08bf40                              Missing 1597
## 132  407e7e St. Mark's Maternity Hospital (SMMH)  446
## 133  e256c8                              Missing 1597
## 134  8ce67b                                Other  978
## 135  464b83                                Other  978
## 136  d5d56f                                Other  978
## 137  5a54ea                              Missing 1597
## 138  cd182c St. Mark's Maternity Hospital (SMMH)  446
## 139  1bc942                        Port Hospital 1971
## 140  f027f8                        Port Hospital 1971
## 141  0c7230                              Missing 1597
## 142  f70e4c                    Military Hospital  987
## 143  056471                              Missing 1597
## 144  1961e9                    Military Hospital  987
## 145  272fb6                        Port Hospital 1971
## 146  830af5                                Other  978
## 147  3857bf                              Missing 1597
## 148  a49172                                Other  978
## 149  c800a4                        Port Hospital 1971
## 150  d45263                        Port Hospital 1971
## 151  f0b93e                                Other  978
## 152  ee9a23                    Military Hospital  987
## 153  c0c70a                        Port Hospital 1971
## 154  474f41                        Port Hospital 1971
## 155  51f606                        Port Hospital 1971
## 156  363eb4                                Other  978
## 157  93adc6                        Port Hospital 1971
## 158  4a5f7e                                Other  978
## 159  268b99                        Port Hospital 1971
## 160  bb7af6                        Port Hospital 1971
## 161  7ea9a5                                Other  978
## 162  52f06c St. Mark's Maternity Hospital (SMMH)  446
## 163  c10e49                              Missing 1597
## 164  911ded                        Port Hospital 1971
## 165  79f62b                        Port Hospital 1971
## 166  bc0b51 St. Mark's Maternity Hospital (SMMH)  446
## 167  da1f29 St. Mark's Maternity Hospital (SMMH)  446
## 168  8a0025                              Missing 1597
## 169  8e1819                              Missing 1597
## 170  862f64                              Missing 1597
## 171  decb2c                        Port Hospital 1971
## 172  696e71                        Port Hospital 1971
## 173  7b51e1 St. Mark's Maternity Hospital (SMMH)  446
## 174  41b557                        Port Hospital 1971
## 175  af46a6                        Port Hospital 1971
## 176  7256ff                        Port Hospital 1971
## 177  43c97c                                Other  978
## 178  b49023                    Military Hospital  987
## 179  f4a472                              Missing 1597
## 180  f94a8f St. Mark's Maternity Hospital (SMMH)  446
## 181  e55bce St. Mark's Maternity Hospital (SMMH)  446
## 182  4704e2                        Port Hospital 1971
## 183  09f73e                        Port Hospital 1971
## 184  2ae536                        Port Hospital 1971
## 185  52c435                        Port Hospital 1971
## 186  7dacd2                        Port Hospital 1971
## 187  1dffed                              Missing 1597
## 188  251fec                    Military Hospital  987
## 189  4d06ed                        Port Hospital 1971
## 190  2f29c3                    Military Hospital  987
## 191  35a38e                        Port Hospital 1971
## 192  95c85f                              Missing 1597
## 193  7b6887                                Other  978
## 194  68f609                                Other  978
## 195  6f5d6a                              Missing 1597
## 196  aeace5                    Military Hospital  987
## 197  44163c St. Mark's Maternity Hospital (SMMH)  446
## 198  8a79c5                              Missing 1597
## 199  b255c3                              Missing 1597
## 200  edcb9c                                Other  978
## 201  7df257                        Port Hospital 1971
## 202  5d6f13                     Central Hospital  485
## 203  7f8471                              Missing 1597
## 204  97ea41                              Missing 1597
## 205  785e65                        Port Hospital 1971
## 206  984166                              Missing 1597
## 207  8d3858                              Missing 1597
## 208  d7ff31                        Port Hospital 1971
## 209  2336b5                                Other  978
## 210  752c63                              Missing 1597
## 211  7456e4                        Port Hospital 1971
## 212  f40f7b                              Missing 1597
## 213  e25651                                Other  978
## 214  faf2aa                        Port Hospital 1971
## 215  f07ae3                     Central Hospital  485
## 216  70e542                        Port Hospital 1971
## 217  fdfabb                              Missing 1597
## 218  13de32                        Port Hospital 1971
## 219  4df686                        Port Hospital 1971
## 220  507608                              Missing 1597
## 221  b4671f                        Port Hospital 1971
## 222  018cec                    Military Hospital  987
## 223  e68dd5                                Other  978
## 224  8555ef                                Other  978
## 225  7c3e28                              Missing 1597
## 226  dd44f3                                Other  978
## 227  6e0ea5                        Port Hospital 1971
## 228  471584                    Military Hospital  987
## 229  5ee95c                        Port Hospital 1971
## 230  c6cdb2                                Other  978
## 231  acac6f                        Port Hospital 1971
## 232  44088e                              Missing 1597
## 233  25b337                    Military Hospital  987
## 234  b83511                        Port Hospital 1971
## 235  93f42a                    Military Hospital  987
## 236  5a65bb                        Port Hospital 1971
## 237  bb0230                        Port Hospital 1971
## 238  1c7c3f                              Missing 1597
## 239  1aae82                              Missing 1597
## 240  e824bf                                Other  978
## 241  b8c40d                              Missing 1597
## 242  a1b9bd                              Missing 1597
## 243  9d0f57                              Missing 1597
## 244  7f957c                              Missing 1597
## 245  305144                                Other  978
## 246  17742d                                Other  978
## 247  506d04                                Other  978
## 248  54336c                                Other  978
## 249  5c27ca                              Missing 1597
## 250  1bb136                              Missing 1597
## 251  19b40a                              Missing 1597
## 252  882ab5                                Other  978
## 253  dbab87                        Port Hospital 1971
## 254  8028e7                    Military Hospital  987
## 255  a3f6dd                    Military Hospital  987
## 256  300cf2                                Other  978
## 257  10ddce                                Other  978
## 258  d95c49                     Central Hospital  485
## 259  ff144a                        Port Hospital 1971
## 260  836f4a                    Military Hospital  987
## 261  0bafac                              Missing 1597
## 262  7d0cf6                        Port Hospital 1971
## 263  00409c                              Missing 1597
## 264  e9d18b                        Port Hospital 1971
## 265  0e654f                                Other  978
## 266  ad0218                        Port Hospital 1971
## 267  998070                     Central Hospital  485
## 268  125c66                              Missing 1597
## 269  aac41c                              Missing 1597
## 270  5c9744                     Central Hospital  485
## 271  53a3e2                                Other  978
## 272  166302                    Military Hospital  987
## 273  292298                        Port Hospital 1971
## 274  fb2c5a                     Central Hospital  485
## 275  1f3f18                        Port Hospital 1971
## 276  b18a1d                        Port Hospital 1971
## 277  ebe2aa                    Military Hospital  987
## 278  51995c                        Port Hospital 1971
## 279  77d9e0                              Missing 1597
## 280  3d9f8e                                Other  978
## 281  ecb1de                              Missing 1597
## 282  31403d St. Mark's Maternity Hospital (SMMH)  446
## 283  6c1185                              Missing 1597
## 284  02502c                              Missing 1597
## 285  fe8345                    Military Hospital  987
## 286  039299                    Military Hospital  987
## 287  e98078                        Port Hospital 1971
## 288  e0a4cd                              Missing 1597
## 289  9f9bc0                        Port Hospital 1971
## 290  1d6ffd                        Port Hospital 1971
## 291  4e54ad                        Port Hospital 1971
## 292  227baf                        Port Hospital 1971
## 293  00612b                              Missing 1597
## 294  e0ac78                              Missing 1597
## 295  da9565                              Missing 1597
## 296  247cc4                        Port Hospital 1971
## 297  beec14                     Central Hospital  485
## 298  441130                        Port Hospital 1971
## 299  b48c42                              Missing 1597
## 300  e36e1f                     Central Hospital  485
## 301  9d197f                        Port Hospital 1971
## 302  796c7c                        Port Hospital 1971
## 303  26d162                        Port Hospital 1971
## 304  633fbe                              Missing 1597
## 305  1dcf17                              Missing 1597
## 306  08a3ef                              Missing 1597
## 307  987c0a                              Missing 1597
## 308  46bed2                        Port Hospital 1971
## 309  140f9e                              Missing 1597
## 310  a2df92                        Port Hospital 1971
## 311  a6cbbc                        Port Hospital 1971
## 312  42b86c                        Port Hospital 1971
## 313  ae7509                        Port Hospital 1971
## 314  2adcc8                        Port Hospital 1971
## 315  747ece                              Missing 1597
## 316  37e101                        Port Hospital 1971
## 317  a22ee3                                Other  978
## 318  b85356                    Military Hospital  987
## 319  ba66a6                    Military Hospital  987
## 320  306557                    Military Hospital  987
## 321  47dfcd                        Port Hospital 1971
## 322  07df1a                    Military Hospital  987
## 323  6ffce0                                Other  978
## 324  f85d5d                        Port Hospital 1971
## 325  80a84a                        Port Hospital 1971
## 326  6ad9f7                        Port Hospital 1971
## 327  3b925b                                Other  978
## 328  10362e                        Port Hospital 1971
## 329  ab7dc1                    Military Hospital  987
## 330  7f82f3                              Missing 1597
## 331  721b5b                              Missing 1597
## 332  fd960a                        Port Hospital 1971
## 333  8e106e                                Other  978
##  [ reached 'max' / getOption("max.print") -- omitted 6131 rows ]</code></pre>
<p>It then becomes easy to filter for case rows who were hospitalized at a “small” hospital, say, a hospital that admitted fewer than 500 patients:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">hospital</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">add_count</span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&lt;</span> <span class="fl">500</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="mutate-on-grouped-data" class="section level2" number="1.8">
<h2>
<span class="header-section-number">1.8</span> Mutate on grouped data<a class="anchor" aria-label="anchor" href="#mutate-on-grouped-data"><i class="fas fa-link"></i></a>
</h2>
<p>To retain all columns and rows (not summarize) and <em>add a new variable for average group statistics</em>, use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> instead of <code>summarise()</code>.</p>
<p>This is useful if you want group statistics in the original dataset with all other column present - e.g. for calculations comparing one row to the group. For example, this code calculates the difference between a row’s delay to admission and the median delay for their hospital:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="co"># group data by hospital (no change to linelist yet)</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  
  <span class="co"># new columns</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    <span class="co"># mean days to admission per hospital (rounded to 1 decimal)</span>
    group_delay_admit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,
    
    <span class="co"># difference between row's delay and mean delay at their hospital (rounded to 1 decimal)</span>
    diff_to_group     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">days_onset_hosp</span> <span class="op">-</span> <span class="va">group_delay_admit</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  
  <span class="co"># select certain rows only - for demonstration/viewing purposes</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">hospital</span>, <span class="va">days_onset_hosp</span>, <span class="va">group_delay_admit</span>, <span class="va">diff_to_group</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6,464 x 5
## # Groups:   hospital [6]
##    case_id hospital                             days_onset_hosp group_delay_admit diff_to_group
##    &lt;chr&gt;   &lt;chr&gt;                                          &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
##  1 6c286a  Missing                                            0               2            -2  
##  2 a3c8b8  Port Hospital                                      2               1.9           0.1
##  3 d8a13d  St. Mark's Maternity Hospital (SMMH)               2               2             0  
##  4 72b905  Other                                              1               1.9          -0.9
##  5 be99c8  Port Hospital                                      1               1.9          -0.9
##  6 566f9e  Other                                              1               1.9          -0.9
##  7 ce9c02  Port Hospital                                      2               1.9           0.1
##  8 acf422  Central Hospital                                   1               1.8          -0.8
##  9 275cc7  Central Hospital                                   1               1.8          -0.8
## 10 dbebea  Port Hospital                                      1               1.9          -0.9
## # ... with 6,454 more rows</code></pre>
</div>
<div id="select-on-grouped-data" class="section level2" number="1.9">
<h2>
<span class="header-section-number">1.9</span> Select on grouped data<a class="anchor" aria-label="anchor" href="#select-on-grouped-data"><i class="fas fa-link"></i></a>
</h2>
<p>The verb <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> works on grouped data, but the grouping columns are always included (even if not mentioned in <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>).<br>
If you do not want these grouping columns, use <code>ungroup()</code> first.</p>
<!-- ======================================================= -->
</div>
<div id="base-r" class="section level2 tabset tabset-fade tabset-pills" number="1.10">
<h2>
<span class="header-section-number">1.10</span> Base R<a class="anchor" aria-label="anchor" href="#base-r"><i class="fas fa-link"></i></a>
</h2>
<p>Here we briefly demonstrate grouping data with the <strong>base</strong> R function <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code></p>
<p>TO DO</p>
<!-- ======================================================= -->
</div>
<div id="resources" class="section level2 tabset tabset-fade tabset-pills" number="1.11">
<h2>
<span class="header-section-number">1.11</span> Resources<a class="anchor" aria-label="anchor" href="#resources"><i class="fas fa-link"></i></a>
</h2>
<p>Here are some useful resources for more information:
<em><a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf</a>
</em><a href="https://datacarpentry.org/R-genomics/04-dplyr.html" class="uri">https://datacarpentry.org/R-genomics/04-dplyr.html</a>
<em><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="uri">https://dplyr.tidyverse.org/reference/group_by.html</a>
<a href="https://dplyr.tidyverse.org/articles/grouping.html" class="uri">https://dplyr.tidyverse.org/articles/grouping.html</a><br></em><a href="https://itsalocke.com/files/DataManipulationinR.pdf" class="uri">https://itsalocke.com/files/DataManipulationinR.pdf</a></p>
<p>You can perform any summary function on grouped data; see the Cheat Sheet here for more info:
<a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html">Welcome</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#grouping-data"><span class="header-section-number">1</span> Grouping data</a></li>
<li><a class="nav-link" href="#overview"><span class="header-section-number">1.1</span> Overview</a></li>
<li><a class="nav-link" href="#preparation"><span class="header-section-number">1.2</span> Preparation</a></li>
<li>
<a class="nav-link" href="#group_by"><span class="header-section-number">1.3</span> group_by()</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#unique-groups"><span class="header-section-number">1.3.1</span> Unique groups</a></li>
<li><a class="nav-link" href="#new-columns"><span class="header-section-number">1.3.2</span> New columns</a></li>
<li><a class="nav-link" href="#replaceadd-grouping-columns"><span class="header-section-number">1.3.3</span> Replace/add grouping columns</a></li>
</ul>
</li>
<li><a class="nav-link" href="#un-group"><span class="header-section-number">1.4</span> Un-group</a></li>
<li>
<a class="nav-link" href="#summarise"><span class="header-section-number">1.5</span> Summarise</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#summarise-across-multiple-columns"><span class="header-section-number">1.5.1</span> Summarise across() multiple columns</a></li></ul>
</li>
<li><a class="nav-link" href="#count-and-tally"><span class="header-section-number">1.6</span> Count and tally</a></li>
<li>
<a class="nav-link" href="#filter-on-grouped-data"><span class="header-section-number">1.7</span> Filter on grouped data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#slice-rows-per-group"><span class="header-section-number">1.7.1</span> Slice rows per group</a></li>
<li><a class="nav-link" href="#filter-on-group-size"><span class="header-section-number">1.7.2</span> Filter on group size</a></li>
</ul>
</li>
<li><a class="nav-link" href="#mutate-on-grouped-data"><span class="header-section-number">1.8</span> Mutate on grouped data</a></li>
<li><a class="nav-link" href="#select-on-grouped-data"><span class="header-section-number">1.9</span> Select on grouped data</a></li>
<li><a class="nav-link" href="#base-r"><span class="header-section-number">1.10</span> Base R</a></li>
<li><a class="nav-link" href="#resources"><span class="header-section-number">1.11</span> Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Handbook for Epidemiologists</strong>" was written by the handbook team. It was last built on 2021-02-07.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
